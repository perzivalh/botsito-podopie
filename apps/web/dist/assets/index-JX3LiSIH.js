(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Au={exports:{}},Ui={},Pu={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wr=Symbol.for("react.element"),xp=Symbol.for("react.portal"),jp=Symbol.for("react.fragment"),Np=Symbol.for("react.strict_mode"),wp=Symbol.for("react.profiler"),_p=Symbol.for("react.provider"),kp=Symbol.for("react.context"),Sp=Symbol.for("react.forward_ref"),Ep=Symbol.for("react.suspense"),Cp=Symbol.for("react.memo"),bp=Symbol.for("react.lazy"),nc=Symbol.iterator;function Tp(e){return e===null||typeof e!="object"?null:(e=nc&&e[nc]||e["@@iterator"],typeof e=="function"?e:null)}var Ru={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ou=Object.assign,Mu={};function ks(e,t,n){this.props=e,this.context=t,this.refs=Mu,this.updater=n||Ru}ks.prototype.isReactComponent={};ks.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ks.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Du(){}Du.prototype=ks.prototype;function Vl(e,t,n){this.props=e,this.context=t,this.refs=Mu,this.updater=n||Ru}var Fl=Vl.prototype=new Du;Fl.constructor=Vl;Ou(Fl,ks.prototype);Fl.isPureReactComponent=!0;var sc=Array.isArray,Iu=Object.prototype.hasOwnProperty,Wl={current:null},Bu={key:!0,ref:!0,__self:!0,__source:!0};function zu(e,t,n){var s,i={},a=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Iu.call(t,s)&&!Bu.hasOwnProperty(s)&&(i[s]=t[s]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:wr,type:e,key:a,ref:l,props:i,_owner:Wl.current}}function Lp(e,t){return{$$typeof:wr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Hl(e){return typeof e=="object"&&e!==null&&e.$$typeof===wr}function Ap(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rc=/\/+/g;function oa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ap(""+e.key):t.toString(36)}function Zr(e,t,n,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case wr:case xp:l=!0}}if(l)return l=e,i=i(l),e=s===""?"."+oa(l,0):s,sc(i)?(n="",e!=null&&(n=e.replace(rc,"$&/")+"/"),Zr(i,t,n,"",function(d){return d})):i!=null&&(Hl(i)&&(i=Lp(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(rc,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=s===""?".":s+":",sc(e))for(var o=0;o<e.length;o++){a=e[o];var c=s+oa(a,o);l+=Zr(a,t,n,c,i)}else if(c=Tp(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=s+oa(a,o++),l+=Zr(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Rr(e,t,n){if(e==null)return e;var s=[],i=0;return Zr(e,s,"","",function(a){return t.call(n,a,i++)}),s}function Pp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},ei={transition:null},Rp={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:ei,ReactCurrentOwner:Wl};function Uu(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Rr,forEach:function(e,t,n){Rr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rr(e,function(){t++}),t},toArray:function(e){return Rr(e,function(t){return t})||[]},only:function(e){if(!Hl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=ks;ae.Fragment=jp;ae.Profiler=wp;ae.PureComponent=Vl;ae.StrictMode=Np;ae.Suspense=Ep;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rp;ae.act=Uu;ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Ou({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Wl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Iu.call(t,c)&&!Bu.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:wr,type:e.type,key:i,ref:a,props:s,_owner:l}};ae.createContext=function(e){return e={$$typeof:kp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_p,_context:e},e.Consumer=e};ae.createElement=zu;ae.createFactory=function(e){var t=zu.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:Sp,render:e}};ae.isValidElement=Hl;ae.lazy=function(e){return{$$typeof:bp,_payload:{_status:-1,_result:e},_init:Pp}};ae.memo=function(e,t){return{$$typeof:Cp,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=ei.transition;ei.transition={};try{e()}finally{ei.transition=t}};ae.unstable_act=Uu;ae.useCallback=function(e,t){return rt.current.useCallback(e,t)};ae.useContext=function(e){return rt.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};ae.useEffect=function(e,t){return rt.current.useEffect(e,t)};ae.useId=function(){return rt.current.useId()};ae.useImperativeHandle=function(e,t,n){return rt.current.useImperativeHandle(e,t,n)};ae.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return rt.current.useMemo(e,t)};ae.useReducer=function(e,t,n){return rt.current.useReducer(e,t,n)};ae.useRef=function(e){return rt.current.useRef(e)};ae.useState=function(e){return rt.current.useState(e)};ae.useSyncExternalStore=function(e,t,n){return rt.current.useSyncExternalStore(e,t,n)};ae.useTransition=function(){return rt.current.useTransition()};ae.version="18.3.1";Pu.exports=ae;var v=Pu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=v,Mp=Symbol.for("react.element"),Dp=Symbol.for("react.fragment"),Ip=Object.prototype.hasOwnProperty,Bp=Op.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zp={key:!0,ref:!0,__self:!0,__source:!0};function $u(e,t,n){var s,i={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)Ip.call(t,s)&&!zp.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:Mp,type:e,key:a,ref:l,props:i,_owner:Bp.current}}Ui.Fragment=Dp;Ui.jsx=$u;Ui.jsxs=$u;Au.exports=Ui;var r=Au.exports,Vu={exports:{}},vt={},Fu={exports:{}},Wu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,F){var S=I.length;I.push(F);e:for(;0<S;){var $=S-1>>>1,H=I[$];if(0<i(H,F))I[$]=F,I[S]=H,S=$;else break e}}function n(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var F=I[0],S=I.pop();if(S!==F){I[0]=S;e:for(var $=0,H=I.length,ee=H>>>1;$<ee;){var b=2*($+1)-1,G=I[b],X=b+1,U=I[X];if(0>i(G,S))X<H&&0>i(U,G)?(I[$]=U,I[X]=S,$=X):(I[$]=G,I[b]=S,$=b);else if(X<H&&0>i(U,S))I[$]=U,I[X]=S,$=X;else break e}}return F}function i(I,F){var S=I.sortIndex-F.sortIndex;return S!==0?S:I.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],x=1,p=null,y=3,L=!1,m=!1,T=!1,N=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(I){for(var F=n(d);F!==null;){if(F.callback===null)s(d);else if(F.startTime<=I)s(d),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(d)}}function j(I){if(T=!1,g(I),!m)if(n(c)!==null)m=!0,le(A);else{var F=n(d);F!==null&&je(j,F.startTime-I)}}function A(I,F){m=!1,T&&(T=!1,u(C),C=-1),L=!0;var S=y;try{for(g(F),p=n(c);p!==null&&(!(p.expirationTime>F)||I&&!q());){var $=p.callback;if(typeof $=="function"){p.callback=null,y=p.priorityLevel;var H=$(p.expirationTime<=F);F=e.unstable_now(),typeof H=="function"?p.callback=H:p===n(c)&&s(c),g(F)}else s(c);p=n(c)}if(p!==null)var ee=!0;else{var b=n(d);b!==null&&je(j,b.startTime-F),ee=!1}return ee}finally{p=null,y=S,L=!1}}var w=!1,P=null,C=-1,B=5,V=-1;function q(){return!(e.unstable_now()-V<B)}function ie(){if(P!==null){var I=e.unstable_now();V=I;var F=!0;try{F=P(!0,I)}finally{F?fe():(w=!1,P=null)}}else w=!1}var fe;if(typeof f=="function")fe=function(){f(ie)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,be=ge.port2;ge.port1.onmessage=ie,fe=function(){be.postMessage(null)}}else fe=function(){N(ie,0)};function le(I){P=I,w||(w=!0,fe())}function je(I,F){C=N(function(){I(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){m||L||(m=!0,le(A))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(y){case 1:case 2:case 3:var F=3;break;default:F=y}var S=y;y=F;try{return I()}finally{y=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,F){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var S=y;y=I;try{return F()}finally{y=S}},e.unstable_scheduleCallback=function(I,F,S){var $=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?$+S:$):S=$,I){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=S+H,I={id:x++,callback:F,priorityLevel:I,startTime:S,expirationTime:H,sortIndex:-1},S>$?(I.sortIndex=S,t(d,I),n(c)===null&&I===n(d)&&(T?(u(C),C=-1):T=!0,je(j,S-$))):(I.sortIndex=H,t(c,I),m||L||(m=!0,le(A))),I},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(I){var F=y;return function(){var S=y;y=F;try{return I.apply(this,arguments)}finally{y=S}}}})(Wu);Fu.exports=Wu;var Up=Fu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=v,gt=Up;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hu=new Set,ir={};function Hn(e,t){vs(e,t),vs(e+"Capture",t)}function vs(e,t){for(ir[e]=t,e=0;e<t.length;e++)Hu.add(t[e])}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=Object.prototype.hasOwnProperty,Vp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ic={},ac={};function Fp(e){return Va.call(ac,e)?!0:Va.call(ic,e)?!1:Vp.test(e)?ac[e]=!0:(ic[e]=!0,!1)}function Wp(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Hp(e,t,n,s){if(t===null||typeof t>"u"||Wp(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function it(e,t,n,s,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fe[e]=new it(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fe[t]=new it(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fe[e]=new it(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fe[e]=new it(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fe[e]=new it(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fe[e]=new it(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fe[e]=new it(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fe[e]=new it(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fe[e]=new it(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ql=/[\-:]([a-z])/g;function ql(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ql,ql);Fe[t]=new it(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ql,ql);Fe[t]=new it(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ql,ql);Fe[t]=new it(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fe[e]=new it(e,1,!1,e.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fe[e]=new it(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gl(e,t,n,s){var i=Fe.hasOwnProperty(t)?Fe[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Hp(t,n,i,s)&&(n=null),s||i===null?Fp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,s=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var nn=$p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Or=Symbol.for("react.element"),Zn=Symbol.for("react.portal"),es=Symbol.for("react.fragment"),Yl=Symbol.for("react.strict_mode"),Fa=Symbol.for("react.profiler"),Qu=Symbol.for("react.provider"),qu=Symbol.for("react.context"),Kl=Symbol.for("react.forward_ref"),Wa=Symbol.for("react.suspense"),Ha=Symbol.for("react.suspense_list"),Xl=Symbol.for("react.memo"),dn=Symbol.for("react.lazy"),Gu=Symbol.for("react.offscreen"),lc=Symbol.iterator;function Ds(e){return e===null||typeof e!="object"?null:(e=lc&&e[lc]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,ca;function Hs(e){if(ca===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ca=t&&t[1]||""}return`
`+ca+e}var ua=!1;function da(e,t){if(!e||ua)return"";ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{ua=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Hs(e):""}function Qp(e){switch(e.tag){case 5:return Hs(e.type);case 16:return Hs("Lazy");case 13:return Hs("Suspense");case 19:return Hs("SuspenseList");case 0:case 2:case 15:return e=da(e.type,!1),e;case 11:return e=da(e.type.render,!1),e;case 1:return e=da(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case es:return"Fragment";case Zn:return"Portal";case Fa:return"Profiler";case Yl:return"StrictMode";case Wa:return"Suspense";case Ha:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qu:return(e.displayName||"Context")+".Consumer";case Qu:return(e._context.displayName||"Context")+".Provider";case Kl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xl:return t=e.displayName||null,t!==null?t:Qa(e.type)||"Memo";case dn:t=e._payload,e=e._init;try{return Qa(e(t))}catch{}}return null}function qp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(t);case 8:return t===Yl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function En(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gp(e){var t=Yu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mr(e){e._valueTracker||(e._valueTracker=Gp(e))}function Ku(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Yu(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function mi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qa(e,t){var n=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function oc(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=En(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Xu(e,t){t=t.checked,t!=null&&Gl(e,"checked",t,!1)}function Ga(e,t){Xu(e,t);var n=En(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ya(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ya(e,t.type,En(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ya(e,t,n){(t!=="number"||mi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Qs=Array.isArray;function ds(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+En(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ka(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(Qs(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:En(n)}}function Ju(e,t){var n=En(t.value),s=En(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function dc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dr,ed=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dr=Dr||document.createElement("div"),Dr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ar(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yp=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(e){Yp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ks[t]=Ks[e]})});function td(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ks.hasOwnProperty(e)&&Ks[e]?(""+t).trim():t+"px"}function nd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=td(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}var Kp=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ja(e,t){if(t){if(Kp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function Za(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var el=null;function Jl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tl=null,hs=null,fs=null;function hc(e){if(e=Sr(e)){if(typeof tl!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Hi(t),tl(e.stateNode,e.type,t))}}function sd(e){hs?fs?fs.push(e):fs=[e]:hs=e}function rd(){if(hs){var e=hs,t=fs;if(fs=hs=null,hc(e),t)for(e=0;e<t.length;e++)hc(t[e])}}function id(e,t){return e(t)}function ad(){}var ha=!1;function ld(e,t,n){if(ha)return e(t,n);ha=!0;try{return id(e,t,n)}finally{ha=!1,(hs!==null||fs!==null)&&(ad(),rd())}}function lr(e,t){var n=e.stateNode;if(n===null)return null;var s=Hi(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var nl=!1;if(Jt)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){nl=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{nl=!1}function Xp(e,t,n,s,i,a,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(x){this.onError(x)}}var Xs=!1,gi=null,vi=!1,sl=null,Jp={onError:function(e){Xs=!0,gi=e}};function Zp(e,t,n,s,i,a,l,o,c){Xs=!1,gi=null,Xp.apply(Jp,arguments)}function em(e,t,n,s,i,a,l,o,c){if(Zp.apply(this,arguments),Xs){if(Xs){var d=gi;Xs=!1,gi=null}else throw Error(M(198));vi||(vi=!0,sl=d)}}function Qn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function od(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fc(e){if(Qn(e)!==e)throw Error(M(188))}function tm(e){var t=e.alternate;if(!t){if(t=Qn(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return fc(i),e;if(a===s)return fc(i),t;a=a.sibling}throw Error(M(188))}if(n.return!==s.return)n=i,s=a;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,s=a;break}if(o===s){l=!0,s=i,n=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===n){l=!0,n=a,s=i;break}if(o===s){l=!0,s=a,n=i;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==s)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function cd(e){return e=tm(e),e!==null?ud(e):null}function ud(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ud(e);if(t!==null)return t;e=e.sibling}return null}var dd=gt.unstable_scheduleCallback,pc=gt.unstable_cancelCallback,nm=gt.unstable_shouldYield,sm=gt.unstable_requestPaint,Ae=gt.unstable_now,rm=gt.unstable_getCurrentPriorityLevel,Zl=gt.unstable_ImmediatePriority,hd=gt.unstable_UserBlockingPriority,yi=gt.unstable_NormalPriority,im=gt.unstable_LowPriority,fd=gt.unstable_IdlePriority,$i=null,$t=null;function am(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot($i,e,void 0,(e.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:cm,lm=Math.log,om=Math.LN2;function cm(e){return e>>>=0,e===0?32:31-(lm(e)/om|0)|0}var Ir=64,Br=4194304;function qs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xi(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?s=qs(o):(a&=l,a!==0&&(s=qs(a)))}else l=n&~i,l!==0?s=qs(l):a!==0&&(s=qs(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Rt(t),i=1<<n,s|=e[n],t&=~i;return s}function um(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dm(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Rt(a),o=1<<l,c=i[l];c===-1?(!(o&n)||o&s)&&(i[l]=um(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function rl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pd(){var e=Ir;return Ir<<=1,!(Ir&4194240)&&(Ir=64),e}function fa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _r(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rt(t),e[t]=n}function hm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Rt(n),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~a}}function eo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Rt(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var me=0;function md(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gd,to,vd,yd,xd,il=!1,zr=[],vn=null,yn=null,xn=null,or=new Map,cr=new Map,fn=[],fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mc(e,t){switch(e){case"focusin":case"focusout":vn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":or.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cr.delete(t.pointerId)}}function Bs(e,t,n,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Sr(t),t!==null&&to(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function pm(e,t,n,s,i){switch(t){case"focusin":return vn=Bs(vn,e,t,n,s,i),!0;case"dragenter":return yn=Bs(yn,e,t,n,s,i),!0;case"mouseover":return xn=Bs(xn,e,t,n,s,i),!0;case"pointerover":var a=i.pointerId;return or.set(a,Bs(or.get(a)||null,e,t,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,cr.set(a,Bs(cr.get(a)||null,e,t,n,s,i)),!0}return!1}function jd(e){var t=Mn(e.target);if(t!==null){var n=Qn(t);if(n!==null){if(t=n.tag,t===13){if(t=od(n),t!==null){e.blockedOn=t,xd(e.priority,function(){vd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ti(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=al(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);el=s,n.target.dispatchEvent(s),el=null}else return t=Sr(n),t!==null&&to(t),e.blockedOn=n,!1;t.shift()}return!0}function gc(e,t,n){ti(e)&&n.delete(t)}function mm(){il=!1,vn!==null&&ti(vn)&&(vn=null),yn!==null&&ti(yn)&&(yn=null),xn!==null&&ti(xn)&&(xn=null),or.forEach(gc),cr.forEach(gc)}function zs(e,t){e.blockedOn===t&&(e.blockedOn=null,il||(il=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,mm)))}function ur(e){function t(i){return zs(i,e)}if(0<zr.length){zs(zr[0],e);for(var n=1;n<zr.length;n++){var s=zr[n];s.blockedOn===e&&(s.blockedOn=null)}}for(vn!==null&&zs(vn,e),yn!==null&&zs(yn,e),xn!==null&&zs(xn,e),or.forEach(t),cr.forEach(t),n=0;n<fn.length;n++)s=fn[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<fn.length&&(n=fn[0],n.blockedOn===null);)jd(n),n.blockedOn===null&&fn.shift()}var ps=nn.ReactCurrentBatchConfig,ji=!0;function gm(e,t,n,s){var i=me,a=ps.transition;ps.transition=null;try{me=1,no(e,t,n,s)}finally{me=i,ps.transition=a}}function vm(e,t,n,s){var i=me,a=ps.transition;ps.transition=null;try{me=4,no(e,t,n,s)}finally{me=i,ps.transition=a}}function no(e,t,n,s){if(ji){var i=al(e,t,n,s);if(i===null)_a(e,t,s,Ni,n),mc(e,s);else if(pm(i,e,t,n,s))s.stopPropagation();else if(mc(e,s),t&4&&-1<fm.indexOf(e)){for(;i!==null;){var a=Sr(i);if(a!==null&&gd(a),a=al(e,t,n,s),a===null&&_a(e,t,s,Ni,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else _a(e,t,s,null,n)}}var Ni=null;function al(e,t,n,s){if(Ni=null,e=Jl(s),e=Mn(e),e!==null)if(t=Qn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=od(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ni=e,null}function Nd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rm()){case Zl:return 1;case hd:return 4;case yi:case im:return 16;case fd:return 536870912;default:return 16}default:return 16}}var mn=null,so=null,ni=null;function wd(){if(ni)return ni;var e,t=so,n=t.length,s,i="value"in mn?mn.value:mn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===i[a-s];s++);return ni=i.slice(e,1<s?1-s:void 0)}function si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ur(){return!0}function vc(){return!1}function yt(e){function t(n,s,i,a,l){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ur:vc,this.isPropagationStopped=vc,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),t}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=yt(Ss),kr=Ce({},Ss,{view:0,detail:0}),ym=yt(kr),pa,ma,Us,Vi=Ce({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:io,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Us&&(Us&&e.type==="mousemove"?(pa=e.screenX-Us.screenX,ma=e.screenY-Us.screenY):ma=pa=0,Us=e),pa)},movementY:function(e){return"movementY"in e?e.movementY:ma}}),yc=yt(Vi),xm=Ce({},Vi,{dataTransfer:0}),jm=yt(xm),Nm=Ce({},kr,{relatedTarget:0}),ga=yt(Nm),wm=Ce({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),_m=yt(wm),km=Ce({},Ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sm=yt(km),Em=Ce({},Ss,{data:0}),xc=yt(Em),Cm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tm[e])?!!t[e]:!1}function io(){return Lm}var Am=Ce({},kr,{key:function(e){if(e.key){var t=Cm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:io,charCode:function(e){return e.type==="keypress"?si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pm=yt(Am),Rm=Ce({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jc=yt(Rm),Om=Ce({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:io}),Mm=yt(Om),Dm=Ce({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),Im=yt(Dm),Bm=Ce({},Vi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zm=yt(Bm),Um=[9,13,27,32],ao=Jt&&"CompositionEvent"in window,Js=null;Jt&&"documentMode"in document&&(Js=document.documentMode);var $m=Jt&&"TextEvent"in window&&!Js,_d=Jt&&(!ao||Js&&8<Js&&11>=Js),Nc=" ",wc=!1;function kd(e,t){switch(e){case"keyup":return Um.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ts=!1;function Vm(e,t){switch(e){case"compositionend":return Sd(t);case"keypress":return t.which!==32?null:(wc=!0,Nc);case"textInput":return e=t.data,e===Nc&&wc?null:e;default:return null}}function Fm(e,t){if(ts)return e==="compositionend"||!ao&&kd(e,t)?(e=wd(),ni=so=mn=null,ts=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _d&&t.locale!=="ko"?null:t.data;default:return null}}var Wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wm[e.type]:t==="textarea"}function Ed(e,t,n,s){sd(s),t=wi(t,"onChange"),0<t.length&&(n=new ro("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Zs=null,dr=null;function Hm(e){Id(e,0)}function Fi(e){var t=rs(e);if(Ku(t))return e}function Qm(e,t){if(e==="change")return t}var Cd=!1;if(Jt){var va;if(Jt){var ya="oninput"in document;if(!ya){var kc=document.createElement("div");kc.setAttribute("oninput","return;"),ya=typeof kc.oninput=="function"}va=ya}else va=!1;Cd=va&&(!document.documentMode||9<document.documentMode)}function Sc(){Zs&&(Zs.detachEvent("onpropertychange",bd),dr=Zs=null)}function bd(e){if(e.propertyName==="value"&&Fi(dr)){var t=[];Ed(t,dr,e,Jl(e)),ld(Hm,t)}}function qm(e,t,n){e==="focusin"?(Sc(),Zs=t,dr=n,Zs.attachEvent("onpropertychange",bd)):e==="focusout"&&Sc()}function Gm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fi(dr)}function Ym(e,t){if(e==="click")return Fi(t)}function Km(e,t){if(e==="input"||e==="change")return Fi(t)}function Xm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mt=typeof Object.is=="function"?Object.is:Xm;function hr(e,t){if(Mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Va.call(t,i)||!Mt(e[i],t[i]))return!1}return!0}function Ec(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cc(e,t){var n=Ec(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ec(n)}}function Td(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Td(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ld(){for(var e=window,t=mi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=mi(e.document)}return t}function lo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jm(e){var t=Ld(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Td(n.ownerDocument.documentElement,n)){if(s!==null&&lo(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=Cc(n,a);var l=Cc(n,s);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Zm=Jt&&"documentMode"in document&&11>=document.documentMode,ns=null,ll=null,er=null,ol=!1;function bc(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ol||ns==null||ns!==mi(s)||(s=ns,"selectionStart"in s&&lo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),er&&hr(er,s)||(er=s,s=wi(ll,"onSelect"),0<s.length&&(t=new ro("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ns)))}function $r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ss={animationend:$r("Animation","AnimationEnd"),animationiteration:$r("Animation","AnimationIteration"),animationstart:$r("Animation","AnimationStart"),transitionend:$r("Transition","TransitionEnd")},xa={},Ad={};Jt&&(Ad=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function Wi(e){if(xa[e])return xa[e];if(!ss[e])return e;var t=ss[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ad)return xa[e]=t[n];return e}var Pd=Wi("animationend"),Rd=Wi("animationiteration"),Od=Wi("animationstart"),Md=Wi("transitionend"),Dd=new Map,Tc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bn(e,t){Dd.set(e,t),Hn(t,[e])}for(var ja=0;ja<Tc.length;ja++){var Na=Tc[ja],eg=Na.toLowerCase(),tg=Na[0].toUpperCase()+Na.slice(1);bn(eg,"on"+tg)}bn(Pd,"onAnimationEnd");bn(Rd,"onAnimationIteration");bn(Od,"onAnimationStart");bn("dblclick","onDoubleClick");bn("focusin","onFocus");bn("focusout","onBlur");bn(Md,"onTransitionEnd");vs("onMouseEnter",["mouseout","mouseover"]);vs("onMouseLeave",["mouseout","mouseover"]);vs("onPointerEnter",["pointerout","pointerover"]);vs("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ng=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gs));function Lc(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,em(s,t,void 0,e),e.currentTarget=null}function Id(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;Lc(i,o,d),a=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;Lc(i,o,d),a=c}}}if(vi)throw e=sl,vi=!1,sl=null,e}function Ne(e,t){var n=t[fl];n===void 0&&(n=t[fl]=new Set);var s=e+"__bubble";n.has(s)||(Bd(t,e,2,!1),n.add(s))}function wa(e,t,n){var s=0;t&&(s|=4),Bd(n,e,s,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function fr(e){if(!e[Vr]){e[Vr]=!0,Hu.forEach(function(n){n!=="selectionchange"&&(ng.has(n)||wa(n,!1,e),wa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vr]||(t[Vr]=!0,wa("selectionchange",!1,t))}}function Bd(e,t,n,s){switch(Nd(t)){case 1:var i=gm;break;case 4:i=vm;break;default:i=no}n=i.bind(null,t,n,e),i=void 0,!nl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function _a(e,t,n,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=Mn(o),l===null)return;if(c=l.tag,c===5||c===6){s=a=l;continue e}o=o.parentNode}}s=s.return}ld(function(){var d=a,x=Jl(n),p=[];e:{var y=Dd.get(e);if(y!==void 0){var L=ro,m=e;switch(e){case"keypress":if(si(n)===0)break e;case"keydown":case"keyup":L=Pm;break;case"focusin":m="focus",L=ga;break;case"focusout":m="blur",L=ga;break;case"beforeblur":case"afterblur":L=ga;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=jm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=Mm;break;case Pd:case Rd:case Od:L=_m;break;case Md:L=Im;break;case"scroll":L=ym;break;case"wheel":L=zm;break;case"copy":case"cut":case"paste":L=Sm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=jc}var T=(t&4)!==0,N=!T&&e==="scroll",u=T?y!==null?y+"Capture":null:y;T=[];for(var f=d,g;f!==null;){g=f;var j=g.stateNode;if(g.tag===5&&j!==null&&(g=j,u!==null&&(j=lr(f,u),j!=null&&T.push(pr(f,j,g)))),N)break;f=f.return}0<T.length&&(y=new L(y,m,null,n,x),p.push({event:y,listeners:T}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",y&&n!==el&&(m=n.relatedTarget||n.fromElement)&&(Mn(m)||m[Zt]))break e;if((L||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,L?(m=n.relatedTarget||n.toElement,L=d,m=m?Mn(m):null,m!==null&&(N=Qn(m),m!==N||m.tag!==5&&m.tag!==6)&&(m=null)):(L=null,m=d),L!==m)){if(T=yc,j="onMouseLeave",u="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(T=jc,j="onPointerLeave",u="onPointerEnter",f="pointer"),N=L==null?y:rs(L),g=m==null?y:rs(m),y=new T(j,f+"leave",L,n,x),y.target=N,y.relatedTarget=g,j=null,Mn(x)===d&&(T=new T(u,f+"enter",m,n,x),T.target=g,T.relatedTarget=N,j=T),N=j,L&&m)t:{for(T=L,u=m,f=0,g=T;g;g=Kn(g))f++;for(g=0,j=u;j;j=Kn(j))g++;for(;0<f-g;)T=Kn(T),f--;for(;0<g-f;)u=Kn(u),g--;for(;f--;){if(T===u||u!==null&&T===u.alternate)break t;T=Kn(T),u=Kn(u)}T=null}else T=null;L!==null&&Ac(p,y,L,T,!1),m!==null&&N!==null&&Ac(p,N,m,T,!0)}}e:{if(y=d?rs(d):window,L=y.nodeName&&y.nodeName.toLowerCase(),L==="select"||L==="input"&&y.type==="file")var A=Qm;else if(_c(y))if(Cd)A=Km;else{A=Gm;var w=qm}else(L=y.nodeName)&&L.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(A=Ym);if(A&&(A=A(e,d))){Ed(p,A,n,x);break e}w&&w(e,y,d),e==="focusout"&&(w=y._wrapperState)&&w.controlled&&y.type==="number"&&Ya(y,"number",y.value)}switch(w=d?rs(d):window,e){case"focusin":(_c(w)||w.contentEditable==="true")&&(ns=w,ll=d,er=null);break;case"focusout":er=ll=ns=null;break;case"mousedown":ol=!0;break;case"contextmenu":case"mouseup":case"dragend":ol=!1,bc(p,n,x);break;case"selectionchange":if(Zm)break;case"keydown":case"keyup":bc(p,n,x)}var P;if(ao)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ts?kd(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(_d&&n.locale!=="ko"&&(ts||C!=="onCompositionStart"?C==="onCompositionEnd"&&ts&&(P=wd()):(mn=x,so="value"in mn?mn.value:mn.textContent,ts=!0)),w=wi(d,C),0<w.length&&(C=new xc(C,e,null,n,x),p.push({event:C,listeners:w}),P?C.data=P:(P=Sd(n),P!==null&&(C.data=P)))),(P=$m?Vm(e,n):Fm(e,n))&&(d=wi(d,"onBeforeInput"),0<d.length&&(x=new xc("onBeforeInput","beforeinput",null,n,x),p.push({event:x,listeners:d}),x.data=P))}Id(p,t)})}function pr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wi(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=lr(e,n),a!=null&&s.unshift(pr(e,a,i)),a=lr(e,t),a!=null&&s.push(pr(e,a,i))),e=e.return}return s}function Kn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ac(e,t,n,s,i){for(var a=t._reactName,l=[];n!==null&&n!==s;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,i?(c=lr(n,a),c!=null&&l.unshift(pr(n,c,o))):i||(c=lr(n,a),c!=null&&l.push(pr(n,c,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var sg=/\r\n?/g,rg=/\u0000|\uFFFD/g;function Pc(e){return(typeof e=="string"?e:""+e).replace(sg,`
`).replace(rg,"")}function Fr(e,t,n){if(t=Pc(t),Pc(e)!==t&&n)throw Error(M(425))}function _i(){}var cl=null,ul=null;function dl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hl=typeof setTimeout=="function"?setTimeout:void 0,ig=typeof clearTimeout=="function"?clearTimeout:void 0,Rc=typeof Promise=="function"?Promise:void 0,ag=typeof queueMicrotask=="function"?queueMicrotask:typeof Rc<"u"?function(e){return Rc.resolve(null).then(e).catch(lg)}:hl;function lg(e){setTimeout(function(){throw e})}function ka(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){e.removeChild(i),ur(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);ur(t)}function jn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Oc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Es=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Es,mr="__reactProps$"+Es,Zt="__reactContainer$"+Es,fl="__reactEvents$"+Es,og="__reactListeners$"+Es,cg="__reactHandles$"+Es;function Mn(e){var t=e[Ut];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zt]||n[Ut]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Oc(e);e!==null;){if(n=e[Ut])return n;e=Oc(e)}return t}e=n,n=e.parentNode}return null}function Sr(e){return e=e[Ut]||e[Zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Hi(e){return e[mr]||null}var pl=[],is=-1;function Tn(e){return{current:e}}function we(e){0>is||(e.current=pl[is],pl[is]=null,is--)}function xe(e,t){is++,pl[is]=e.current,e.current=t}var Cn={},Je=Tn(Cn),ct=Tn(!1),Un=Cn;function ys(e,t){var n=e.type.contextTypes;if(!n)return Cn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ut(e){return e=e.childContextTypes,e!=null}function ki(){we(ct),we(Je)}function Mc(e,t,n){if(Je.current!==Cn)throw Error(M(168));xe(Je,t),xe(ct,n)}function zd(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(M(108,qp(e)||"Unknown",i));return Ce({},n,s)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,Un=Je.current,xe(Je,e),xe(ct,ct.current),!0}function Dc(e,t,n){var s=e.stateNode;if(!s)throw Error(M(169));n?(e=zd(e,t,Un),s.__reactInternalMemoizedMergedChildContext=e,we(ct),we(Je),xe(Je,e)):we(ct),xe(ct,n)}var qt=null,Qi=!1,Sa=!1;function Ud(e){qt===null?qt=[e]:qt.push(e)}function ug(e){Qi=!0,Ud(e)}function Ln(){if(!Sa&&qt!==null){Sa=!0;var e=0,t=me;try{var n=qt;for(me=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}qt=null,Qi=!1}catch(i){throw qt!==null&&(qt=qt.slice(e+1)),dd(Zl,Ln),i}finally{me=t,Sa=!1}}return null}var as=[],ls=0,Ei=null,Ci=0,jt=[],Nt=0,$n=null,Yt=1,Kt="";function Rn(e,t){as[ls++]=Ci,as[ls++]=Ei,Ei=e,Ci=t}function $d(e,t,n){jt[Nt++]=Yt,jt[Nt++]=Kt,jt[Nt++]=$n,$n=e;var s=Yt;e=Kt;var i=32-Rt(s)-1;s&=~(1<<i),n+=1;var a=32-Rt(t)+i;if(30<a){var l=i-i%5;a=(s&(1<<l)-1).toString(32),s>>=l,i-=l,Yt=1<<32-Rt(t)+i|n<<i|s,Kt=a+e}else Yt=1<<a|n<<i|s,Kt=e}function oo(e){e.return!==null&&(Rn(e,1),$d(e,1,0))}function co(e){for(;e===Ei;)Ei=as[--ls],as[ls]=null,Ci=as[--ls],as[ls]=null;for(;e===$n;)$n=jt[--Nt],jt[Nt]=null,Kt=jt[--Nt],jt[Nt]=null,Yt=jt[--Nt],jt[Nt]=null}var mt=null,pt=null,ke=!1,Pt=null;function Vd(e,t){var n=_t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ic(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mt=e,pt=jn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mt=e,pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$n!==null?{id:Yt,overflow:Kt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,mt=e,pt=null,!0):!1;default:return!1}}function ml(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gl(e){if(ke){var t=pt;if(t){var n=t;if(!Ic(e,t)){if(ml(e))throw Error(M(418));t=jn(n.nextSibling);var s=mt;t&&Ic(e,t)?Vd(s,n):(e.flags=e.flags&-4097|2,ke=!1,mt=e)}}else{if(ml(e))throw Error(M(418));e.flags=e.flags&-4097|2,ke=!1,mt=e}}}function Bc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mt=e}function Wr(e){if(e!==mt)return!1;if(!ke)return Bc(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dl(e.type,e.memoizedProps)),t&&(t=pt)){if(ml(e))throw Fd(),Error(M(418));for(;t;)Vd(e,t),t=jn(t.nextSibling)}if(Bc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pt=jn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pt=null}}else pt=mt?jn(e.stateNode.nextSibling):null;return!0}function Fd(){for(var e=pt;e;)e=jn(e.nextSibling)}function xs(){pt=mt=null,ke=!1}function uo(e){Pt===null?Pt=[e]:Pt.push(e)}var dg=nn.ReactCurrentBatchConfig;function $s(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var s=n.stateNode}if(!s)throw Error(M(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function Hr(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zc(e){var t=e._init;return t(e._payload)}function Wd(e){function t(u,f){if(e){var g=u.deletions;g===null?(u.deletions=[f],u.flags|=16):g.push(f)}}function n(u,f){if(!e)return null;for(;f!==null;)t(u,f),f=f.sibling;return null}function s(u,f){for(u=new Map;f!==null;)f.key!==null?u.set(f.key,f):u.set(f.index,f),f=f.sibling;return u}function i(u,f){return u=kn(u,f),u.index=0,u.sibling=null,u}function a(u,f,g){return u.index=g,e?(g=u.alternate,g!==null?(g=g.index,g<f?(u.flags|=2,f):g):(u.flags|=2,f)):(u.flags|=1048576,f)}function l(u){return e&&u.alternate===null&&(u.flags|=2),u}function o(u,f,g,j){return f===null||f.tag!==6?(f=Pa(g,u.mode,j),f.return=u,f):(f=i(f,g),f.return=u,f)}function c(u,f,g,j){var A=g.type;return A===es?x(u,f,g.props.children,j,g.key):f!==null&&(f.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===dn&&zc(A)===f.type)?(j=i(f,g.props),j.ref=$s(u,f,g),j.return=u,j):(j=ui(g.type,g.key,g.props,null,u.mode,j),j.ref=$s(u,f,g),j.return=u,j)}function d(u,f,g,j){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Ra(g,u.mode,j),f.return=u,f):(f=i(f,g.children||[]),f.return=u,f)}function x(u,f,g,j,A){return f===null||f.tag!==7?(f=zn(g,u.mode,j,A),f.return=u,f):(f=i(f,g),f.return=u,f)}function p(u,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Pa(""+f,u.mode,g),f.return=u,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Or:return g=ui(f.type,f.key,f.props,null,u.mode,g),g.ref=$s(u,null,f),g.return=u,g;case Zn:return f=Ra(f,u.mode,g),f.return=u,f;case dn:var j=f._init;return p(u,j(f._payload),g)}if(Qs(f)||Ds(f))return f=zn(f,u.mode,g,null),f.return=u,f;Hr(u,f)}return null}function y(u,f,g,j){var A=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return A!==null?null:o(u,f,""+g,j);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Or:return g.key===A?c(u,f,g,j):null;case Zn:return g.key===A?d(u,f,g,j):null;case dn:return A=g._init,y(u,f,A(g._payload),j)}if(Qs(g)||Ds(g))return A!==null?null:x(u,f,g,j,null);Hr(u,g)}return null}function L(u,f,g,j,A){if(typeof j=="string"&&j!==""||typeof j=="number")return u=u.get(g)||null,o(f,u,""+j,A);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Or:return u=u.get(j.key===null?g:j.key)||null,c(f,u,j,A);case Zn:return u=u.get(j.key===null?g:j.key)||null,d(f,u,j,A);case dn:var w=j._init;return L(u,f,g,w(j._payload),A)}if(Qs(j)||Ds(j))return u=u.get(g)||null,x(f,u,j,A,null);Hr(f,j)}return null}function m(u,f,g,j){for(var A=null,w=null,P=f,C=f=0,B=null;P!==null&&C<g.length;C++){P.index>C?(B=P,P=null):B=P.sibling;var V=y(u,P,g[C],j);if(V===null){P===null&&(P=B);break}e&&P&&V.alternate===null&&t(u,P),f=a(V,f,C),w===null?A=V:w.sibling=V,w=V,P=B}if(C===g.length)return n(u,P),ke&&Rn(u,C),A;if(P===null){for(;C<g.length;C++)P=p(u,g[C],j),P!==null&&(f=a(P,f,C),w===null?A=P:w.sibling=P,w=P);return ke&&Rn(u,C),A}for(P=s(u,P);C<g.length;C++)B=L(P,u,C,g[C],j),B!==null&&(e&&B.alternate!==null&&P.delete(B.key===null?C:B.key),f=a(B,f,C),w===null?A=B:w.sibling=B,w=B);return e&&P.forEach(function(q){return t(u,q)}),ke&&Rn(u,C),A}function T(u,f,g,j){var A=Ds(g);if(typeof A!="function")throw Error(M(150));if(g=A.call(g),g==null)throw Error(M(151));for(var w=A=null,P=f,C=f=0,B=null,V=g.next();P!==null&&!V.done;C++,V=g.next()){P.index>C?(B=P,P=null):B=P.sibling;var q=y(u,P,V.value,j);if(q===null){P===null&&(P=B);break}e&&P&&q.alternate===null&&t(u,P),f=a(q,f,C),w===null?A=q:w.sibling=q,w=q,P=B}if(V.done)return n(u,P),ke&&Rn(u,C),A;if(P===null){for(;!V.done;C++,V=g.next())V=p(u,V.value,j),V!==null&&(f=a(V,f,C),w===null?A=V:w.sibling=V,w=V);return ke&&Rn(u,C),A}for(P=s(u,P);!V.done;C++,V=g.next())V=L(P,u,C,V.value,j),V!==null&&(e&&V.alternate!==null&&P.delete(V.key===null?C:V.key),f=a(V,f,C),w===null?A=V:w.sibling=V,w=V);return e&&P.forEach(function(ie){return t(u,ie)}),ke&&Rn(u,C),A}function N(u,f,g,j){if(typeof g=="object"&&g!==null&&g.type===es&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Or:e:{for(var A=g.key,w=f;w!==null;){if(w.key===A){if(A=g.type,A===es){if(w.tag===7){n(u,w.sibling),f=i(w,g.props.children),f.return=u,u=f;break e}}else if(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===dn&&zc(A)===w.type){n(u,w.sibling),f=i(w,g.props),f.ref=$s(u,w,g),f.return=u,u=f;break e}n(u,w);break}else t(u,w);w=w.sibling}g.type===es?(f=zn(g.props.children,u.mode,j,g.key),f.return=u,u=f):(j=ui(g.type,g.key,g.props,null,u.mode,j),j.ref=$s(u,f,g),j.return=u,u=j)}return l(u);case Zn:e:{for(w=g.key;f!==null;){if(f.key===w)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(u,f.sibling),f=i(f,g.children||[]),f.return=u,u=f;break e}else{n(u,f);break}else t(u,f);f=f.sibling}f=Ra(g,u.mode,j),f.return=u,u=f}return l(u);case dn:return w=g._init,N(u,f,w(g._payload),j)}if(Qs(g))return m(u,f,g,j);if(Ds(g))return T(u,f,g,j);Hr(u,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(u,f.sibling),f=i(f,g),f.return=u,u=f):(n(u,f),f=Pa(g,u.mode,j),f.return=u,u=f),l(u)):n(u,f)}return N}var js=Wd(!0),Hd=Wd(!1),bi=Tn(null),Ti=null,os=null,ho=null;function fo(){ho=os=Ti=null}function po(e){var t=bi.current;we(bi),e._currentValue=t}function vl(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ms(e,t){Ti=e,ho=os=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ot=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(ho!==e)if(e={context:e,memoizedValue:t,next:null},os===null){if(Ti===null)throw Error(M(308));os=e,Ti.dependencies={lanes:0,firstContext:e}}else os=os.next=e;return t}var Dn=null;function mo(e){Dn===null?Dn=[e]:Dn.push(e)}function Qd(e,t,n,s){var i=t.interleaved;return i===null?(n.next=n,mo(t)):(n.next=i.next,i.next=n),t.interleaved=n,en(e,s)}function en(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var hn=!1;function go(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,de&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,en(e,n)}return i=s.interleaved,i===null?(t.next=t,mo(s)):(t.next=i.next,i.next=t),s.interleaved=t,en(e,n)}function ri(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,eo(e,n)}}function Uc(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Li(e,t,n,s){var i=e.updateQueue;hn=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?a=d:l.next=d,l=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==l&&(o===null?x.firstBaseUpdate=d:o.next=d,x.lastBaseUpdate=c))}if(a!==null){var p=i.baseState;l=0,x=d=c=null,o=a;do{var y=o.lane,L=o.eventTime;if((s&y)===y){x!==null&&(x=x.next={eventTime:L,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,T=o;switch(y=t,L=n,T.tag){case 1:if(m=T.payload,typeof m=="function"){p=m.call(L,p,y);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,y=typeof m=="function"?m.call(L,p,y):m,y==null)break e;p=Ce({},p,y);break e;case 2:hn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,y=i.effects,y===null?i.effects=[o]:y.push(o))}else L={eventTime:L,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(d=x=L,c=p):x=x.next=L,l|=y;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;y=o,o=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(x===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=x,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Fn|=l,e.lanes=l,e.memoizedState=p}}function $c(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(M(191,i));i.call(s)}}}var Er={},Vt=Tn(Er),gr=Tn(Er),vr=Tn(Er);function In(e){if(e===Er)throw Error(M(174));return e}function vo(e,t){switch(xe(vr,t),xe(gr,e),xe(Vt,Er),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xa(t,e)}we(Vt),xe(Vt,t)}function Ns(){we(Vt),we(gr),we(vr)}function Gd(e){In(vr.current);var t=In(Vt.current),n=Xa(t,e.type);t!==n&&(xe(gr,e),xe(Vt,n))}function yo(e){gr.current===e&&(we(Vt),we(gr))}var Se=Tn(0);function Ai(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ea=[];function xo(){for(var e=0;e<Ea.length;e++)Ea[e]._workInProgressVersionPrimary=null;Ea.length=0}var ii=nn.ReactCurrentDispatcher,Ca=nn.ReactCurrentBatchConfig,Vn=0,Ee=null,Me=null,Be=null,Pi=!1,tr=!1,yr=0,hg=0;function Ye(){throw Error(M(321))}function jo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mt(e[n],t[n]))return!1;return!0}function No(e,t,n,s,i,a){if(Vn=a,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ii.current=e===null||e.memoizedState===null?gg:vg,e=n(s,i),tr){a=0;do{if(tr=!1,yr=0,25<=a)throw Error(M(301));a+=1,Be=Me=null,t.updateQueue=null,ii.current=yg,e=n(s,i)}while(tr)}if(ii.current=Ri,t=Me!==null&&Me.next!==null,Vn=0,Be=Me=Ee=null,Pi=!1,t)throw Error(M(300));return e}function wo(){var e=yr!==0;return yr=0,e}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ee.memoizedState=Be=e:Be=Be.next=e,Be}function Et(){if(Me===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=Be===null?Ee.memoizedState:Be.next;if(t!==null)Be=t,Me=e;else{if(e===null)throw Error(M(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Be===null?Ee.memoizedState=Be=e:Be=Be.next=e}return Be}function xr(e,t){return typeof t=="function"?t(e):t}function ba(e){var t=Et(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var s=Me,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var o=l=null,c=null,d=a;do{var x=d.lane;if((Vn&x)===x)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var p={lane:x,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=p,l=s):c=c.next=p,Ee.lanes|=x,Fn|=x}d=d.next}while(d!==null&&d!==a);c===null?l=s:c.next=o,Mt(s,t.memoizedState)||(ot=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Ee.lanes|=a,Fn|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ta(e){var t=Et(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);Mt(a,t.memoizedState)||(ot=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function Yd(){}function Kd(e,t){var n=Ee,s=Et(),i=t(),a=!Mt(s.memoizedState,i);if(a&&(s.memoizedState=i,ot=!0),s=s.queue,_o(Zd.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,jr(9,Jd.bind(null,n,s,i,t),void 0,null),ze===null)throw Error(M(349));Vn&30||Xd(n,t,i)}return i}function Xd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jd(e,t,n,s){t.value=n,t.getSnapshot=s,eh(t)&&th(e)}function Zd(e,t,n){return n(function(){eh(t)&&th(e)})}function eh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mt(e,n)}catch{return!0}}function th(e){var t=en(e,1);t!==null&&Ot(t,e,1,-1)}function Vc(e){var t=zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:e},t.queue=e,e=e.dispatch=mg.bind(null,Ee,e),[t.memoizedState,e]}function jr(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function nh(){return Et().memoizedState}function ai(e,t,n,s){var i=zt();Ee.flags|=e,i.memoizedState=jr(1|t,n,void 0,s===void 0?null:s)}function qi(e,t,n,s){var i=Et();s=s===void 0?null:s;var a=void 0;if(Me!==null){var l=Me.memoizedState;if(a=l.destroy,s!==null&&jo(s,l.deps)){i.memoizedState=jr(t,n,a,s);return}}Ee.flags|=e,i.memoizedState=jr(1|t,n,a,s)}function Fc(e,t){return ai(8390656,8,e,t)}function _o(e,t){return qi(2048,8,e,t)}function sh(e,t){return qi(4,2,e,t)}function rh(e,t){return qi(4,4,e,t)}function ih(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ah(e,t,n){return n=n!=null?n.concat([e]):null,qi(4,4,ih.bind(null,t,e),n)}function ko(){}function lh(e,t){var n=Et();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&jo(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function oh(e,t){var n=Et();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&jo(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function ch(e,t,n){return Vn&21?(Mt(n,t)||(n=pd(),Ee.lanes|=n,Fn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=n)}function fg(e,t){var n=me;me=n!==0&&4>n?n:4,e(!0);var s=Ca.transition;Ca.transition={};try{e(!1),t()}finally{me=n,Ca.transition=s}}function uh(){return Et().memoizedState}function pg(e,t,n){var s=_n(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},dh(e))hh(t,n);else if(n=Qd(e,t,n,s),n!==null){var i=st();Ot(n,e,s,i),fh(n,t,s)}}function mg(e,t,n){var s=_n(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(dh(e))hh(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,n);if(i.hasEagerState=!0,i.eagerState=o,Mt(o,l)){var c=t.interleaved;c===null?(i.next=i,mo(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=Qd(e,t,i,s),n!==null&&(i=st(),Ot(n,e,s,i),fh(n,t,s))}}function dh(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function hh(e,t){tr=Pi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fh(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,eo(e,n)}}var Ri={readContext:St,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},gg={readContext:St,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Fc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ai(4194308,4,ih.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return ai(4,2,e,t)},useMemo:function(e,t){var n=zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=zt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=pg.bind(null,Ee,e),[s.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:Vc,useDebugValue:ko,useDeferredValue:function(e){return zt().memoizedState=e},useTransition:function(){var e=Vc(!1),t=e[0];return e=fg.bind(null,e[1]),zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ee,i=zt();if(ke){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),ze===null)throw Error(M(349));Vn&30||Xd(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Fc(Zd.bind(null,s,a,e),[e]),s.flags|=2048,jr(9,Jd.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=zt(),t=ze.identifierPrefix;if(ke){var n=Kt,s=Yt;n=(s&~(1<<32-Rt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=yr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=hg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vg={readContext:St,useCallback:lh,useContext:St,useEffect:_o,useImperativeHandle:ah,useInsertionEffect:sh,useLayoutEffect:rh,useMemo:oh,useReducer:ba,useRef:nh,useState:function(){return ba(xr)},useDebugValue:ko,useDeferredValue:function(e){var t=Et();return ch(t,Me.memoizedState,e)},useTransition:function(){var e=ba(xr)[0],t=Et().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:Kd,useId:uh,unstable_isNewReconciler:!1},yg={readContext:St,useCallback:lh,useContext:St,useEffect:_o,useImperativeHandle:ah,useInsertionEffect:sh,useLayoutEffect:rh,useMemo:oh,useReducer:Ta,useRef:nh,useState:function(){return Ta(xr)},useDebugValue:ko,useDeferredValue:function(e){var t=Et();return Me===null?t.memoizedState=e:ch(t,Me.memoizedState,e)},useTransition:function(){var e=Ta(xr)[0],t=Et().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:Kd,useId:uh,unstable_isNewReconciler:!1};function Tt(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function yl(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Gi={isMounted:function(e){return(e=e._reactInternals)?Qn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=st(),i=_n(e),a=Xt(s,i);a.payload=t,n!=null&&(a.callback=n),t=Nn(e,a,i),t!==null&&(Ot(t,e,i,s),ri(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=st(),i=_n(e),a=Xt(s,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Nn(e,a,i),t!==null&&(Ot(t,e,i,s),ri(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=st(),s=_n(e),i=Xt(n,s);i.tag=2,t!=null&&(i.callback=t),t=Nn(e,i,s),t!==null&&(Ot(t,e,s,n),ri(t,e,s))}};function Wc(e,t,n,s,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,l):t.prototype&&t.prototype.isPureReactComponent?!hr(n,s)||!hr(i,a):!0}function ph(e,t,n){var s=!1,i=Cn,a=t.contextType;return typeof a=="object"&&a!==null?a=St(a):(i=ut(t)?Un:Je.current,s=t.contextTypes,a=(s=s!=null)?ys(e,i):Cn),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gi,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Hc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Gi.enqueueReplaceState(t,t.state,null)}function xl(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},go(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=St(a):(a=ut(t)?Un:Je.current,i.context=ys(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(yl(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Gi.enqueueReplaceState(i,i.state,null),Li(e,n,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ws(e,t){try{var n="",s=t;do n+=Qp(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function La(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function jl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var xg=typeof WeakMap=="function"?WeakMap:Map;function mh(e,t,n){n=Xt(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Mi||(Mi=!0,Ll=s),jl(e,t)},n}function gh(e,t,n){n=Xt(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){jl(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){jl(e,t),typeof s!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Qc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new xg;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=Rg.bind(null,e,t,n),t.then(e,e))}function qc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Gc(e,t,n,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xt(-1,1),t.tag=2,Nn(n,t,1))),n.lanes|=1),e)}var jg=nn.ReactCurrentOwner,ot=!1;function tt(e,t,n,s){t.child=e===null?Hd(t,null,n,s):js(t,e.child,n,s)}function Yc(e,t,n,s,i){n=n.render;var a=t.ref;return ms(t,i),s=No(e,t,n,s,a,i),n=wo(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,tn(e,t,i)):(ke&&n&&oo(t),t.flags|=1,tt(e,t,s,i),t.child)}function Kc(e,t,n,s,i){if(e===null){var a=n.type;return typeof a=="function"&&!Po(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,vh(e,t,a,s,i)):(e=ui(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:hr,n(l,s)&&e.ref===t.ref)return tn(e,t,i)}return t.flags|=1,e=kn(a,s),e.ref=t.ref,e.return=t,t.child=e}function vh(e,t,n,s,i){if(e!==null){var a=e.memoizedProps;if(hr(a,s)&&e.ref===t.ref)if(ot=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(ot=!0);else return t.lanes=e.lanes,tn(e,t,i)}return Nl(e,t,n,s,i)}function yh(e,t,n){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(us,ft),ft|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xe(us,ft),ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,xe(us,ft),ft|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,xe(us,ft),ft|=s;return tt(e,t,i,n),t.child}function xh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Nl(e,t,n,s,i){var a=ut(n)?Un:Je.current;return a=ys(t,a),ms(t,i),n=No(e,t,n,s,a,i),s=wo(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,tn(e,t,i)):(ke&&s&&oo(t),t.flags|=1,tt(e,t,n,i),t.child)}function Xc(e,t,n,s,i){if(ut(n)){var a=!0;Si(t)}else a=!1;if(ms(t,i),t.stateNode===null)li(e,t),ph(t,n,s),xl(t,n,s,i),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=St(d):(d=ut(n)?Un:Je.current,d=ys(t,d));var x=n.getDerivedStateFromProps,p=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&Hc(t,l,s,d),hn=!1;var y=t.memoizedState;l.state=y,Li(t,s,l,i),c=t.memoizedState,o!==s||y!==c||ct.current||hn?(typeof x=="function"&&(yl(t,n,x,s),c=t.memoizedState),(o=hn||Wc(t,n,o,s,y,c,d))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,qd(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Tt(t.type,o),l.props=d,p=t.pendingProps,y=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=St(c):(c=ut(n)?Un:Je.current,c=ys(t,c));var L=n.getDerivedStateFromProps;(x=typeof L=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==p||y!==c)&&Hc(t,l,s,c),hn=!1,y=t.memoizedState,l.state=y,Li(t,s,l,i);var m=t.memoizedState;o!==p||y!==m||ct.current||hn?(typeof L=="function"&&(yl(t,n,L,s),m=t.memoizedState),(d=hn||Wc(t,n,d,s,y,m,c)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,m,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,m,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),l.props=s,l.state=m,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),s=!1)}return wl(e,t,n,s,a,i)}function wl(e,t,n,s,i,a){xh(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return i&&Dc(t,n,!1),tn(e,t,a);s=t.stateNode,jg.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=js(t,e.child,null,a),t.child=js(t,null,o,a)):tt(e,t,o,a),t.memoizedState=s.state,i&&Dc(t,n,!0),t.child}function jh(e){var t=e.stateNode;t.pendingContext?Mc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mc(e,t.context,!1),vo(e,t.containerInfo)}function Jc(e,t,n,s,i){return xs(),uo(i),t.flags|=256,tt(e,t,n,s),t.child}var _l={dehydrated:null,treeContext:null,retryLane:0};function kl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nh(e,t,n){var s=t.pendingProps,i=Se.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),xe(Se,i&1),e===null)return gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Xi(l,s,0,null),e=zn(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=kl(n),t.memoizedState=_l,e):So(t,l));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Ng(e,t,l,s,o,i,n);if(a){a=s.fallback,l=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=kn(i,c),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=kn(o,a):(a=zn(a,l,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=e.child.memoizedState,l=l===null?kl(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=_l,s}return a=e.child,e=a.sibling,s=kn(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function So(e,t){return t=Xi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qr(e,t,n,s){return s!==null&&uo(s),js(t,e.child,null,n),e=So(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ng(e,t,n,s,i,a,l){if(n)return t.flags&256?(t.flags&=-257,s=La(Error(M(422))),Qr(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=Xi({mode:"visible",children:s.children},i,0,null),a=zn(a,i,l,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&js(t,e.child,null,l),t.child.memoizedState=kl(l),t.memoizedState=_l,a);if(!(t.mode&1))return Qr(e,t,l,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(M(419)),s=La(a,s,void 0),Qr(e,t,l,s)}if(o=(l&e.childLanes)!==0,ot||o){if(s=ze,s!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,en(e,i),Ot(s,e,i,-1))}return Ao(),s=La(Error(M(421))),Qr(e,t,l,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Og.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,pt=jn(i.nextSibling),mt=t,ke=!0,Pt=null,e!==null&&(jt[Nt++]=Yt,jt[Nt++]=Kt,jt[Nt++]=$n,Yt=e.id,Kt=e.overflow,$n=t),t=So(t,s.children),t.flags|=4096,t)}function Zc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),vl(e.return,t,n)}function Aa(e,t,n,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function wh(e,t,n){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(tt(e,t,s.children,n),s=Se.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zc(e,n,t);else if(e.tag===19)Zc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(xe(Se,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ai(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Aa(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ai(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Aa(t,!0,n,null,a);break;case"together":Aa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function li(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function wg(e,t,n){switch(t.tag){case 3:jh(t),xs();break;case 5:Gd(t);break;case 1:ut(t.type)&&Si(t);break;case 4:vo(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;xe(bi,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(xe(Se,Se.current&1),t.flags|=128,null):n&t.child.childLanes?Nh(e,t,n):(xe(Se,Se.current&1),e=tn(e,t,n),e!==null?e.sibling:null);xe(Se,Se.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return wh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(Se,Se.current),s)break;return null;case 22:case 23:return t.lanes=0,yh(e,t,n)}return tn(e,t,n)}var _h,Sl,kh,Sh;_h=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sl=function(){};kh=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,In(Vt.current);var a=null;switch(n){case"input":i=qa(e,i),s=qa(e,s),a=[];break;case"select":i=Ce({},i,{value:void 0}),s=Ce({},s,{value:void 0}),a=[];break;case"textarea":i=Ka(e,i),s=Ka(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=_i)}Ja(n,s);var l;n=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ir.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(o=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ir.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ne("scroll",e),a||o===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Sh=function(e,t,n,s){n!==s&&(t.flags|=4)};function Vs(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function _g(e,t,n){var s=t.pendingProps;switch(co(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return ut(t.type)&&ki(),Ke(t),null;case 3:return s=t.stateNode,Ns(),we(ct),we(Je),xo(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Wr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pt!==null&&(Rl(Pt),Pt=null))),Sl(e,t),Ke(t),null;case 5:yo(t);var i=In(vr.current);if(n=t.type,e!==null&&t.stateNode!=null)kh(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(M(166));return Ke(t),null}if(e=In(Vt.current),Wr(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[Ut]=t,s[mr]=a,e=(t.mode&1)!==0,n){case"dialog":Ne("cancel",s),Ne("close",s);break;case"iframe":case"object":case"embed":Ne("load",s);break;case"video":case"audio":for(i=0;i<Gs.length;i++)Ne(Gs[i],s);break;case"source":Ne("error",s);break;case"img":case"image":case"link":Ne("error",s),Ne("load",s);break;case"details":Ne("toggle",s);break;case"input":oc(s,a),Ne("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ne("invalid",s);break;case"textarea":uc(s,a),Ne("invalid",s)}Ja(n,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&Fr(s.textContent,o,e),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Fr(s.textContent,o,e),i=["children",""+o]):ir.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ne("scroll",s)}switch(n){case"input":Mr(s),cc(s,a,!0);break;case"textarea":Mr(s),dc(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=_i)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[Ut]=t,e[mr]=s,_h(e,t,!1,!1),t.stateNode=e;e:{switch(l=Za(n,s),n){case"dialog":Ne("cancel",e),Ne("close",e),i=s;break;case"iframe":case"object":case"embed":Ne("load",e),i=s;break;case"video":case"audio":for(i=0;i<Gs.length;i++)Ne(Gs[i],e);i=s;break;case"source":Ne("error",e),i=s;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),i=s;break;case"details":Ne("toggle",e),i=s;break;case"input":oc(e,s),i=qa(e,s),Ne("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=Ce({},s,{value:void 0}),Ne("invalid",e);break;case"textarea":uc(e,s),i=Ka(e,s),Ne("invalid",e);break;default:i=s}Ja(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?nd(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ed(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ar(e,c):typeof c=="number"&&ar(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ir.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ne("scroll",e):c!=null&&Gl(e,a,c,l))}switch(n){case"input":Mr(e),cc(e,s,!1);break;case"textarea":Mr(e),dc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+En(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?ds(e,!!s.multiple,a,!1):s.defaultValue!=null&&ds(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=_i)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ke(t),null;case 6:if(e&&t.stateNode!=null)Sh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(M(166));if(n=In(vr.current),In(Vt.current),Wr(t)){if(s=t.stateNode,n=t.memoizedProps,s[Ut]=t,(a=s.nodeValue!==n)&&(e=mt,e!==null))switch(e.tag){case 3:Fr(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fr(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Ut]=t,t.stateNode=s}return Ke(t),null;case 13:if(we(Se),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&pt!==null&&t.mode&1&&!(t.flags&128))Fd(),xs(),t.flags|=98560,a=!1;else if(a=Wr(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(M(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(M(317));a[Ut]=t}else xs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ke(t),a=!1}else Pt!==null&&(Rl(Pt),Pt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Se.current&1?De===0&&(De=3):Ao())),t.updateQueue!==null&&(t.flags|=4),Ke(t),null);case 4:return Ns(),Sl(e,t),e===null&&fr(t.stateNode.containerInfo),Ke(t),null;case 10:return po(t.type._context),Ke(t),null;case 17:return ut(t.type)&&ki(),Ke(t),null;case 19:if(we(Se),a=t.memoizedState,a===null)return Ke(t),null;if(s=(t.flags&128)!==0,l=a.rendering,l===null)if(s)Vs(a,!1);else{if(De!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ai(e),l!==null){for(t.flags|=128,Vs(a,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xe(Se,Se.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ae()>_s&&(t.flags|=128,s=!0,Vs(a,!1),t.lanes=4194304)}else{if(!s)if(e=Ai(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Vs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!ke)return Ke(t),null}else 2*Ae()-a.renderingStartTime>_s&&n!==1073741824&&(t.flags|=128,s=!0,Vs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ae(),t.sibling=null,n=Se.current,xe(Se,s?n&1|2:n&1),t):(Ke(t),null);case 22:case 23:return Lo(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ft&1073741824&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function kg(e,t){switch(co(t),t.tag){case 1:return ut(t.type)&&ki(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ns(),we(ct),we(Je),xo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yo(t),null;case 13:if(we(Se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));xs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(Se),null;case 4:return Ns(),null;case 10:return po(t.type._context),null;case 22:case 23:return Lo(),null;case 24:return null;default:return null}}var qr=!1,Xe=!1,Sg=typeof WeakSet=="function"?WeakSet:Set,W=null;function cs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Le(e,t,s)}else n.current=null}function El(e,t,n){try{n()}catch(s){Le(e,t,s)}}var eu=!1;function Eg(e,t){if(cl=ji,e=Ld(),lo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,d=0,x=0,p=e,y=null;t:for(;;){for(var L;p!==n||i!==0&&p.nodeType!==3||(o=l+i),p!==a||s!==0&&p.nodeType!==3||(c=l+s),p.nodeType===3&&(l+=p.nodeValue.length),(L=p.firstChild)!==null;)y=p,p=L;for(;;){if(p===e)break t;if(y===n&&++d===i&&(o=l),y===a&&++x===s&&(c=l),(L=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=L}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ul={focusedElem:e,selectionRange:n},ji=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,N=m.memoizedState,u=t.stateNode,f=u.getSnapshotBeforeUpdate(t.elementType===t.type?T:Tt(t.type,T),N);u.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(j){Le(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return m=eu,eu=!1,m}function nr(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&El(t,n,a)}i=i.next}while(i!==s)}}function Yi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Cl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Eh(e){var t=e.alternate;t!==null&&(e.alternate=null,Eh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[mr],delete t[fl],delete t[og],delete t[cg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ch(e){return e.tag===5||e.tag===3||e.tag===4}function tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ch(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bl(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_i));else if(s!==4&&(e=e.child,e!==null))for(bl(e,t,n),e=e.sibling;e!==null;)bl(e,t,n),e=e.sibling}function Tl(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Tl(e,t,n),e=e.sibling;e!==null;)Tl(e,t,n),e=e.sibling}var $e=null,Lt=!1;function un(e,t,n){for(n=n.child;n!==null;)bh(e,t,n),n=n.sibling}function bh(e,t,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount($i,n)}catch{}switch(n.tag){case 5:Xe||cs(n,t);case 6:var s=$e,i=Lt;$e=null,un(e,t,n),$e=s,Lt=i,$e!==null&&(Lt?(e=$e,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Lt?(e=$e,n=n.stateNode,e.nodeType===8?ka(e.parentNode,n):e.nodeType===1&&ka(e,n),ur(e)):ka($e,n.stateNode));break;case 4:s=$e,i=Lt,$e=n.stateNode.containerInfo,Lt=!0,un(e,t,n),$e=s,Lt=i;break;case 0:case 11:case 14:case 15:if(!Xe&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&El(n,t,l),i=i.next}while(i!==s)}un(e,t,n);break;case 1:if(!Xe&&(cs(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Le(n,t,o)}un(e,t,n);break;case 21:un(e,t,n);break;case 22:n.mode&1?(Xe=(s=Xe)||n.memoizedState!==null,un(e,t,n),Xe=s):un(e,t,n);break;default:un(e,t,n)}}function nu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Sg),t.forEach(function(s){var i=Mg.bind(null,e,s);n.has(s)||(n.add(s),s.then(i,i))})}}function bt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:$e=o.stateNode,Lt=!1;break e;case 3:$e=o.stateNode.containerInfo,Lt=!0;break e;case 4:$e=o.stateNode.containerInfo,Lt=!0;break e}o=o.return}if($e===null)throw Error(M(160));bh(a,l,i),$e=null,Lt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Le(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Th(t,e),t=t.sibling}function Th(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bt(t,e),Bt(e),s&4){try{nr(3,e,e.return),Yi(3,e)}catch(T){Le(e,e.return,T)}try{nr(5,e,e.return)}catch(T){Le(e,e.return,T)}}break;case 1:bt(t,e),Bt(e),s&512&&n!==null&&cs(n,n.return);break;case 5:if(bt(t,e),Bt(e),s&512&&n!==null&&cs(n,n.return),e.flags&32){var i=e.stateNode;try{ar(i,"")}catch(T){Le(e,e.return,T)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Xu(i,a),Za(o,l);var d=Za(o,a);for(l=0;l<c.length;l+=2){var x=c[l],p=c[l+1];x==="style"?nd(i,p):x==="dangerouslySetInnerHTML"?ed(i,p):x==="children"?ar(i,p):Gl(i,x,p,d)}switch(o){case"input":Ga(i,a);break;case"textarea":Ju(i,a);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var L=a.value;L!=null?ds(i,!!a.multiple,L,!1):y!==!!a.multiple&&(a.defaultValue!=null?ds(i,!!a.multiple,a.defaultValue,!0):ds(i,!!a.multiple,a.multiple?[]:"",!1))}i[mr]=a}catch(T){Le(e,e.return,T)}}break;case 6:if(bt(t,e),Bt(e),s&4){if(e.stateNode===null)throw Error(M(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(T){Le(e,e.return,T)}}break;case 3:if(bt(t,e),Bt(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ur(t.containerInfo)}catch(T){Le(e,e.return,T)}break;case 4:bt(t,e),Bt(e);break;case 13:bt(t,e),Bt(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(bo=Ae())),s&4&&nu(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(Xe=(d=Xe)||x,bt(t,e),Xe=d):bt(t,e),Bt(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!x&&e.mode&1)for(W=e,x=e.child;x!==null;){for(p=W=x;W!==null;){switch(y=W,L=y.child,y.tag){case 0:case 11:case 14:case 15:nr(4,y,y.return);break;case 1:cs(y,y.return);var m=y.stateNode;if(typeof m.componentWillUnmount=="function"){s=y,n=y.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(T){Le(s,n,T)}}break;case 5:cs(y,y.return);break;case 22:if(y.memoizedState!==null){ru(p);continue}}L!==null?(L.return=y,W=L):ru(p)}x=x.sibling}e:for(x=null,p=e;;){if(p.tag===5){if(x===null){x=p;try{i=p.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=p.stateNode,c=p.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=td("display",l))}catch(T){Le(e,e.return,T)}}}else if(p.tag===6){if(x===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(T){Le(e,e.return,T)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:bt(t,e),Bt(e),s&4&&nu(e);break;case 21:break;default:bt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ch(n)){var s=n;break e}n=n.return}throw Error(M(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(ar(i,""),s.flags&=-33);var a=tu(e);Tl(e,a,i);break;case 3:case 4:var l=s.stateNode.containerInfo,o=tu(e);bl(e,o,l);break;default:throw Error(M(161))}}catch(c){Le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cg(e,t,n){W=e,Lh(e)}function Lh(e,t,n){for(var s=(e.mode&1)!==0;W!==null;){var i=W,a=i.child;if(i.tag===22&&s){var l=i.memoizedState!==null||qr;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Xe;o=qr;var d=Xe;if(qr=l,(Xe=c)&&!d)for(W=i;W!==null;)l=W,c=l.child,l.tag===22&&l.memoizedState!==null?iu(i):c!==null?(c.return=l,W=c):iu(i);for(;a!==null;)W=a,Lh(a),a=a.sibling;W=i,qr=o,Xe=d}su(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,W=a):su(e)}}function su(e){for(;W!==null;){var t=W;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||Yi(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Xe)if(n===null)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Tt(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&$c(t,a,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$c(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var x=d.memoizedState;if(x!==null){var p=x.dehydrated;p!==null&&ur(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Xe||t.flags&512&&Cl(t)}catch(y){Le(t,t.return,y)}}if(t===e){W=null;break}if(n=t.sibling,n!==null){n.return=t.return,W=n;break}W=t.return}}function ru(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var n=t.sibling;if(n!==null){n.return=t.return,W=n;break}W=t.return}}function iu(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yi(4,t)}catch(c){Le(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){Le(t,i,c)}}var a=t.return;try{Cl(t)}catch(c){Le(t,a,c)}break;case 5:var l=t.return;try{Cl(t)}catch(c){Le(t,l,c)}}}catch(c){Le(t,t.return,c)}if(t===e){W=null;break}var o=t.sibling;if(o!==null){o.return=t.return,W=o;break}W=t.return}}var bg=Math.ceil,Oi=nn.ReactCurrentDispatcher,Eo=nn.ReactCurrentOwner,kt=nn.ReactCurrentBatchConfig,de=0,ze=null,Pe=null,Ve=0,ft=0,us=Tn(0),De=0,Nr=null,Fn=0,Ki=0,Co=0,sr=null,lt=null,bo=0,_s=1/0,Qt=null,Mi=!1,Ll=null,wn=null,Gr=!1,gn=null,Di=0,rr=0,Al=null,oi=-1,ci=0;function st(){return de&6?Ae():oi!==-1?oi:oi=Ae()}function _n(e){return e.mode&1?de&2&&Ve!==0?Ve&-Ve:dg.transition!==null?(ci===0&&(ci=pd()),ci):(e=me,e!==0||(e=window.event,e=e===void 0?16:Nd(e.type)),e):1}function Ot(e,t,n,s){if(50<rr)throw rr=0,Al=null,Error(M(185));_r(e,n,s),(!(de&2)||e!==ze)&&(e===ze&&(!(de&2)&&(Ki|=n),De===4&&pn(e,Ve)),dt(e,s),n===1&&de===0&&!(t.mode&1)&&(_s=Ae()+500,Qi&&Ln()))}function dt(e,t){var n=e.callbackNode;dm(e,t);var s=xi(e,e===ze?Ve:0);if(s===0)n!==null&&pc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&pc(n),t===1)e.tag===0?ug(au.bind(null,e)):Ud(au.bind(null,e)),ag(function(){!(de&6)&&Ln()}),n=null;else{switch(md(s)){case 1:n=Zl;break;case 4:n=hd;break;case 16:n=yi;break;case 536870912:n=fd;break;default:n=yi}n=Bh(n,Ah.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ah(e,t){if(oi=-1,ci=0,de&6)throw Error(M(327));var n=e.callbackNode;if(gs()&&e.callbackNode!==n)return null;var s=xi(e,e===ze?Ve:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ii(e,s);else{t=s;var i=de;de|=2;var a=Rh();(ze!==e||Ve!==t)&&(Qt=null,_s=Ae()+500,Bn(e,t));do try{Ag();break}catch(o){Ph(e,o)}while(!0);fo(),Oi.current=a,de=i,Pe!==null?t=0:(ze=null,Ve=0,t=De)}if(t!==0){if(t===2&&(i=rl(e),i!==0&&(s=i,t=Pl(e,i))),t===1)throw n=Nr,Bn(e,0),pn(e,s),dt(e,Ae()),n;if(t===6)pn(e,s);else{if(i=e.current.alternate,!(s&30)&&!Tg(i)&&(t=Ii(e,s),t===2&&(a=rl(e),a!==0&&(s=a,t=Pl(e,a))),t===1))throw n=Nr,Bn(e,0),pn(e,s),dt(e,Ae()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(M(345));case 2:On(e,lt,Qt);break;case 3:if(pn(e,s),(s&130023424)===s&&(t=bo+500-Ae(),10<t)){if(xi(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){st(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=hl(On.bind(null,e,lt,Qt),t);break}On(e,lt,Qt);break;case 4:if(pn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var l=31-Rt(s);a=1<<l,l=t[l],l>i&&(i=l),s&=~a}if(s=i,s=Ae()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*bg(s/1960))-s,10<s){e.timeoutHandle=hl(On.bind(null,e,lt,Qt),s);break}On(e,lt,Qt);break;case 5:On(e,lt,Qt);break;default:throw Error(M(329))}}}return dt(e,Ae()),e.callbackNode===n?Ah.bind(null,e):null}function Pl(e,t){var n=sr;return e.current.memoizedState.isDehydrated&&(Bn(e,t).flags|=256),e=Ii(e,t),e!==2&&(t=lt,lt=n,t!==null&&Rl(t)),e}function Rl(e){lt===null?lt=e:lt.push.apply(lt,e)}function Tg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!Mt(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pn(e,t){for(t&=~Co,t&=~Ki,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rt(t),s=1<<n;e[n]=-1,t&=~s}}function au(e){if(de&6)throw Error(M(327));gs();var t=xi(e,0);if(!(t&1))return dt(e,Ae()),null;var n=Ii(e,t);if(e.tag!==0&&n===2){var s=rl(e);s!==0&&(t=s,n=Pl(e,s))}if(n===1)throw n=Nr,Bn(e,0),pn(e,t),dt(e,Ae()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,On(e,lt,Qt),dt(e,Ae()),null}function To(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(_s=Ae()+500,Qi&&Ln())}}function Wn(e){gn!==null&&gn.tag===0&&!(de&6)&&gs();var t=de;de|=1;var n=kt.transition,s=me;try{if(kt.transition=null,me=1,e)return e()}finally{me=s,kt.transition=n,de=t,!(de&6)&&Ln()}}function Lo(){ft=us.current,we(us)}function Bn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ig(n)),Pe!==null)for(n=Pe.return;n!==null;){var s=n;switch(co(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ki();break;case 3:Ns(),we(ct),we(Je),xo();break;case 5:yo(s);break;case 4:Ns();break;case 13:we(Se);break;case 19:we(Se);break;case 10:po(s.type._context);break;case 22:case 23:Lo()}n=n.return}if(ze=e,Pe=e=kn(e.current,null),Ve=ft=t,De=0,Nr=null,Co=Ki=Fn=0,lt=sr=null,Dn!==null){for(t=0;t<Dn.length;t++)if(n=Dn[t],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var l=a.next;a.next=i,s.next=l}n.pending=s}Dn=null}return e}function Ph(e,t){do{var n=Pe;try{if(fo(),ii.current=Ri,Pi){for(var s=Ee.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Pi=!1}if(Vn=0,Be=Me=Ee=null,tr=!1,yr=0,Eo.current=null,n===null||n.return===null){De=1,Nr=t,Pe=null;break}e:{var a=e,l=n.return,o=n,c=t;if(t=Ve,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,x=o,p=x.tag;if(!(x.mode&1)&&(p===0||p===11||p===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var L=qc(l);if(L!==null){L.flags&=-257,Gc(L,l,o,a,t),L.mode&1&&Qc(a,d,t),t=L,c=d;var m=t.updateQueue;if(m===null){var T=new Set;T.add(c),t.updateQueue=T}else m.add(c);break e}else{if(!(t&1)){Qc(a,d,t),Ao();break e}c=Error(M(426))}}else if(ke&&o.mode&1){var N=qc(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Gc(N,l,o,a,t),uo(ws(c,o));break e}}a=c=ws(c,o),De!==4&&(De=2),sr===null?sr=[a]:sr.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var u=mh(a,c,t);Uc(a,u);break e;case 1:o=c;var f=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(wn===null||!wn.has(g)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=gh(a,o,t);Uc(a,j);break e}}a=a.return}while(a!==null)}Mh(n)}catch(A){t=A,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function Rh(){var e=Oi.current;return Oi.current=Ri,e===null?Ri:e}function Ao(){(De===0||De===3||De===2)&&(De=4),ze===null||!(Fn&268435455)&&!(Ki&268435455)||pn(ze,Ve)}function Ii(e,t){var n=de;de|=2;var s=Rh();(ze!==e||Ve!==t)&&(Qt=null,Bn(e,t));do try{Lg();break}catch(i){Ph(e,i)}while(!0);if(fo(),de=n,Oi.current=s,Pe!==null)throw Error(M(261));return ze=null,Ve=0,De}function Lg(){for(;Pe!==null;)Oh(Pe)}function Ag(){for(;Pe!==null&&!nm();)Oh(Pe)}function Oh(e){var t=Ih(e.alternate,e,ft);e.memoizedProps=e.pendingProps,t===null?Mh(e):Pe=t,Eo.current=null}function Mh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=kg(n,t),n!==null){n.flags&=32767,Pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{De=6,Pe=null;return}}else if(n=_g(n,t,ft),n!==null){Pe=n;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=e}while(t!==null);De===0&&(De=5)}function On(e,t,n){var s=me,i=kt.transition;try{kt.transition=null,me=1,Pg(e,t,n,s)}finally{kt.transition=i,me=s}return null}function Pg(e,t,n,s){do gs();while(gn!==null);if(de&6)throw Error(M(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(hm(e,a),e===ze&&(Pe=ze=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gr||(Gr=!0,Bh(yi,function(){return gs(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=kt.transition,kt.transition=null;var l=me;me=1;var o=de;de|=4,Eo.current=null,Eg(e,n),Th(n,e),Jm(ul),ji=!!cl,ul=cl=null,e.current=n,Cg(n),sm(),de=o,me=l,kt.transition=a}else e.current=n;if(Gr&&(Gr=!1,gn=e,Di=i),a=e.pendingLanes,a===0&&(wn=null),am(n.stateNode),dt(e,Ae()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Mi)throw Mi=!1,e=Ll,Ll=null,e;return Di&1&&e.tag!==0&&gs(),a=e.pendingLanes,a&1?e===Al?rr++:(rr=0,Al=e):rr=0,Ln(),null}function gs(){if(gn!==null){var e=md(Di),t=kt.transition,n=me;try{if(kt.transition=null,me=16>e?16:e,gn===null)var s=!1;else{if(e=gn,gn=null,Di=0,de&6)throw Error(M(331));var i=de;for(de|=4,W=e.current;W!==null;){var a=W,l=a.child;if(W.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(W=d;W!==null;){var x=W;switch(x.tag){case 0:case 11:case 15:nr(8,x,a)}var p=x.child;if(p!==null)p.return=x,W=p;else for(;W!==null;){x=W;var y=x.sibling,L=x.return;if(Eh(x),x===d){W=null;break}if(y!==null){y.return=L,W=y;break}W=L}}}var m=a.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var N=T.sibling;T.sibling=null,T=N}while(T!==null)}}W=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,W=l;else e:for(;W!==null;){if(a=W,a.flags&2048)switch(a.tag){case 0:case 11:case 15:nr(9,a,a.return)}var u=a.sibling;if(u!==null){u.return=a.return,W=u;break e}W=a.return}}var f=e.current;for(W=f;W!==null;){l=W;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,W=g;else e:for(l=f;W!==null;){if(o=W,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yi(9,o)}}catch(A){Le(o,o.return,A)}if(o===l){W=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,W=j;break e}W=o.return}}if(de=i,Ln(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot($i,e)}catch{}s=!0}return s}finally{me=n,kt.transition=t}}return!1}function lu(e,t,n){t=ws(n,t),t=mh(e,t,1),e=Nn(e,t,1),t=st(),e!==null&&(_r(e,1,t),dt(e,t))}function Le(e,t,n){if(e.tag===3)lu(e,e,n);else for(;t!==null;){if(t.tag===3){lu(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(wn===null||!wn.has(s))){e=ws(n,e),e=gh(t,e,1),t=Nn(t,e,1),e=st(),t!==null&&(_r(t,1,e),dt(t,e));break}}t=t.return}}function Rg(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&n,ze===e&&(Ve&n)===n&&(De===4||De===3&&(Ve&130023424)===Ve&&500>Ae()-bo?Bn(e,0):Co|=n),dt(e,t)}function Dh(e,t){t===0&&(e.mode&1?(t=Br,Br<<=1,!(Br&130023424)&&(Br=4194304)):t=1);var n=st();e=en(e,t),e!==null&&(_r(e,t,n),dt(e,n))}function Og(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Dh(e,n)}function Mg(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(M(314))}s!==null&&s.delete(t),Dh(e,n)}var Ih;Ih=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)ot=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ot=!1,wg(e,t,n);ot=!!(e.flags&131072)}else ot=!1,ke&&t.flags&1048576&&$d(t,Ci,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;li(e,t),e=t.pendingProps;var i=ys(t,Je.current);ms(t,n),i=No(null,t,s,e,i,n);var a=wo();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(s)?(a=!0,Si(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,go(t),i.updater=Gi,t.stateNode=i,i._reactInternals=t,xl(t,s,e,n),t=wl(null,t,s,!0,a,n)):(t.tag=0,ke&&a&&oo(t),tt(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(li(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=Ig(s),e=Tt(s,e),i){case 0:t=Nl(null,t,s,e,n);break e;case 1:t=Xc(null,t,s,e,n);break e;case 11:t=Yc(null,t,s,e,n);break e;case 14:t=Kc(null,t,s,Tt(s.type,e),n);break e}throw Error(M(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Tt(s,i),Nl(e,t,s,i,n);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Tt(s,i),Xc(e,t,s,i,n);case 3:e:{if(jh(t),e===null)throw Error(M(387));s=t.pendingProps,a=t.memoizedState,i=a.element,qd(e,t),Li(t,s,null,n);var l=t.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=ws(Error(M(423)),t),t=Jc(e,t,s,n,i);break e}else if(s!==i){i=ws(Error(M(424)),t),t=Jc(e,t,s,n,i);break e}else for(pt=jn(t.stateNode.containerInfo.firstChild),mt=t,ke=!0,Pt=null,n=Hd(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),s===i){t=tn(e,t,n);break e}tt(e,t,s,n)}t=t.child}return t;case 5:return Gd(t),e===null&&gl(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,dl(s,i)?l=null:a!==null&&dl(s,a)&&(t.flags|=32),xh(e,t),tt(e,t,l,n),t.child;case 6:return e===null&&gl(t),null;case 13:return Nh(e,t,n);case 4:return vo(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=js(t,null,s,n):tt(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Tt(s,i),Yc(e,t,s,i,n);case 7:return tt(e,t,t.pendingProps,n),t.child;case 8:return tt(e,t,t.pendingProps.children,n),t.child;case 12:return tt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,xe(bi,s._currentValue),s._currentValue=l,a!==null)if(Mt(a.value,l)){if(a.children===i.children&&!ct.current){t=tn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Xt(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var x=d.pending;x===null?c.next=c:(c.next=x.next,x.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),vl(a.return,n,t),o.lanes|=n;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),vl(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}tt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,ms(t,n),i=St(i),s=s(i),t.flags|=1,tt(e,t,s,n),t.child;case 14:return s=t.type,i=Tt(s,t.pendingProps),i=Tt(s.type,i),Kc(e,t,s,i,n);case 15:return vh(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Tt(s,i),li(e,t),t.tag=1,ut(s)?(e=!0,Si(t)):e=!1,ms(t,n),ph(t,s,i),xl(t,s,i,n),wl(null,t,s,!0,e,n);case 19:return wh(e,t,n);case 22:return yh(e,t,n)}throw Error(M(156,t.tag))};function Bh(e,t){return dd(e,t)}function Dg(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,n,s){return new Dg(e,t,n,s)}function Po(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ig(e){if(typeof e=="function")return Po(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Kl)return 11;if(e===Xl)return 14}return 2}function kn(e,t){var n=e.alternate;return n===null?(n=_t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ui(e,t,n,s,i,a){var l=2;if(s=e,typeof e=="function")Po(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case es:return zn(n.children,i,a,t);case Yl:l=8,i|=8;break;case Fa:return e=_t(12,n,t,i|2),e.elementType=Fa,e.lanes=a,e;case Wa:return e=_t(13,n,t,i),e.elementType=Wa,e.lanes=a,e;case Ha:return e=_t(19,n,t,i),e.elementType=Ha,e.lanes=a,e;case Gu:return Xi(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qu:l=10;break e;case qu:l=9;break e;case Kl:l=11;break e;case Xl:l=14;break e;case dn:l=16,s=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=_t(l,n,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function zn(e,t,n,s){return e=_t(7,e,s,t),e.lanes=n,e}function Xi(e,t,n,s){return e=_t(22,e,s,t),e.elementType=Gu,e.lanes=n,e.stateNode={isHidden:!1},e}function Pa(e,t,n){return e=_t(6,e,null,t),e.lanes=n,e}function Ra(e,t,n){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bg(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fa(0),this.expirationTimes=fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fa(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ro(e,t,n,s,i,a,l,o,c){return e=new Bg(e,t,n,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=_t(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},go(a),e}function zg(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zn,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function zh(e){if(!e)return Cn;e=e._reactInternals;e:{if(Qn(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(ut(n))return zd(e,n,t)}return t}function Uh(e,t,n,s,i,a,l,o,c){return e=Ro(n,s,!0,e,i,a,l,o,c),e.context=zh(null),n=e.current,s=st(),i=_n(n),a=Xt(s,i),a.callback=t??null,Nn(n,a,i),e.current.lanes=i,_r(e,i,s),dt(e,s),e}function Ji(e,t,n,s){var i=t.current,a=st(),l=_n(i);return n=zh(n),t.context===null?t.context=n:t.pendingContext=n,t=Xt(a,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Nn(i,t,l),e!==null&&(Ot(e,i,l,a),ri(e,i,l)),l}function Bi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ou(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Oo(e,t){ou(e,t),(e=e.alternate)&&ou(e,t)}function Ug(){return null}var $h=typeof reportError=="function"?reportError:function(e){console.error(e)};function Mo(e){this._internalRoot=e}Zi.prototype.render=Mo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));Ji(e,t,null,null)};Zi.prototype.unmount=Mo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wn(function(){Ji(null,e,null,null)}),t[Zt]=null}};function Zi(e){this._internalRoot=e}Zi.prototype.unstable_scheduleHydration=function(e){if(e){var t=yd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fn.length&&t!==0&&t<fn[n].priority;n++);fn.splice(n,0,e),n===0&&jd(e)}};function Do(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ea(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cu(){}function $g(e,t,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=Bi(l);a.call(d)}}var l=Uh(t,s,e,0,null,!1,!1,"",cu);return e._reactRootContainer=l,e[Zt]=l.current,fr(e.nodeType===8?e.parentNode:e),Wn(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var d=Bi(c);o.call(d)}}var c=Ro(e,0,!1,null,null,!1,!1,"",cu);return e._reactRootContainer=c,e[Zt]=c.current,fr(e.nodeType===8?e.parentNode:e),Wn(function(){Ji(t,c,n,s)}),c}function ta(e,t,n,s,i){var a=n._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=Bi(l);o.call(c)}}Ji(t,l,e,i)}else l=$g(n,t,e,i,s);return Bi(l)}gd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=qs(t.pendingLanes);n!==0&&(eo(t,n|1),dt(t,Ae()),!(de&6)&&(_s=Ae()+500,Ln()))}break;case 13:Wn(function(){var s=en(e,1);if(s!==null){var i=st();Ot(s,e,1,i)}}),Oo(e,1)}};to=function(e){if(e.tag===13){var t=en(e,134217728);if(t!==null){var n=st();Ot(t,e,134217728,n)}Oo(e,134217728)}};vd=function(e){if(e.tag===13){var t=_n(e),n=en(e,t);if(n!==null){var s=st();Ot(n,e,t,s)}Oo(e,t)}};yd=function(){return me};xd=function(e,t){var n=me;try{return me=e,t()}finally{me=n}};tl=function(e,t,n){switch(t){case"input":if(Ga(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=Hi(s);if(!i)throw Error(M(90));Ku(s),Ga(s,i)}}}break;case"textarea":Ju(e,n);break;case"select":t=n.value,t!=null&&ds(e,!!n.multiple,t,!1)}};id=To;ad=Wn;var Vg={usingClientEntryPoint:!1,Events:[Sr,rs,Hi,sd,rd,To]},Fs={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fg={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cd(e),e===null?null:e.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||Ug,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yr.isDisabled&&Yr.supportsFiber)try{$i=Yr.inject(Fg),$t=Yr}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vg;vt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Do(t))throw Error(M(200));return zg(e,t,null,n)};vt.createRoot=function(e,t){if(!Do(e))throw Error(M(299));var n=!1,s="",i=$h;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Ro(e,1,!1,null,null,n,!1,s,i),e[Zt]=t.current,fr(e.nodeType===8?e.parentNode:e),new Mo(t)};vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=cd(t),e=e===null?null:e.stateNode,e};vt.flushSync=function(e){return Wn(e)};vt.hydrate=function(e,t,n){if(!ea(t))throw Error(M(200));return ta(null,e,t,!0,n)};vt.hydrateRoot=function(e,t,n){if(!Do(e))throw Error(M(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",l=$h;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Uh(t,null,e,1,n??null,i,!1,a,l),e[Zt]=t.current,fr(e),s)for(e=0;e<s.length;e++)n=s[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zi(t)};vt.render=function(e,t,n){if(!ea(t))throw Error(M(200));return ta(null,e,t,!1,n)};vt.unmountComponentAtNode=function(e){if(!ea(e))throw Error(M(40));return e._reactRootContainer?(Wn(function(){ta(null,null,e,!1,function(){e._reactRootContainer=null,e[Zt]=null})}),!0):!1};vt.unstable_batchedUpdates=To;vt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!ea(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return ta(e,t,n,!1,s)};vt.version="18.3.1-next-f1338f8080-20240426";function Vh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vh)}catch(e){console.error(e)}}Vh(),Vu.exports=vt;var Wg=Vu.exports,Fh,uu=Wg;Fh=uu.createRoot,uu.hydrateRoot;const Hg="http://localhost:3000";let Ol=localStorage.getItem("token");function Xn(e){Ol=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}async function Cr(e,t={}){const n={"Content-Type":"application/json",...t.headers||{}};Ol&&(n.Authorization=`Bearer ${Ol}`);const s=await fetch(`${Hg}${e}`,{...t,headers:n});if(!s.ok){const a=(await s.json().catch(()=>({}))).error||"request_failed";throw new Error(a)}return s.json()}function ue(e){return Cr(e,{method:"GET"})}function Te(e,t){return Cr(e,{method:"POST",body:JSON.stringify(t||{})})}function nt(e,t){return Cr(e,{method:"PATCH",body:JSON.stringify(t||{})})}function du(e,t){return Cr(e,{method:"PUT",body:JSON.stringify(t||{})})}function Jn(e){return Cr(e,{method:"DELETE"})}const Wt=Object.create(null);Wt.open="0";Wt.close="1";Wt.ping="2";Wt.pong="3";Wt.message="4";Wt.upgrade="5";Wt.noop="6";const di=Object.create(null);Object.keys(Wt).forEach(e=>{di[Wt[e]]=e});const Ml={type:"error",data:"parser error"},Wh=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Hh=typeof ArrayBuffer=="function",Qh=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Io=({type:e,data:t},n,s)=>Wh&&t instanceof Blob?n?s(t):hu(t,s):Hh&&(t instanceof ArrayBuffer||Qh(t))?n?s(t):hu(new Blob([t]),s):s(Wt[e]+(t||"")),hu=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function fu(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Oa;function Qg(e,t){if(Wh&&e.data instanceof Blob)return e.data.arrayBuffer().then(fu).then(t);if(Hh&&(e.data instanceof ArrayBuffer||Qh(e.data)))return t(fu(e.data));Io(e,!1,n=>{Oa||(Oa=new TextEncoder),t(Oa.encode(n))})}const pu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ys=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<pu.length;e++)Ys[pu.charCodeAt(e)]=e;const qg=e=>{let t=e.length*.75,n=e.length,s,i=0,a,l,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),x=new Uint8Array(d);for(s=0;s<n;s+=4)a=Ys[e.charCodeAt(s)],l=Ys[e.charCodeAt(s+1)],o=Ys[e.charCodeAt(s+2)],c=Ys[e.charCodeAt(s+3)],x[i++]=a<<2|l>>4,x[i++]=(l&15)<<4|o>>2,x[i++]=(o&3)<<6|c&63;return d},Gg=typeof ArrayBuffer=="function",Bo=(e,t)=>{if(typeof e!="string")return{type:"message",data:qh(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:Yg(e.substring(1),t)}:di[n]?e.length>1?{type:di[n],data:e.substring(1)}:{type:di[n]}:Ml},Yg=(e,t)=>{if(Gg){const n=qg(e);return qh(n,t)}else return{base64:!0,data:e}},qh=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Gh="",Kg=(e,t)=>{const n=e.length,s=new Array(n);let i=0;e.forEach((a,l)=>{Io(a,!1,o=>{s[l]=o,++i===n&&t(s.join(Gh))})})},Xg=(e,t)=>{const n=e.split(Gh),s=[];for(let i=0;i<n.length;i++){const a=Bo(n[i],t);if(s.push(a),a.type==="error")break}return s};function Jg(){return new TransformStream({transform(e,t){Qg(e,n=>{const s=n.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,s)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Ma;function Kr(e){return e.reduce((t,n)=>t+n.length,0)}function Xr(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)n[i]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function Zg(e,t){Ma||(Ma=new TextDecoder);const n=[];let s=0,i=-1,a=!1;return new TransformStream({transform(l,o){for(n.push(l);;){if(s===0){if(Kr(n)<1)break;const c=Xr(n,1);a=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(Kr(n)<2)break;const c=Xr(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(Kr(n)<8)break;const c=Xr(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),x=d.getUint32(0);if(x>Math.pow(2,21)-1){o.enqueue(Ml);break}i=x*Math.pow(2,32)+d.getUint32(4),s=3}else{if(Kr(n)<i)break;const c=Xr(n,i);o.enqueue(Bo(a?c:Ma.decode(c),t)),s=0}if(i===0||i>e){o.enqueue(Ml);break}}}})}const Yh=4;function Re(e){if(e)return ev(e)}function ev(e){for(var t in Re.prototype)e[t]=Re.prototype[t];return e}Re.prototype.on=Re.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Re.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Re.prototype.off=Re.prototype.removeListener=Re.prototype.removeAllListeners=Re.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,i=0;i<n.length;i++)if(s=n[i],s===t||s.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Re.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,i=n.length;s<i;++s)n[s].apply(this,t)}return this};Re.prototype.emitReserved=Re.prototype.emit;Re.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Re.prototype.hasListeners=function(e){return!!this.listeners(e).length};const na=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),wt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),tv="arraybuffer";function Kh(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const nv=wt.setTimeout,sv=wt.clearTimeout;function sa(e,t){t.useNativeTimers?(e.setTimeoutFn=nv.bind(wt),e.clearTimeoutFn=sv.bind(wt)):(e.setTimeoutFn=wt.setTimeout.bind(wt),e.clearTimeoutFn=wt.clearTimeout.bind(wt))}const rv=1.33;function iv(e){return typeof e=="string"?av(e):Math.ceil((e.byteLength||e.size)*rv)}function av(e){let t=0,n=0;for(let s=0,i=e.length;s<i;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function Xh(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function lv(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function ov(e){let t={},n=e.split("&");for(let s=0,i=n.length;s<i;s++){let a=n[s].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class cv extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class zo extends Re{constructor(t){super(),this.writable=!1,sa(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new cv(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Bo(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=lv(t);return n.length?"?"+n:""}}class uv extends zo{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Xg(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Kg(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Xh()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Jh=!1;try{Jh=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const dv=Jh;function hv(){}class fv extends uv{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class Ft extends Re{constructor(t,n,s){super(),this.createRequest=t,sa(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=Kh(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Ft.requestsCount++,Ft.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=hv,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ft.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ft.requestsCount=0;Ft.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",mu);else if(typeof addEventListener=="function"){const e="onpagehide"in wt?"pagehide":"unload";addEventListener(e,mu,!1)}}function mu(){for(let e in Ft.requests)Ft.requests.hasOwnProperty(e)&&Ft.requests[e].abort()}const pv=function(){const e=Zh({xdomain:!1});return e&&e.responseType!==null}();class mv extends fv{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=pv&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ft(Zh,this.uri(),t)}}function Zh(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||dv))return new XMLHttpRequest}catch{}if(!t)try{return new wt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ef=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class gv extends zo{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=ef?{}:Kh(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;Io(s,this.supportsBinary,a=>{try{this.doWrite(s,a)}catch{}i&&na(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Xh()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Da=wt.WebSocket||wt.MozWebSocket;class vv extends gv{createSocket(t,n,s){return ef?new Da(t,n,s):n?new Da(t,n):new Da(t)}doWrite(t,n){this.ws.send(n)}}class yv extends zo{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=Zg(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),i=Jg();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{s.read().then(({done:o,value:c})=>{o||(this.onPacket(c),a())}).catch(o=>{})};a();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;this._writer.write(s).then(()=>{i&&na(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const xv={websocket:vv,webtransport:yv,polling:mv},jv=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Nv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Dl(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let i=jv.exec(e||""),a={},l=14;for(;l--;)a[Nv[l]]=i[l]||"";return n!=-1&&s!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=wv(a,a.path),a.queryKey=_v(a,a.query),a}function wv(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function _v(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,a){i&&(n[i]=a)}),n}const Il=typeof addEventListener=="function"&&typeof removeEventListener=="function",hi=[];Il&&addEventListener("offline",()=>{hi.forEach(e=>e())},!1);class Sn extends Re{constructor(t,n){if(super(),this.binaryType=tv,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=Dl(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=Dl(n.host).host);sa(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ov(this.opts.query)),Il&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},hi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Yh,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Sn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Sn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(n+=iv(i)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,na(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,i){if(typeof n=="function"&&(i=n,n=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const a={type:t,data:n,options:s};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Sn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Il&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=hi.indexOf(this._offlineEventListener);s!==-1&&hi.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Sn.protocol=Yh;class kv extends Sn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;Sn.priorWebsocketSuccess=!1;const i=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!s)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Sn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function a(){s||(s=!0,x(),n.close(),n=null)}const l=p=>{const y=new Error("probe error: "+p);y.transport=n.name,a(),this.emitReserved("upgradeError",y)};function o(){l("transport closed")}function c(){l("socket closed")}function d(p){n&&p.name!==n.name&&a()}const x=()=>{n.removeListener("open",i),n.removeListener("error",l),n.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};n.once("open",i),n.once("error",l),n.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let Sv=class extends kv{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>xv[i]).filter(i=>!!i)),super(t,s)}};function Ev(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=Dl(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const a=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+t,s.href=s.protocol+"://"+a+(n&&n.port===s.port?"":":"+s.port),s}const Cv=typeof ArrayBuffer=="function",bv=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,tf=Object.prototype.toString,Tv=typeof Blob=="function"||typeof Blob<"u"&&tf.call(Blob)==="[object BlobConstructor]",Lv=typeof File=="function"||typeof File<"u"&&tf.call(File)==="[object FileConstructor]";function Uo(e){return Cv&&(e instanceof ArrayBuffer||bv(e))||Tv&&e instanceof Blob||Lv&&e instanceof File}function fi(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(fi(e[n]))return!0;return!1}if(Uo(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return fi(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&fi(e[n]))return!0;return!1}function Av(e){const t=[],n=e.data,s=e;return s.data=Bl(n,t),s.attachments=t.length,{packet:s,buffers:t}}function Bl(e,t){if(!e)return e;if(Uo(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=Bl(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=Bl(e[s],t));return n}return e}function Pv(e,t){return e.data=zl(e.data,t),delete e.attachments,e}function zl(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=zl(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=zl(e[n],t));return e}const nf=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Rv=5;var se;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(se||(se={}));class Ov{constructor(t){this.replacer=t}encode(t){return(t.type===se.EVENT||t.type===se.ACK)&&fi(t)?this.encodeAsBinary({type:t.type===se.EVENT?se.BINARY_EVENT:se.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===se.BINARY_EVENT||t.type===se.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Av(t),s=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(s),i}}class $o extends Re{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===se.BINARY_EVENT;s||n.type===se.BINARY_ACK?(n.type=s?se.EVENT:se.ACK,this.reconstructor=new Mv(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Uo(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(se[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===se.BINARY_EVENT||s.type===se.BINARY_ACK){const a=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(a,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(l)}if(t.charAt(n+1)==="/"){const a=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(a,n)}else s.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const a=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}s.id=Number(t.substring(a,n+1))}if(t.charAt(++n)){const a=this.tryParse(t.substr(n));if($o.isPayloadValid(s.type,a))s.data=a;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case se.CONNECT:return zi(n);case se.DISCONNECT:return n===void 0;case se.CONNECT_ERROR:return typeof n=="string"||zi(n);case se.EVENT:case se.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&nf.indexOf(n[0])===-1);case se.ACK:case se.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Mv{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Pv(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Dv(e){return typeof e=="string"}const Iv=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function Bv(e){return e===void 0||Iv(e)}function zi(e){return Object.prototype.toString.call(e)==="[object Object]"}function zv(e,t){switch(e){case se.CONNECT:return t===void 0||zi(t);case se.DISCONNECT:return t===void 0;case se.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&nf.indexOf(t[0])===-1);case se.ACK:return Array.isArray(t);case se.CONNECT_ERROR:return typeof t=="string"||zi(t);default:return!1}}function Uv(e){return Dv(e.nsp)&&Bv(e.id)&&zv(e.type,e.data)}const $v=Object.freeze(Object.defineProperty({__proto__:null,Decoder:$o,Encoder:Ov,get PacketType(){return se},isPacketValid:Uv,protocol:Rv},Symbol.toStringTag,{value:"Module"}));function At(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Vv=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class sf extends Re{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[At(t,"open",this.onopen.bind(this)),At(t,"packet",this.onpacket.bind(this)),At(t,"error",this.onerror.bind(this)),At(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,i,a;if(Vv.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:se.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const x=this.ids++,p=n.pop();this._registerAckCallback(x,p),l.id=x}const o=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},i),l=(...o)=>{this.io.clearTimeoutFn(a),n.apply(this,o)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((s,i)=>{const a=(l,o)=>l?i(l):s(o);a.withError=!0,n.push(a),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>(this._queue[0],i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...a)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:se.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case se.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case se.EVENT:case se.BINARY_EVENT:this.onevent(t);break;case se.ACK:case se.BINARY_ACK:this.onack(t);break;case se.DISCONNECT:this.ondisconnect();break;case se.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...i){s||(s=!0,n.packet({type:se.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:se.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function Cs(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Cs.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Cs.prototype.reset=function(){this.attempts=0};Cs.prototype.setMin=function(e){this.ms=e};Cs.prototype.setMax=function(e){this.max=e};Cs.prototype.setJitter=function(e){this.jitter=e};class Ul extends Re{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,sa(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Cs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||$v;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Sv(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=At(n,"open",function(){s.onopen(),t&&t()}),a=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},l=At(n,"error",a);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),n.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(At(t,"ping",this.onping.bind(this)),At(t,"data",this.ondata.bind(this)),At(t,"error",this.onerror.bind(this)),At(t,"close",this.onclose.bind(this)),At(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){na(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new sf(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ws={};function pi(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Ev(e,t.path||"/socket.io"),s=n.source,i=n.id,a=n.path,l=Ws[i]&&a in Ws[i].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return o?c=new Ul(s,t):(Ws[i]||(Ws[i]=new Ul(s,t)),c=Ws[i]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(pi,{Manager:Ul,Socket:sf,io:pi,connect:pi});const Fv="http://localhost:3000";function Wv(e){return pi(Fv,{auth:{token:e}})}const rf=v.createContext(null);function Hv({children:e}){const[t,n]=v.useState([]),s=v.useRef(new Map),i=o=>{n(d=>d.filter(x=>x.id!==o));const c=s.current.get(o);c&&(clearTimeout(c),s.current.delete(o))},a=({message:o,type:c="success",actionLabel:d,onAction:x,duration:p=6e3})=>{const y=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;if(n(L=>[...L,{id:y,message:o,type:c,actionLabel:d,onAction:x,duration:p}]),p>0){const L=setTimeout(()=>i(y),p);s.current.set(y,L)}return y},l=o=>o==="error"?r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M12 4.5c.5 0 .95.26 1.2.68l6.5 11.25a1.35 1.35 0 0 1-1.2 2.02H5.5a1.35 1.35 0 0 1-1.2-2.02L10.8 5.18c.25-.42.7-.68 1.2-.68Zm0 4.25a.9.9 0 0 0-.9.9v5.5a.9.9 0 1 0 1.8 0v-5.5a.9.9 0 0 0-.9-.9Zm0 8.3a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Z",fill:"currentColor"})}):o==="info"?r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M12 3.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17Zm0 3.9a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2Zm-1.2 4.2h2.4v6.1h-2.4v-6.1Z",fill:"currentColor"})}):r.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M9.5 16.6 5.6 12.7a1 1 0 1 1 1.4-1.4l2.5 2.5 7.5-7.5a1 1 0 1 1 1.4 1.4l-8.9 8.9a1 1 0 0 1-1.4 0Z",fill:"currentColor"})});return r.jsxs(rf.Provider,{value:{pushToast:a,removeToast:i},children:[e,r.jsx("div",{className:"toast-container",children:t.map(o=>r.jsxs("div",{className:`toast toast-${o.type}`,style:{"--toast-duration":`${o.duration}ms`},children:[r.jsx("div",{className:"toast-icon",children:l(o.type)}),r.jsx("div",{className:"toast-message",children:o.message}),o.actionLabel&&r.jsx("button",{className:"toast-action",type:"button",onClick:()=>{o.onAction&&Promise.resolve(o.onAction()).catch(()=>{}),i(o.id)},children:o.actionLabel}),r.jsx("button",{className:"toast-close",type:"button",onClick:()=>i(o.id),children:"x"}),o.duration>0&&r.jsx("div",{className:`toast-progress toast-progress-${o.type}`})]},o.id))})]})}function Vo(){const e=v.useContext(rf);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function Qv({user:e,isOpen:t,onToggle:n,onLogout:s,onReturnToSuperadmin:i,showReturnToSuperadmin:a,getInitial:l}){return r.jsxs("div",{className:"rail-profile",children:[r.jsx("button",{className:`profile-button ${t?"active":""}`,type:"button",onClick:n,title:"Perfil","aria-label":"Perfil",children:r.jsx("span",{children:l(e.name)})}),t&&r.jsxs("div",{className:"profile-card",children:[r.jsx("div",{className:"profile-title",children:e.name}),r.jsx("div",{className:"profile-meta",children:e.email||"Sin correo"}),r.jsx("div",{className:"profile-role",children:e.role}),a?r.jsx("button",{className:"ghost",type:"button",onClick:i,children:"Volver a superadmin"}):null,r.jsx("button",{className:"primary",type:"button",onClick:s,children:"Salir"})]})]})}function qv({navItems:e,view:t,onSetView:n,theme:s,onToggleTheme:i,user:a,logoUrl:l,brandName:o,isProfileOpen:c,onToggleProfile:d,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:L,SunIcon:m,MoonIcon:T}){const N=(o||"P").trim().charAt(0)||"P";return r.jsxs("aside",{className:"nav-rail",children:[r.jsx("button",{className:"rail-logo",type:"button",title:"Perzivalh",children:l?r.jsx("img",{src:l,alt:o||"Logo"}):r.jsx("span",{className:"logo-mark",children:N})}),r.jsx("nav",{className:"rail-nav",children:e.map(u=>{const f=u.icon;return r.jsx("button",{className:`rail-button ${t===u.id?"active":""}`,onClick:()=>u.enabled&&n(u.id),title:u.label,"aria-label":u.label,type:"button",disabled:!u.enabled,children:r.jsx(f,{className:"rail-icon"})},u.id)})}),r.jsx("div",{className:"rail-spacer"}),r.jsx("button",{className:"rail-button",type:"button",onClick:i,title:s==="dark"?"Tema claro":"Tema oscuro","aria-label":s==="dark"?"Tema claro":"Tema oscuro",children:s==="dark"?r.jsx(m,{className:"rail-icon"}):r.jsx(T,{className:"rail-icon"})}),r.jsx(Qv,{user:a,isOpen:c,onToggle:d,onLogout:x,onReturnToSuperadmin:p,showReturnToSuperadmin:y,getInitial:L})]})}function Gv({activeConversation:e,conversations:t,channels:n,brandName:s,lastReadMap:i,filters:a,showFilters:l,users:o,tags:c,statusOptions:d,statusLabels:x,formatListTime:p,formatCompactDate:y,messageBlocks:L,messageDraft:m,messageMode:T,quickActions:N,tagInput:u,latestNote:f,loadingConversation:g,isInfoOpen:j,hasUnread:A,activeName:w,activePhone:P,activeStatusLabel:C,canManageStatus:B,messageInputRef:V,chatBodyRef:q,setShowFilters:ie,setFilters:fe,loadConversation:ge,handleBackToList:be,setIsInfoOpen:le,handleChatScroll:je,handleAssignSelf:I,handleStatusChange:F,handleToggleTag:S,handleAddTag:$,handleQuickAction:H,handleSendMessage:ee,setMessageMode:b,setMessageDraft:G,scrollChatToBottom:X,getInitial:U,PlusIcon:re,SearchIcon:he,VideoIcon:pe,PhoneIcon:ve,InfoIcon:Ie,SendIcon:We}){const Ue=new Map((n||[]).map(O=>[O.phone_number_id,O.display_name||(O.phone_number_id?`Linea ${String(O.phone_number_id).slice(-4)}`:"")]));function He(O){if(!O)return"Sin mensajes";const ce=O.last_message_preview||O.last_message_text||O.last_message||"";return ce||(O.last_message_type?`[${O.last_message_type}]`:"Sin mensajes")}return r.jsxs("section",{className:`chat-shell ${e?"has-active":""}`,children:[r.jsxs("aside",{className:"chat-list-panel",children:[r.jsxs("div",{className:"chat-list-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"list-title",children:(s||"Perzivalh").toUpperCase()}),r.jsx("div",{className:"list-subtitle",children:"Chats"})]}),r.jsx("button",{className:"icon-button add-chat",type:"button",title:"Nuevo chat",children:r.jsx(re,{className:"icon"})})]}),r.jsxs("div",{className:"chat-search",children:[r.jsx(he,{className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Buscar pacientes o mensajes",value:a.search,onFocus:()=>ie(!0),onClick:()=>ie(!0),onChange:O=>fe(ce=>({...ce,search:O.target.value}))}),l&&r.jsx("button",{className:"search-close",type:"button",onClick:()=>ie(!1),"aria-label":"Cerrar filtros",children:"x"})]}),l&&r.jsxs("div",{className:"chat-filters",children:[r.jsxs("label",{className:"filter-field",children:[r.jsx("span",{children:"Status"}),r.jsxs("select",{value:a.status,onChange:O=>fe(ce=>({...ce,status:O.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),d.map(O=>r.jsx("option",{value:O,children:x[O]||O},O))]})]}),r.jsxs("label",{className:"filter-field",children:[r.jsx("span",{children:"Asignado"}),r.jsxs("select",{value:a.assigned_user_id,onChange:O=>fe(ce=>({...ce,assigned_user_id:O.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"unassigned",children:"Sin asignar"}),o.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))]})]}),r.jsxs("label",{className:"filter-field",children:[r.jsx("span",{children:"Tags"}),r.jsxs("select",{value:a.tag,onChange:O=>fe(ce=>({...ce,tag:O.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),c.map(O=>r.jsx("option",{value:O.name,children:O.name},O.id))]})]})]}),r.jsxs("div",{className:"list-header",children:[r.jsxs("select",{className:"line-filter",value:a.phone_number_id,onChange:O=>fe(ce=>({...ce,phone_number_id:O.target.value})),children:[r.jsx("option",{value:"",children:"Todas las lineas"}),(n||[]).map(O=>r.jsx("option",{value:O.phone_number_id,children:O.display_name||`Linea ${String(O.phone_number_id).slice(-4)}`},O.id))]}),r.jsx("span",{children:t.length})]}),r.jsx("div",{className:"conversation-list",children:t.map((O,ce)=>{var qn,Pn;const Oe=(e==null?void 0:e.id)===O.id,Dt=O.status==="pending"&&!O.assigned_user_id,_=O.display_name||O.phone_e164||O.wa_id||"Sin nombre",D=He(O),oe=Number(O.unread_count||O.unread_messages||O.unread||0),ye=((Pn=(qn=O.tags)==null?void 0:qn[0])==null?void 0:Pn.name)||"",Qe=O.phone_number_id?Ue.get(O.phone_number_id)||`Linea ${String(O.phone_number_id).slice(-4)}`:"",Ct=(i==null?void 0:i[O.id])||null,sn=O.last_message_at,An=sn&&(!Ct||new Date(sn).getTime()>new Date(Ct).getTime())&&O.last_message_direction==="in";return r.jsxs("button",{className:`conversation-item ${Oe?"active":""}`,onClick:()=>ge(O.id),style:{animationDelay:`${Math.min(ce,6)*60}ms`},children:[r.jsxs("div",{className:"avatar",children:[r.jsx("span",{children:U(_)}),Dt&&r.jsx("span",{className:"presence-dot"})]}),r.jsxs("div",{className:"conversation-body",children:[r.jsxs("div",{className:"conversation-row",children:[r.jsx("span",{className:"conversation-name",children:_}),r.jsxs("div",{className:"conversation-right",children:[r.jsx("span",{className:"conversation-time",children:p(O.last_message_at)}),oe>0&&r.jsx("span",{className:"conversation-unread",children:oe})]})]}),r.jsx("div",{className:`conversation-preview ${An?"unread":""}`,children:D}),r.jsxs("div",{className:"conversation-meta",children:[Qe&&r.jsx("span",{className:"status-pill line-pill",children:Qe}),ye&&r.jsx("span",{className:"status-pill tag-pill",children:ye})]})]})]},O.id)})})]}),r.jsxs("div",{className:`chat-view ${j?"info-open":"info-closed"}`,children:[r.jsx("div",{className:"chat-main",children:r.jsxs("div",{className:"chat-card",children:[r.jsxs("header",{className:"chat-topbar",children:[r.jsxs("div",{className:"chat-title",children:[e&&r.jsx("button",{className:"back-button",type:"button",onClick:be,children:"Chats"}),r.jsx("div",{className:"chat-avatar",children:r.jsx("span",{children:U(w)})}),r.jsxs("div",{children:[r.jsx("div",{className:"chat-name",children:w}),e?r.jsx("div",{className:"chat-status",children:C}):r.jsx("div",{className:"chat-status muted",children:"Elige una conversacion"})]})]}),r.jsxs("div",{className:"chat-actions",children:[r.jsx("button",{className:"icon-button",type:"button",title:"Video",children:r.jsx(pe,{className:"icon"})}),r.jsx("button",{className:"icon-button",type:"button",title:"Llamar",children:r.jsx(ve,{className:"icon"})}),r.jsx("button",{className:"icon-button",type:"button",title:"Buscar",children:r.jsx(he,{className:"icon"})}),r.jsx("button",{className:`icon-button ${j?"active":""}`,type:"button",title:"Info",onClick:()=>le(O=>!O),children:r.jsx(Ie,{className:"icon"})})]})]}),r.jsxs("div",{className:"chat-body",ref:q,onScroll:je,children:[g&&r.jsx("div",{className:"empty",children:"Cargando..."}),!g&&!e&&r.jsx("div",{className:"empty",children:"Selecciona una conversacion"}),!g&&e&&r.jsxs(r.Fragment,{children:[L.length?L:r.jsx("div",{className:"empty-state",children:"Sin mensajes"}),r.jsx("div",{className:"chat-encryption",children:"Los mensajes estan cifrados de extremo a extremo."})]})]}),A&&r.jsx("button",{className:"new-message-banner",type:"button",onClick:X,children:"Nuevos mensajes"}),r.jsxs("form",{className:"chat-composer",onSubmit:ee,children:[r.jsx("div",{className:"quick-actions",children:N.map(O=>r.jsx("button",{className:"quick-action",type:"button",onClick:()=>H(O),children:O},O))}),r.jsxs("div",{className:"composer-row",children:[r.jsxs("select",{className:"message-mode",value:T,onChange:O=>b(O.target.value),children:[r.jsx("option",{value:"text",children:"WhatsApp"}),r.jsx("option",{value:"note",children:"Nota interna"})]}),r.jsx("input",{ref:V,type:"text",placeholder:"Escribe un mensaje...",value:m,onChange:O=>G(O.target.value)}),r.jsx("button",{className:"send-button",type:"submit",children:r.jsx(We,{className:"icon"})})]})]})]})}),r.jsxs("aside",{className:"chat-info",children:[r.jsxs("div",{className:"info-card",children:[r.jsx("div",{className:"info-avatar",children:r.jsx("span",{children:U(w)})}),r.jsx("div",{className:"info-name",children:w}),r.jsx("div",{className:"info-phone",children:P||"Sin telefono"}),r.jsx("button",{className:"primary",type:"button",children:"Abrir en Odoo"})]}),r.jsxs("div",{className:"info-section",children:[r.jsx("div",{className:"section-title",children:"Informacion del paciente"}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{children:"Ultima visita"}),r.jsx("span",{children:y((e==null?void 0:e.last_visit_at)||(e==null?void 0:e.last_visit))})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{children:"Tratamiento actual"}),r.jsx("span",{children:(e==null?void 0:e.current_treatment)||(e==null?void 0:e.treatment)||"-"})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{children:"Alergias"}),r.jsx("span",{children:(e==null?void 0:e.allergies)||"Ninguna reportada"})]})]}),r.jsxs("div",{className:"info-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("div",{className:"section-title",children:"Etiquetas"}),r.jsx("button",{className:"link-button",type:"button",children:"Gestionar"})]}),r.jsx("div",{className:"tag-list",children:c.map(O=>{var ce;return r.jsx("button",{className:`tag ${(ce=e==null?void 0:e.tags)!=null&&ce.some(Oe=>Oe.name===O.name)?"active":""}`,onClick:()=>S(O.name),children:O.name},O.id)})}),r.jsxs("form",{className:"tag-form",onSubmit:$,children:[r.jsx("input",{type:"text",placeholder:"Anadir etiqueta...",value:u,onChange:O=>setTagInput(O.target.value)}),r.jsx("button",{className:"icon-button",type:"submit",title:"Agregar",children:r.jsx(re,{className:"icon"})})]})]}),r.jsxs("div",{className:"info-section",children:[r.jsx("div",{className:"section-title",children:"Notas internas"}),f?r.jsx("div",{className:"note-card",children:f}):r.jsx("div",{className:"empty-state",children:"Sin notas internas"})]}),e&&r.jsxs("div",{className:"info-section",children:[r.jsx("div",{className:"section-title",children:"Acciones"}),r.jsxs("div",{className:"action-stack",children:[r.jsx("button",{className:"ghost",type:"button",onClick:I,children:"Tomar conversacion"}),B&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"ghost",type:"button",onClick:()=>F("open"),children:"Reactivar bot"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>F("pending"),children:"Marcar pendiente"}),r.jsx("button",{className:"danger soft",type:"button",onClick:()=>F("closed"),children:"Cerrar conversacion"})]})]})]})]})]})]})}const Yv=[{day:"2024-01-01",in_count:210,out_count:90},{day:"2024-01-04",in_count:280,out_count:120},{day:"2024-01-07",in_count:240,out_count:110},{day:"2024-01-10",in_count:320,out_count:140},{day:"2024-01-13",in_count:300,out_count:130},{day:"2024-01-17",in_count:310,out_count:135},{day:"2024-01-20",in_count:290,out_count:120},{day:"2024-01-24",in_count:260,out_count:115},{day:"2024-01-27",in_count:330,out_count:150},{day:"2024-01-30",in_count:340,out_count:160}];function Kv(e){const t=e?new Date(e):null;if(!t||Number.isNaN(t.getTime()))return"--";const n=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return`${String(t.getDate()).padStart(2,"0")} ${n[t.getMonth()].toUpperCase()}`}function gu(e){return e.length?e.map((t,n)=>`${n===0?"M":"L"}${t.x} ${t.y}`).join(" "):""}function Xv({statusCounts:e,metrics:t,onRefresh:n}){var A;const s=(e.open||0)+(e.pending||0),i=t!=null&&t.avg_first_reply_seconds?Number(t.avg_first_reply_seconds)/60:null,a=i?`${i.toFixed(1)}m`:"-",l=(t==null?void 0:t.conversion_rate)??(t==null?void 0:t.conversion_rate_percent)??null,c=`${(l==null?18.4:l>1?l:l*100).toFixed(1)}%`,d=((A=t==null?void 0:t.message_volume)==null?void 0:A.length)>0?t.message_volume.slice(-10):Yv,x=Math.max(...d.map(w=>w.in_count+w.out_count),1),p=d.length*42+30,y=220,L=150,m=180,T=d.map((w,P)=>{const B=(w.in_count+w.out_count)/x*L,V=w.in_count/x*L,q=w.out_count/x*L;return{x:22+P*42,totalHeight:B,inHeight:V,outHeight:q}}),N=gu(T.map((w,P)=>({x:w.x+10,y:m-w.inHeight}))),u=gu(T.map(w=>({x:w.x+10,y:m-w.outHeight}))),f=Array.from(new Set([0,Math.floor(d.length/3),Math.floor(2*d.length/3),d.length-1])),g=Math.round((t==null?void 0:t.team_efficiency)||94),j=((t==null?void 0:t.top_tags)||[]).slice(0,3);return r.jsxs("section",{className:"dashboard-layout",children:[r.jsxs("div",{className:"dashboard-main",children:[r.jsxs("header",{className:"dashboard-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dashboard-kicker",children:"PODOPIE Enterprise"}),r.jsx("h2",{className:"dashboard-title",children:"Dashboard"}),r.jsx("div",{className:"dashboard-subtitle",children:"Marketing Analytics & WhatsApp CRM Overview"})]}),r.jsxs("div",{className:"dashboard-actions",children:[r.jsxs("button",{className:"dash-filter",type:"button",children:[r.jsx("span",{className:"dash-filter-icon","aria-hidden":"true"}),"Ultimos 30 dias"]}),r.jsx("button",{className:"primary",type:"button",onClick:n,children:"Generar Reporte"})]})]}),r.jsxs("div",{className:"dashboard-kpis",children:[r.jsxs("div",{className:"dash-kpi",children:[r.jsxs("div",{className:"dash-kpi-top",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-kpi-label",children:"Conversaciones activas"}),r.jsx("div",{className:"dash-kpi-value",children:s.toLocaleString()})]}),r.jsx("div",{className:"dash-kpi-icon",children:"C"})]}),r.jsx("div",{className:"dash-kpi-change up",children:"+12.5%"})]}),r.jsxs("div",{className:"dash-kpi",children:[r.jsxs("div",{className:"dash-kpi-top",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-kpi-label",children:"Tiempo de respuesta"}),r.jsx("div",{className:"dash-kpi-value",children:a})]}),r.jsx("div",{className:"dash-kpi-icon",children:"T"})]}),r.jsx("div",{className:"dash-kpi-change down",children:"-0.8m"})]}),r.jsxs("div",{className:"dash-kpi",children:[r.jsxs("div",{className:"dash-kpi-top",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-kpi-label",children:"Tasa de conversion"}),r.jsx("div",{className:"dash-kpi-value",children:c})]}),r.jsx("div",{className:"dash-kpi-icon",children:"%"})]}),r.jsx("div",{className:"dash-kpi-change up",children:"+2.1%"})]})]}),r.jsxs("div",{className:"dash-card dash-chart-card",children:[r.jsxs("div",{className:"dash-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-card-title",children:"Flujo de Mensajes"}),r.jsx("div",{className:"dash-card-subtitle",children:"Volumen diario"})]}),r.jsxs("div",{className:"dash-legend",children:[r.jsxs("span",{className:"dash-legend-item",children:[r.jsx("span",{className:"dash-legend-dot in"})," Entrantes"]}),r.jsxs("span",{className:"dash-legend-item",children:[r.jsx("span",{className:"dash-legend-dot out"})," Salientes"]})]})]}),r.jsx("div",{className:"dash-chart",children:r.jsxs("svg",{className:"dash-chart-svg",viewBox:`0 0 ${p} ${y}`,preserveAspectRatio:"none",children:[r.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"60",x2:p,y2:"60"}),r.jsx("line",{className:"dash-chart-grid",x1:"0",y1:"120",x2:p,y2:"120"}),T.map((w,P)=>r.jsxs("g",{children:[r.jsx("rect",{className:"dash-bar in",x:w.x,y:m-w.inHeight,width:"20",height:w.inHeight,rx:"6"}),r.jsx("rect",{className:"dash-bar out",x:w.x,y:m-w.inHeight-w.outHeight,width:"20",height:w.outHeight,rx:"6"})]},`bar-${P}`)),r.jsx("path",{className:"dash-line in",d:N}),r.jsx("path",{className:"dash-line out",d:u})]})}),r.jsx("div",{className:"dash-chart-labels",children:f.map(w=>{var P;return r.jsx("span",{children:Kv((P=d[w])==null?void 0:P.day)},`label-${w}`)})})]}),r.jsxs("div",{className:"dashboard-lower",children:[r.jsxs("div",{className:"dash-card",children:[r.jsxs("div",{className:"dash-card-header",children:[r.jsx("div",{className:"dash-card-title",children:"Ultimas etiquetas detectadas"}),r.jsx("button",{className:"link-button",type:"button",children:"Ver todo"})]}),r.jsxs("div",{className:"dash-tag-table",children:[r.jsxs("div",{className:"dash-tag-head",children:[r.jsx("span",{children:"Etiqueta"}),r.jsx("span",{children:"Frecuencia"}),r.jsx("span",{children:"Accion"})]}),j.map(w=>r.jsxs("div",{className:"dash-tag-row",children:[r.jsx("span",{className:"dash-tag-chip",children:w.name}),r.jsx("span",{className:"dash-tag-count",children:w.count}),r.jsx("span",{className:"dash-tag-action",children:">"})]},w.name)),!j.length&&r.jsx("div",{className:"empty-state",children:"Sin etiquetas recientes"})]})]}),r.jsxs("div",{className:"dash-card",children:[r.jsxs("div",{className:"dash-card-header",children:[r.jsx("div",{className:"dash-card-title",children:"Actividad de Campana"}),r.jsx("span",{className:"dash-pill",children:"Monitor"})]}),r.jsxs("div",{className:"dash-campaign",children:[r.jsx("div",{className:"dash-campaign-title",children:'Campana de Verano "Pies Sanos"'}),r.jsxs("div",{className:"dash-campaign-meta",children:[r.jsx("span",{className:"dash-pill solid",children:"84% enviado"}),r.jsx("span",{className:"dash-muted",children:"Hace 2 horas"})]}),r.jsx("div",{className:"dash-progress",children:r.jsx("div",{className:"dash-progress-fill",style:{width:"84%"}})}),r.jsx("div",{className:"dash-muted",children:"1,240 destinatarios"})]})]})]})]}),r.jsxs("aside",{className:"dashboard-side",children:[r.jsxs("div",{className:"dash-card",children:[r.jsx("div",{className:"dash-card-title",children:"Performance de Operadores"}),r.jsx("div",{className:"dash-card-subtitle",children:"Top 5 leaderboard - hoy"}),r.jsx("div",{className:"dash-operator-list",children:[{name:"Lucia Fernandez",role:"Especialista CRM",resolved:84,pending:3},{name:"Ricardo Gomez",role:"Atencion Pacientes",resolved:71,pending:8},{name:"Ana Martinez",role:"Soporte Medico",resolved:65,pending:12}].map(w=>r.jsxs("div",{className:"dash-operator",children:[r.jsx("div",{className:"dash-operator-avatar",children:w.name[0]}),r.jsxs("div",{className:"dash-operator-meta",children:[r.jsx("div",{className:"dash-operator-name",children:w.name}),r.jsx("div",{className:"dash-operator-role",children:w.role}),r.jsxs("div",{className:"dash-operator-stats",children:[r.jsxs("div",{children:[r.jsx("div",{className:"dash-stat-label",children:"Resueltos"}),r.jsx("div",{className:"dash-stat-value",children:w.resolved})]}),r.jsxs("div",{children:[r.jsx("div",{className:"dash-stat-label",children:"Pendientes"}),r.jsx("div",{className:"dash-stat-value danger",children:w.pending})]})]})]})]},w.name))})]}),r.jsxs("div",{className:"dash-card",children:[r.jsx("div",{className:"dash-card-title",children:"Eficiencia de Equipo"}),r.jsxs("div",{className:"dash-efficiency",children:[r.jsxs("div",{className:"dash-efficiency-value",children:[g,"%"]}),r.jsx("div",{className:"dash-progress",children:r.jsx("div",{className:"dash-progress-fill",style:{width:`${g}%`}})}),r.jsx("div",{className:"dash-muted",children:"Objetivo diario: 500 conversiones"})]})]})]})]})}const Jv={draft:"BORRADOR",scheduled:"PROGRAMADA",sending:"ENVIANDO",sent:"FINALIZADA",failed:"ERROR"};function Zv({campaignForm:e,setCampaignForm:t,campaignFilter:n,setCampaignFilter:s,templates:i,campaigns:a,selectedCampaignId:l,campaignMessages:o,users:c,tags:d,selectedTemplate:x,statusOptions:p,onCreateCampaign:y,onLoadCampaigns:L,onLoadCampaignMessages:m,onSendCampaign:T,formatDate:N}){const[u,f]=v.useState(""),[g,j]=v.useState(!1),{pushToast:A}=Vo(),[w,P]=v.useState(!1),[C,B]=v.useState(!1),[V,q]=v.useState(!1),[ie,fe]=v.useState(!1),[ge,be]=v.useState(null),[le,je]=v.useState({name:"",description:"",rules:[]}),[I,F]=v.useState(!1),[S,$]=v.useState([]),[H,ee]=v.useState(!1),[b,G]=v.useState(null),[X,U]=v.useState([]);v.useEffect(()=>{re(),he()},[]);async function re(){try{const _=await ue("/api/audiences");_&&_.segments&&U(_.segments)}catch(_){console.error("Failed to load segments",_)}}async function he(){try{const _=await ue("/api/contacts/stats");G(_||null)}catch(_){console.error("Failed to load Odoo stats",_),G(null)}}async function pe(){fe(!0),be(null);try{const _=await Te("/api/contacts/import-odoo",{source:"odoo"});be(_),re(),he(),A({message:"Contactos importados correctamente"})}catch(_){be({error:_.message||"Error al importar"}),A({type:"error",message:_.message||"Error al importar contactos"})}finally{fe(!1)}}async function ve(_){if(_.preventDefault(),!!le.name.trim()){F(!0);try{await Te("/api/audiences",{name:le.name,description:le.description,rules_json:le.rules.length?le.rules:[{field:"all",operator:"eq",value:!0}]}),B(!1),je({name:"",description:"",rules:[]}),re(),A({message:"Segmento creado correctamente"})}catch(D){A({type:"error",message:D.message||"No se pudo crear el segmento"})}finally{F(!1)}}}async function Ie(){ee(!0);try{const _=await ue("/api/contacts");$((_==null?void 0:_.contacts)||[])}catch(_){console.error("Failed to load contacts",_)}finally{ee(!1)}}function We(){q(!0),Ie()}const Ue=v.useMemo(()=>{const _={id:"odoo",name:"odoo",subtitle:"Origen: Odoo",count:(b==null?void 0:b.total)||0,type:"odoo"},D=(d||[]).slice(0,6).map((ye,Qe)=>({id:ye.id||`tag-${ye.name}-${Qe}`,name:ye.name,subtitle:"Segmento por etiqueta",count:ye.count||ye.total||0,type:"tag"})),oe=X.map(ye=>({id:ye.id,name:ye.name,subtitle:ye.description||"Segmento personalizado",count:ye.estimated_count||0,type:"custom"}));return[_,...oe,...D]},[d,X,b]),He=v.useMemo(()=>{const _=u.trim().toLowerCase();return _?i.filter(D=>{var Qe,Ct;const oe=((Qe=D.name)==null?void 0:Qe.toLowerCase())||"",ye=((Ct=D.category)==null?void 0:Ct.toLowerCase())||"";return oe.includes(_)||ye.includes(_)}):i},[u,i]),O=v.useMemo(()=>Ue.find(_=>_.name===n.tag),[Ue,n.tag]),ce=v.useMemo(()=>n.tag?`tag:${n.tag}`:n.assigned_user_id?`assigned:${n.assigned_user_id}`:n.status?`status:${n.status}`:n.verified_only?"verified":"",[n]);function Oe(_){s(D=>{const oe={...D,status:"",tag:"",assigned_user_id:"",verified_only:!1};return _.startsWith("tag:")?oe.tag=_.slice(4):_.startsWith("status:")?oe.status=_.slice(7):_.startsWith("assigned:")?oe.assigned_user_id=_.slice(9):_==="verified"&&(oe.verified_only=!0),oe})}function Dt(_){t(D=>({...D,template_id:_}))}return r.jsxs("section",{className:"campaigns-page",children:[r.jsxs("header",{className:"campaigns-header",children:[r.jsxs("div",{className:"campaigns-title",children:[r.jsx("span",{className:"campaigns-mark"}),r.jsxs("div",{children:[r.jsxs("div",{className:"campaigns-title-row",children:[r.jsx("span",{className:"campaigns-brand",children:"PODOPIE"}),r.jsx("span",{className:"campaigns-divider"}),r.jsx("span",{className:"campaigns-heading",children:"Campaigns"})]}),r.jsx("div",{className:"campaigns-subtitle",children:"Gestion de envios masivos y audiencias para CRM WhatsApp"})]})]}),r.jsxs("div",{className:"campaigns-actions",children:[r.jsx("button",{className:"campaigns-ghost",type:"button",onClick:()=>P(!0),children:"Importar Contactos"}),r.jsx("button",{className:"campaigns-danger",type:"button",onClick:()=>B(!0),children:"+ Nuevo Segmento"})]})]}),w&&r.jsx("div",{className:"modal-overlay",onClick:()=>P(!1),children:r.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Importar Contactos"}),r.jsx("button",{className:"modal-close",onClick:()=>P(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("p",{children:"Importar contactos desde Odoo (pacientes y partners)"}),ge&&r.jsx("div",{className:`import-result ${ge.error?"error":"success"}`,children:ge.error?r.jsxs("span",{children:[" ",ge.error]}):r.jsxs("span",{children:[" Importados: ",ge.imported||0," contactos (",ge.new||0," nuevos, ",ge.updated||0," actualizados)"]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"btn-primary",onClick:pe,disabled:ie,children:ie?"Importando...":" Importar desde Odoo"}),r.jsx("button",{className:"btn-secondary",onClick:We,children:" Ver Contactos Existentes"})]})]})]})}),C&&r.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:r.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Nuevo Segmento"}),r.jsx("button",{className:"modal-close",onClick:()=>B(!1),children:""})]}),r.jsxs("form",{className:"modal-body",onSubmit:ve,children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Nombre del Segmento"}),r.jsx("input",{type:"text",placeholder:"Ej: Pacientes Onicomicosis",value:le.name,onChange:_=>je({...le,name:_.target.value}),required:!0})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Descripcin"}),r.jsx("textarea",{placeholder:"Descripcin opcional...",value:le.description,onChange:_=>je({...le,description:_.target.value}),rows:"2"})]}),r.jsxs("div",{className:"form-field",children:[r.jsx("span",{children:"Reglas de Filtro"}),r.jsxs("select",{onChange:_=>{_.target.value&&je({...le,rules:[...le.rules,{field:_.target.value,operator:"eq",value:""}]})},children:[r.jsx("option",{value:"",children:"+ Agregar filtro..."}),r.jsx("option",{value:"is_patient",children:"Es paciente"}),r.jsx("option",{value:"has_phone",children:"Tiene telfono"}),r.jsx("option",{value:"tag",children:"Tiene etiqueta"})]}),le.rules.map((_,D)=>r.jsxs("div",{className:"filter-rule",children:[r.jsx("span",{className:"rule-badge",children:_.field}),r.jsx("button",{type:"button",onClick:()=>{je({...le,rules:le.rules.filter((oe,ye)=>ye!==D)})},children:""})]},D))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-ghost",onClick:()=>B(!1),children:"Cancelar"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:I,children:I?"Guardando...":"Crear Segmento"})]})]})]})}),V&&r.jsx("div",{className:"modal-overlay",onClick:()=>q(!1),children:r.jsxs("div",{className:"modal-content modal-large",onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:["Contactos (",S.length,")"]}),r.jsx("button",{className:"modal-close",onClick:()=>q(!1),children:""})]}),r.jsx("div",{className:"modal-body",children:H?r.jsx("div",{className:"loading",children:"Cargando contactos..."}):S.length===0?r.jsx("div",{className:"empty-state",children:"No hay contactos. Importa desde Odoo."}):r.jsxs("div",{className:"contacts-table",children:[r.jsxs("div",{className:"contacts-header",children:[r.jsx("span",{children:"Nombre"}),r.jsx("span",{children:"Telfono"}),r.jsx("span",{children:"Email"}),r.jsx("span",{children:"Tipo"})]}),S.slice(0,50).map(_=>r.jsxs("div",{className:"contacts-row",children:[r.jsx("span",{children:_.name}),r.jsx("span",{children:_.phone_e164||"-"}),r.jsx("span",{children:_.email||"-"}),r.jsx("span",{className:"contact-type",children:_.is_patient?"Paciente":"Contacto"})]},_.id)),S.length>50&&r.jsxs("div",{className:"contacts-more",children:["...y ",S.length-50," ms"]})]})})]})}),r.jsxs("div",{className:"campaigns-layout",children:[r.jsxs("aside",{className:"campaigns-audiences",children:[r.jsx("div",{className:"campaigns-section-title",children:"Mis audiencias"}),r.jsx("div",{className:"audience-list",children:Ue.map(_=>r.jsxs("button",{type:"button",className:`audience-card ${n.tag===_.name?"active":""}`,onClick:()=>{if(_.type==="odoo"){We();return}s(D=>({...D,tag:_.name}))},children:[r.jsxs("div",{className:"audience-title",children:[r.jsx("span",{children:_.name}),r.jsx("span",{className:"audience-count",children:_.count})]}),r.jsx("div",{className:"audience-subtitle",children:_.subtitle})]},_.id))})]}),r.jsxs("div",{className:"campaigns-templates",children:[r.jsxs("div",{className:"campaigns-section-header",children:[r.jsx("div",{className:"campaigns-section-title",children:"Plantillas Meta (HSM)"}),r.jsxs("div",{className:"template-search",children:[r.jsx("span",{className:"template-search-icon","aria-hidden":"true"}),r.jsx("input",{type:"text",placeholder:"Buscar plantilla...",value:u,onChange:_=>f(_.target.value)})]})]}),r.jsxs("div",{className:"template-grid",children:[He.map(_=>{const D=_.is_active?"APROBADA":"PENDIENTE",oe=_.is_active?"approved":"pending",ye=(_.category||"Marketing").toUpperCase(),Qe=_.id===e.template_id;return r.jsxs("div",{className:`template-card ${Qe?"selected":""}`,children:[r.jsxs("div",{className:"template-head",children:[r.jsx("div",{className:"template-name",children:_.name}),r.jsx("span",{className:`template-status ${oe}`,children:D})]}),r.jsx("div",{className:"template-category",children:ye}),r.jsx("div",{className:"template-preview",children:_.body_preview||"Sin preview"}),r.jsx("button",{className:"template-action",type:"button",onClick:()=>Dt(_.id),children:"Previsualizar"})]},_.id)}),!He.length&&r.jsx("div",{className:"empty-state",children:"Sin plantillas disponibles"})]})]}),r.jsxs("aside",{className:"campaigns-create",children:[r.jsx("div",{className:"campaigns-section-title",children:"Nueva campana"}),r.jsxs("form",{className:"campaigns-form",onSubmit:y,children:[r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Nombre de campana"}),r.jsx("input",{type:"text",placeholder:"Ej: Promo Onicomicosis Mar",value:e.name,onChange:_=>t(D=>({...D,name:_.target.value}))})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Seleccionar audiencia"}),r.jsxs("select",{value:ce,onChange:_=>Oe(_.target.value),children:[r.jsx("option",{value:"",children:"Selecciona un segmento..."}),Ue.filter(_=>_.type!=="odoo").map(_=>r.jsx("option",{value:`tag:${_.name}`,children:_.name},`seg-${_.id}`)),r.jsx("option",{value:"verified",children:"Solo verificados"}),r.jsx("option",{value:"assigned:unassigned",children:"Sin asignar"}),p.map(_=>r.jsxs("option",{value:`status:${_}`,children:["Status: ",_]},`status-${_}`))]})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Plantilla Meta"}),r.jsxs("select",{value:e.template_id,onChange:_=>t(D=>({...D,template_id:_.target.value})),children:[r.jsx("option",{value:"",children:"Selecciona plantilla..."}),i.map(_=>r.jsx("option",{value:_.id,children:_.name},_.id))]})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Programacion"}),r.jsx("input",{type:"datetime-local",value:e.scheduled_for,onChange:_=>t(D=>({...D,scheduled_for:_.target.value}))})]}),r.jsx("button",{className:"campaigns-advanced-toggle",type:"button",onClick:()=>j(_=>!_),children:g?"Ocultar filtros avanzados":"Filtros avanzados"}),g&&r.jsxs("div",{className:"campaigns-advanced",children:[r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Status filtro"}),r.jsxs("select",{value:n.status,onChange:_=>s(D=>({...D,status:_.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),p.map(_=>r.jsx("option",{value:_,children:_},_))]})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Asignado"}),r.jsxs("select",{value:n.assigned_user_id,onChange:_=>s(D=>({...D,assigned_user_id:_.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"unassigned",children:"Sin asignar"}),c.map(_=>r.jsx("option",{value:_.id,children:_.name},_.id))]})]}),r.jsxs("label",{className:"campaigns-field",children:[r.jsx("span",{children:"Tag"}),r.jsxs("select",{value:n.tag,onChange:_=>s(D=>({...D,tag:_.target.value})),children:[r.jsx("option",{value:"",children:"Todos"}),d.map(_=>r.jsx("option",{value:_.name,children:_.name},_.id))]})]}),r.jsxs("label",{className:"campaigns-toggle",children:[r.jsx("input",{type:"checkbox",checked:n.verified_only,onChange:_=>s(D=>({...D,verified_only:_.target.checked}))}),"Solo verificados"]})]}),r.jsx("button",{className:"campaigns-launch",type:"submit",children:"Lanzar Campana"}),r.jsxs("div",{className:"campaigns-hint",children:["Se enviaran aproximadamente"," ",r.jsx("strong",{children:(O==null?void 0:O.count)||0})," mensajes HSM"]}),r.jsx("div",{className:"campaigns-preview-box",children:(x==null?void 0:x.body_preview)||"Selecciona una plantilla para ver preview"})]})]})]}),r.jsxs("section",{className:"campaigns-history",children:[r.jsxs("div",{className:"campaigns-history-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"campaigns-history-title",children:"Historial de Envios"}),r.jsx("div",{className:"campaigns-history-subtitle",children:"Ultimos 30 dias"})]}),r.jsx("button",{className:"campaigns-link",type:"button",onClick:L,children:"Ver todo el historial"})]}),r.jsxs("div",{className:"history-table",children:[r.jsxs("div",{className:"history-head",children:[r.jsx("span",{children:"Campana / Fecha"}),r.jsx("span",{children:"Alcance"}),r.jsx("span",{children:"Tasa de lectura"}),r.jsx("span",{children:"Respuestas"}),r.jsx("span",{children:"Estado"}),r.jsx("span",{children:"Acciones"})]}),a.map(_=>{const D=Jv[_.status]||_.status,oe=_.audience_count||_.messages_count||_.total||"--";return r.jsxs("div",{className:"history-row",children:[r.jsxs("div",{className:"history-title",children:[r.jsx("div",{className:"history-name",children:_.name}),r.jsx("div",{className:"history-date",children:N(_.created_at)})]}),r.jsxs("div",{className:"history-metric",children:[r.jsx("div",{className:"history-value",children:oe}),r.jsx("div",{className:"history-label",children:"contactos"})]}),r.jsxs("div",{className:"history-meter",children:[r.jsx("div",{className:"history-value",children:"--"}),r.jsx("div",{className:"history-bar",children:r.jsx("div",{className:"history-bar-fill",style:{width:"0%"}})})]}),r.jsxs("div",{className:"history-metric",children:[r.jsx("div",{className:"history-value",children:"--"}),r.jsx("div",{className:"history-label",children:"mensajes"})]}),r.jsx("div",{className:`history-status ${_.status}`,children:D}),r.jsxs("div",{className:"history-actions",children:[r.jsx("button",{className:"campaigns-ghost small",type:"button",onClick:()=>m(_.id),children:"Ver mensajes"}),r.jsx("button",{className:"campaigns-danger small",type:"button",onClick:()=>T(_.id),disabled:_.status==="sending",children:"Enviar"})]})]},_.id)}),!a.length&&r.jsx("div",{className:"empty-state",children:"Sin campanas registradas"})]}),l&&r.jsxs("div",{className:"campaigns-messages",children:[r.jsx("div",{className:"campaigns-history-title",children:"Mensajes"}),r.jsxs("div",{className:"history-table",children:[r.jsxs("div",{className:"history-head",children:[r.jsx("span",{children:"WA"}),r.jsx("span",{children:"Status"}),r.jsx("span",{children:"Enviado"})]}),o.map(_=>r.jsxs("div",{className:"history-row",children:[r.jsx("span",{children:_.wa_id}),r.jsx("span",{children:_.status}),r.jsx("span",{children:N(_.sent_at)})]},_.id))]})]})]})]})}const ey={admin:{title:"Administrador",subtitle:"Acceso total",tone:"alert"},recepcion:{title:"Operador",subtitle:"Atencion al cliente",tone:"info"},caja:{title:"Supervisor",subtitle:"Auditoria y gestion",tone:"dark"},marketing:{title:"Marketing",subtitle:"Crecimiento y campanas",tone:"info"},doctor:{title:"Doctor",subtitle:"Atencion al cliente",tone:"dark"}},vu=[{id:"chat",label:"Chat"},{id:"dashboard",label:"Dashboard"},{id:"campaigns",label:"Campanas"}],yu=[{id:"general",label:"General"},{id:"users",label:"Gestion de Usuarios"},{id:"bot",label:"Configuracion de Bot"},{id:"templates",label:"Plantillas de Meta"},{id:"audit",label:"Registros / Auditoria"},{id:"odoo",label:"Integracion Odoo"}];function xu(e){return ey[e]||{title:e,subtitle:"Acceso personalizado",tone:"info"}}function ty({settingsTab:e,setSettingsTab:t,rolePermissions:n,setRolePermissions:s,isAdmin:i,adminUsers:a,userForm:l,setUserForm:o,roleOptions:c,handleUserSubmit:d,handleUserDelete:x,defaultRolePermissions:p,handleRoleDelete:y}){const[L,m]=v.useState(""),[T,N]=v.useState(!1),[u,f]=v.useState(""),[g,j]=v.useState(null),[A,w]=v.useState(!1),[P,C]=v.useState("create"),[B,V]=v.useState("recepcion"),[q,ie]=v.useState({modules:{},settings:{}}),fe=v.useMemo(()=>{const b=L.trim().toLowerCase(),G=a||[];return b?G.filter(X=>{var he,pe;const U=((he=X.name)==null?void 0:he.toLowerCase())||"",re=((pe=X.email)==null?void 0:pe.toLowerCase())||"";return U.includes(b)||re.includes(b)}):G},[a,L]);function ge(b){const G=(n==null?void 0:n[b])||(p==null?void 0:p[b])||{modules:{},settings:{}};return{modules:{...G.modules||{}},settings:{...G.settings||{}}}}function be(b,G="edit"){C(G),V(b),ie(ge(b)),w(!0)}function le(b,G,X){ie(U=>{const re={...U},he={...re[b]||{}},pe={...he[G]||{}},ve=!pe[X];return pe[X]=ve,X==="write"&&ve&&(pe.read=!0),X==="read"&&!ve&&(pe.write=!1),he[G]=pe,re[b]=he,re})}function je(){B&&(s(b=>({...b,[B]:q})),w(!1))}function I(){B&&y&&y(B),w(!1)}function F(b,G,X,U){i&&s(re=>{var Ue,He;const he={...re},pe={modules:{...(Ue=he[b])==null?void 0:Ue.modules},settings:{...(He=he[b])==null?void 0:He.settings}},ve={...pe[G]},Ie={...ve[X]},We=!Ie[U];return Ie[U]=We,U==="write"&&We&&(Ie.read=!0),U==="read"&&!We&&(Ie.write=!1),ve[X]=Ie,pe[G]=ve,he[b]=pe,he})}function S(b){return xu(b).title.toUpperCase()}function $(b,G){return b!=null&&b.id?`OP-${b.id.slice(-4).toUpperCase()}`:`OP-${String(G+1).padStart(4,"0")}`}function H(b){o({id:b.id,name:b.name,email:b.email,role:b.role,password:"",is_active:b.is_active}),N(!0)}function ee(){o({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),N(!0)}return r.jsxs("div",{className:"users-page",children:[r.jsxs("header",{className:"users-header",children:[r.jsxs("div",{className:"users-title-row",children:[r.jsx("span",{className:"users-kicker"}),r.jsxs("div",{children:[r.jsx("div",{className:"users-title",children:"Gestion de Usuarios"}),r.jsx("div",{className:"users-subtitle",children:"Administra los accesos y roles de los operadores de tu empresa."})]})]}),r.jsxs("div",{className:"users-actions",children:[e==="list"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"users-search",children:[r.jsx("span",{className:"users-search-icon","aria-hidden":"true"}),r.jsx("input",{type:"text",placeholder:"Buscar usuario...",value:L,onChange:b=>m(b.target.value)})]}),r.jsx("button",{className:"settings-primary",type:"button",onClick:ee,children:"Nuevo Usuario"})]}),e==="roles"&&r.jsx("button",{className:"settings-primary",type:"button",onClick:()=>be("recepcion","create"),children:"+ Nuevo Rol"})]})]}),r.jsxs("div",{className:"users-tabs",children:[r.jsx("button",{className:`users-tab ${e==="list"?"active":""}`,type:"button",onClick:()=>t("list"),children:"Lista de Usuarios"}),r.jsx("button",{className:`users-tab ${e==="roles"?"active":""}`,type:"button",onClick:()=>t("roles"),children:"Roles y Permisos"})]}),e==="list"&&r.jsxs("div",{className:"users-table",children:[r.jsxs("div",{className:"users-table-head",children:[r.jsx("span",{children:"Nombre / Usuario"}),r.jsx("span",{children:"Email"}),r.jsx("span",{children:"Rol"}),r.jsx("span",{children:"Estado"}),r.jsx("span",{children:"Acciones"})]}),fe.map((b,G)=>{var X;return r.jsxs("div",{className:"users-row",children:[r.jsxs("div",{className:"users-cell user-name",children:[r.jsx("div",{className:"user-avatar",children:((X=b.name)==null?void 0:X[0])||"?"}),r.jsxs("div",{children:[r.jsx("div",{className:"user-title",children:b.name}),r.jsx("div",{className:"user-id",children:$(b,G)})]})]}),r.jsx("div",{className:"users-cell",children:b.email}),r.jsx("div",{className:"users-cell",children:r.jsx("span",{className:`role-pill ${b.role}`,children:S(b.role)})}),r.jsx("div",{className:"users-cell",children:r.jsx("span",{className:`status-pill ${b.is_active?"active":"inactive"}`,children:b.is_active?"Activo":"Inactivo"})}),r.jsx("div",{className:"users-cell",children:r.jsxs("div",{className:"users-actions-menu",children:[r.jsx("button",{className:"users-action",type:"button",onClick:()=>f(U=>U===b.id?"":b.id),children:"..."}),u===b.id&&r.jsxs("div",{className:"users-menu",children:[r.jsx("button",{type:"button",onClick:()=>{f(""),H(b)},children:"Editar"}),r.jsx("button",{type:"button",onClick:()=>{f(""),j(b)},children:"Eliminar"})]})]})})]},b.id)}),!fe.length&&r.jsx("div",{className:"empty-state",children:"Sin usuarios para mostrar"})]}),e==="roles"&&r.jsx("div",{className:"roles-grid",children:c.map(b=>{const G=xu(b),X=n==null?void 0:n[b];return r.jsxs("div",{className:"role-card",children:[r.jsxs("div",{className:"role-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"role-title",children:G.title}),r.jsx("div",{className:`role-subtitle ${G.tone}`,children:G.subtitle})]}),r.jsx("button",{className:"role-edit",type:"button",onClick:()=>be(b,"edit"),children:"edit"})]}),r.jsxs("div",{className:"role-permissions",children:[r.jsxs("div",{className:"perm-head",children:[r.jsx("span",{}),r.jsx("span",{children:"Lectura"}),r.jsx("span",{children:"Escritura"})]}),vu.map(U=>{var re,he,pe,ve;return r.jsxs("div",{className:"perm-row",children:[r.jsx("span",{children:U.label}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((he=(re=X==null?void 0:X.modules)==null?void 0:re[U.id])==null?void 0:he.read)||!1,disabled:!i,onChange:()=>F(b,"modules",U.id,"read")}),r.jsx("span",{})]}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((ve=(pe=X==null?void 0:X.modules)==null?void 0:pe[U.id])==null?void 0:ve.write)||!1,disabled:!i,onChange:()=>F(b,"modules",U.id,"write")}),r.jsx("span",{})]})]},U.id)})]}),r.jsxs("div",{className:"role-settings",children:[r.jsx("div",{className:"role-settings-title",children:"Configuracion"}),yu.map(U=>{var re,he,pe,ve;return r.jsxs("div",{className:"perm-row",children:[r.jsx("span",{children:U.label}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((he=(re=X==null?void 0:X.settings)==null?void 0:re[U.id])==null?void 0:he.read)||!1,disabled:!i,onChange:()=>F(b,"settings",U.id,"read")}),r.jsx("span",{})]}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((ve=(pe=X==null?void 0:X.settings)==null?void 0:pe[U.id])==null?void 0:ve.write)||!1,disabled:!i,onChange:()=>F(b,"settings",U.id,"write")}),r.jsx("span",{})]})]},U.id)})]})]},b)})}),T&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-card",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("div",{className:"modal-title",children:l.id?"Editar usuario":"Crear usuario"}),r.jsx("button",{className:"modal-close",type:"button",onClick:()=>N(!1),children:"x"})]}),r.jsxs("form",{className:"form-grid",onSubmit:async b=>{await d(b),N(!1)},children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Nombre"}),r.jsx("input",{type:"text",value:l.name,onChange:b=>o(G=>({...G,name:b.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:l.email,onChange:b=>o(G=>({...G,email:b.target.value})),disabled:!!l.id})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Rol"}),r.jsx("select",{value:l.role,onChange:b=>o(G=>({...G,role:b.target.value})),children:c.map(b=>r.jsx("option",{value:b,children:b},b))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Password"}),r.jsx("input",{type:"password",value:l.password,onChange:b=>o(G=>({...G,password:b.target.value}))})]}),r.jsxs("label",{className:"toggle",children:[r.jsx("input",{type:"checkbox",checked:l.is_active,onChange:b=>o(G=>({...G,is_active:b.target.checked}))}),"Activo"]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"primary",type:"submit",children:l.id?"Guardar cambios":"Crear"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>N(!1),children:"Cancelar"})]})]})]})}),g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-card",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("div",{className:"modal-title",children:"Eliminar usuario"}),r.jsx("button",{className:"modal-close",type:"button",onClick:()=>j(null),children:"x"})]}),r.jsxs("p",{className:"modal-text",children:["Vas a desactivar a ",r.jsx("strong",{children:g.email}),". Continuar?"]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"danger",type:"button",onClick:()=>{x==null||x(g.id),j(null)},children:"Eliminar"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>j(null),children:"Cancelar"})]})]})}),A&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-card modal-lg",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("div",{className:"modal-title",children:P==="create"?"Nuevo rol":"Editar rol"}),r.jsx("button",{className:"modal-close",type:"button",onClick:()=>w(!1),children:"x"})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Rol"}),P==="edit"?r.jsx("select",{value:B,disabled:!0,children:c.map(b=>r.jsx("option",{value:b,children:b},b))}):r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",list:"role-options",placeholder:"nuevo-rol",value:B,onChange:b=>V(b.target.value)}),r.jsx("datalist",{id:"role-options",children:c.map(b=>r.jsx("option",{value:b},b))})]})]}),r.jsxs("div",{className:"role-permissions",children:[r.jsxs("div",{className:"perm-head",children:[r.jsx("span",{children:"Modulos"}),r.jsx("span",{children:"Lectura"}),r.jsx("span",{children:"Escritura"})]}),vu.map(b=>{var G,X,U,re;return r.jsxs("div",{className:"perm-row",children:[r.jsx("span",{children:b.label}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((X=(G=q==null?void 0:q.modules)==null?void 0:G[b.id])==null?void 0:X.read)||!1,onChange:()=>le("modules",b.id,"read")}),r.jsx("span",{})]}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((re=(U=q==null?void 0:q.modules)==null?void 0:U[b.id])==null?void 0:re.write)||!1,onChange:()=>le("modules",b.id,"write")}),r.jsx("span",{})]})]},b.id)})]}),r.jsxs("div",{className:"role-settings",children:[r.jsxs("div",{className:"perm-head",children:[r.jsx("span",{children:"Configuracion"}),r.jsx("span",{children:"Lectura"}),r.jsx("span",{children:"Escritura"})]}),yu.map(b=>{var G,X,U,re;return r.jsxs("div",{className:"perm-row",children:[r.jsx("span",{children:b.label}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((X=(G=q==null?void 0:q.settings)==null?void 0:G[b.id])==null?void 0:X.read)||!1,onChange:()=>le("settings",b.id,"read")}),r.jsx("span",{})]}),r.jsxs("label",{className:"perm-toggle",children:[r.jsx("input",{type:"checkbox",checked:((re=(U=q==null?void 0:q.settings)==null?void 0:U[b.id])==null?void 0:re.write)||!1,onChange:()=>le("settings",b.id,"write")}),r.jsx("span",{})]})]},b.id)})]})]}),r.jsxs("div",{className:"form-actions",children:[P==="edit"&&r.jsx("button",{className:"danger",type:"button",onClick:I,children:"Eliminar rol"}),r.jsx("button",{className:"primary",type:"button",onClick:je,disabled:!B,children:"Guardar"}),r.jsx("button",{className:"ghost",type:"button",onClick:()=>w(!1),children:"Cancelar"})]})]})})]})}function ny({branches:e,branchForm:t,setBranchForm:n,handleBranchSubmit:s,handleBranchDisable:i,services:a,serviceForm:l,setServiceForm:o,handleServiceSubmit:c,handleServiceDisable:d,handleServiceBranchToggle:x,tenantChannels:p,channelForm:y,setChannelForm:L,handleChannelSelect:m,handleChannelSubmit:T}){return r.jsxs("div",{className:"page-grid",children:[r.jsxs("div",{className:"panel",children:[r.jsx("div",{className:"panel-title",children:"Sucursales"}),r.jsxs("div",{className:"table",children:[r.jsxs("div",{className:"table-head",children:[r.jsx("span",{children:"Nombre"}),r.jsx("span",{children:"Codigo"}),r.jsx("span",{children:"Estado"}),r.jsx("span",{children:"Accion"})]}),e.map(N=>r.jsxs("div",{className:"table-row",children:[r.jsx("span",{children:N.name}),r.jsx("span",{children:N.code}),r.jsx("span",{children:N.is_active?"Activa":"Inactiva"}),r.jsxs("div",{className:"row-actions",children:[r.jsx("button",{className:"ghost",onClick:()=>n({id:N.id,code:N.code,name:N.name,address:N.address,lat:N.lat,lng:N.lng,hours_text:N.hours_text,phone:N.phone||"",is_active:N.is_active}),children:"Editar"}),r.jsx("button",{className:"danger",onClick:()=>i(N.id),children:"Desactivar"})]})]},N.id))]}),r.jsx("div",{className:"panel-title",children:t.id?"Editar sucursal":"Crear sucursal"}),r.jsxs("form",{className:"form-grid",onSubmit:s,children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Codigo"}),r.jsx("input",{type:"text",value:t.code,onChange:N=>n(u=>({...u,code:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Nombre"}),r.jsx("input",{type:"text",value:t.name,onChange:N=>n(u=>({...u,name:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Direccion"}),r.jsx("input",{type:"text",value:t.address,onChange:N=>n(u=>({...u,address:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Lat"}),r.jsx("input",{type:"number",value:t.lat,onChange:N=>n(u=>({...u,lat:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Lng"}),r.jsx("input",{type:"number",value:t.lng,onChange:N=>n(u=>({...u,lng:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Telefono"}),r.jsx("input",{type:"text",value:t.phone,onChange:N=>n(u=>({...u,phone:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Horarios"}),r.jsx("textarea",{rows:"3",value:t.hours_text,onChange:N=>n(u=>({...u,hours_text:N.target.value}))})]}),r.jsxs("label",{className:"toggle",children:[r.jsx("input",{type:"checkbox",checked:t.is_active,onChange:N=>n(u=>({...u,is_active:N.target.checked}))}),"Activa"]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),r.jsxs("div",{className:"panel",children:[r.jsx("div",{className:"panel-title",children:"Servicios"}),r.jsxs("div",{className:"table",children:[r.jsxs("div",{className:"table-head",children:[r.jsx("span",{children:"Servicio"}),r.jsx("span",{children:"Precio"}),r.jsx("span",{children:"Estado"}),r.jsx("span",{children:"Accion"})]}),a.map(N=>r.jsxs("div",{className:"table-row",children:[r.jsx("span",{children:N.name}),r.jsxs("span",{children:["Bs ",N.price_bob]}),r.jsx("span",{children:N.is_active?"Activo":"Inactivo"}),r.jsxs("div",{className:"row-actions",children:[r.jsx("button",{className:"ghost",onClick:()=>o({id:N.id,code:N.code,name:N.name,subtitle:N.subtitle||"",description:N.description,price_bob:N.price_bob,duration_min:N.duration_min||"",image_url:N.image_url||"",is_featured:N.is_featured,is_active:N.is_active}),children:"Editar"}),r.jsx("button",{className:"danger",onClick:()=>d(N.id),children:"Desactivar"})]})]},N.id))]}),r.jsx("div",{className:"panel-title",children:l.id?"Editar servicio":"Crear servicio"}),r.jsxs("form",{className:"form-grid",onSubmit:c,children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Codigo"}),r.jsx("input",{type:"text",value:l.code,onChange:N=>o(u=>({...u,code:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Nombre"}),r.jsx("input",{type:"text",value:l.name,onChange:N=>o(u=>({...u,name:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Subtitulo"}),r.jsx("input",{type:"text",value:l.subtitle,onChange:N=>o(u=>({...u,subtitle:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Descripcion"}),r.jsx("textarea",{rows:"3",value:l.description,onChange:N=>o(u=>({...u,description:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Precio (Bs)"}),r.jsx("input",{type:"number",value:l.price_bob,onChange:N=>o(u=>({...u,price_bob:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Duracion (min)"}),r.jsx("input",{type:"number",value:l.duration_min,onChange:N=>o(u=>({...u,duration_min:N.target.value}))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Imagen URL"}),r.jsx("input",{type:"text",value:l.image_url,onChange:N=>o(u=>({...u,image_url:N.target.value}))})]}),r.jsxs("label",{className:"toggle",children:[r.jsx("input",{type:"checkbox",checked:l.is_featured,onChange:N=>o(u=>({...u,is_featured:N.target.checked}))}),"Destacado"]}),r.jsxs("label",{className:"toggle",children:[r.jsx("input",{type:"checkbox",checked:l.is_active,onChange:N=>o(u=>({...u,is_active:N.target.checked}))}),"Activo"]}),l.id&&r.jsxs("div",{className:"field",children:[r.jsx("span",{children:"Disponibilidad por sucursal"}),r.jsx("div",{className:"chip-grid",children:e.map(N=>{var g,j;const u=(j=(g=a.find(A=>A.id===l.id))==null?void 0:g.branches)==null?void 0:j.find(A=>{var P;return(((P=A.branch)==null?void 0:P.id)||A.branch_id)===N.id}),f=(u==null?void 0:u.is_available)||!1;return r.jsxs("label",{className:"chip",children:[r.jsx("input",{type:"checkbox",checked:f,onChange:A=>x(a.find(w=>w.id===l.id),N.id,A.target.checked)}),N.name]},N.id)})})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{className:"primary",type:"submit",children:"Guardar"})})]})]}),r.jsxs("div",{className:"panel",children:[r.jsx("div",{className:"panel-title",children:"Lineas de WhatsApp"}),r.jsxs("div",{className:"table",children:[r.jsxs("div",{className:"table-head",children:[r.jsx("span",{children:"Nombre"}),r.jsx("span",{children:"Phone ID"}),r.jsx("span",{children:"Accion"})]}),(p||[]).map(N=>r.jsxs("div",{className:"table-row",children:[r.jsx("span",{children:N.display_name||"Linea sin nombre"}),r.jsx("span",{children:N.phone_number_id}),r.jsx("button",{className:"ghost",onClick:()=>m(N),children:"Renombrar"})]},N.id)),!(p!=null&&p.length)&&r.jsx("div",{className:"empty-state",children:"Sin lineas registradas"})]}),r.jsx("div",{className:"panel-title",children:y.id?"Editar linea":"Selecciona una linea"}),r.jsxs("form",{className:"form-grid",onSubmit:T,children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Nombre visible"}),r.jsx("input",{type:"text",value:y.display_name,onChange:N=>L(u=>({...u,display_name:N.target.value})),disabled:!y.id})]}),r.jsx("div",{className:"form-actions",children:r.jsx("button",{className:"primary",type:"submit",disabled:!y.id,children:"Guardar"})})]})]})]})}function sy(){var m,T,N,u,f,g,j,A,w,P;const[e,t]=v.useState([]),[n,s]=v.useState(null),[i,a]=v.useState(!0),[l,o]=v.useState("");v.useEffect(()=>{c()},[]);async function c(){a(!0);try{const[C,B]=await Promise.all([ue("/api/admin/bots"),ue("/api/admin/bots/metrics")]);t(C.bots||[]),s(B.metrics),o("")}catch(C){console.error(C),o(C.message||"Error al cargar datos")}finally{a(!1)}}async function d(C,B){try{await nt(`/api/admin/bots/${C}`,{is_active:B}),t(V=>V.map(q=>q.id===C?{...q,is_active:B}:q))}catch(V){o(V.message||"Error al cambiar estado")}}const x=C=>{if(!C)return"Sin actividad reciente";const B=new Date(C),q=new Date-B,ie=Math.floor(q/6e4);if(ie<1)return"Hace un momento";if(ie<60)return`ltima actividad: hace ${ie} min`;const fe=Math.floor(ie/60);return fe<24?`ltima actividad: hace ${fe}h`:`ltima actividad: ${B.toLocaleDateString()}`},p=e.filter(C=>C.is_active).length,y=p>0?"ACTIVO":"INACTIVO",L=p>0?"active":"inactive";return r.jsxs("div",{className:"bot-section",children:[r.jsxs("div",{className:"bot-section-header",children:[r.jsxs("div",{className:"bot-section-title-area",children:[r.jsx("div",{className:"bot-section-icon",children:""}),r.jsxs("div",{children:[r.jsx("h2",{className:"bot-section-title",children:"Gestin de Bots"}),r.jsx("p",{className:"bot-section-subtitle",children:"Administra los flujos automatizados y el rendimiento tcnico."})]})]}),r.jsxs("div",{className:"bot-section-global-toggle",children:[r.jsx("span",{className:"bot-toggle-label",children:"ESTADO DEL BOT:"}),r.jsxs("div",{className:`bot-toggle-pill ${L}`,children:[r.jsx("span",{className:"bot-toggle-dot"}),r.jsx("span",{children:y})]})]})]}),l&&r.jsx("div",{className:"bot-error",children:l}),r.jsxs("div",{className:"bot-section-content",children:[r.jsxs("div",{className:"bot-flows-panel",children:[r.jsx("div",{className:"bot-panel-header",children:r.jsx("span",{className:"bot-panel-title",children:"MONITOREO DE FLUJOS"})}),i?r.jsx("div",{className:"bot-loading",children:"Cargando bots..."}):e.length===0?r.jsxs("div",{className:"bot-empty",children:[r.jsx("p",{children:"No hay bots asignados a tu cuenta."}),r.jsx("p",{className:"bot-empty-hint",children:"Contacta con soporte si necesitas activar un bot."})]}):r.jsx("div",{className:"bot-flows-list",children:e.map(C=>r.jsxs("div",{className:"bot-flow-card",children:[r.jsxs("div",{className:"bot-flow-info",children:[r.jsx("span",{className:"bot-flow-icon",children:C.flow_icon||""}),r.jsxs("div",{children:[r.jsx("div",{className:"bot-flow-name",children:C.flow_name}),r.jsxs("div",{className:`bot-flow-status ${C.is_active?"active":"inactive"}`,children:[" ",C.is_active?"ACTIVO":"INACTIVO"]})]})]}),r.jsx("div",{className:"bot-flow-actions",children:r.jsxs("label",{className:"bot-toggle-switch",children:[r.jsx("input",{type:"checkbox",checked:C.is_active,onChange:()=>d(C.id,!C.is_active)}),r.jsx("span",{className:"bot-toggle-slider"})]})}),r.jsx("div",{className:"bot-flow-meta",children:x(C.updated_at)}),C.flow_description&&r.jsx("div",{className:"bot-flow-desc",children:C.flow_description})]},C.id))})]}),r.jsxs("div",{className:"bot-metrics-panel",children:[r.jsx("div",{className:"bot-panel-header",children:r.jsx("span",{className:"bot-panel-title",children:"MTRICAS DE EFICACIA DETALLADAS"})}),r.jsxs("div",{className:"bot-metrics-grid",children:[r.jsxs("div",{className:"bot-metric-card",children:[r.jsx("div",{className:"bot-metric-icon",children:""}),r.jsxs("div",{className:`bot-metric-badge ${((m=n==null?void 0:n.interactions)==null?void 0:m.change)>=0?"positive":"neutral"}`,children:[((T=n==null?void 0:n.interactions)==null?void 0:T.change)>0?"+":"",(N=n==null?void 0:n.interactions)==null?void 0:N.change,"% ",(u=n==null?void 0:n.interactions)==null?void 0:u.label]}),r.jsx("div",{className:"bot-metric-label",children:"INTERACCIONES"}),r.jsx("div",{className:"bot-metric-value",children:n?n.interactions.value:"--"}),r.jsx("div",{className:"bot-metric-sub",children:"Total de sesiones iniciadas hoy"})]}),r.jsxs("div",{className:"bot-metric-card",children:[r.jsx("div",{className:"bot-metric-icon",children:""}),r.jsxs("div",{className:"bot-metric-badge neutral",children:["Objetivo: ",(f=n==null?void 0:n.resolution)==null?void 0:f.target,"%"]}),r.jsx("div",{className:"bot-metric-label",children:"RESOLUCIN FINAL"}),r.jsxs("div",{className:"bot-metric-value",children:[n?n.resolution.value:"--","%"]}),r.jsx("div",{className:"bot-metric-progress",children:r.jsx("div",{className:"bot-metric-progress-fill",style:{width:`${n?n.resolution.value:0}%`}})})]}),r.jsxs("div",{className:"bot-metric-card",children:[r.jsx("div",{className:"bot-metric-icon",children:""}),r.jsxs("div",{className:"bot-metric-badge sla",children:[" ",(g=n==null?void 0:n.uptime)==null?void 0:g.status]}),r.jsx("div",{className:"bot-metric-label",children:"VIDA DEL PROCESO"}),r.jsx("div",{className:"bot-metric-value",children:n?n.uptime.value:"--"}),r.jsx("div",{className:"bot-metric-sub",children:"UPTIME SISTEMA"})]}),r.jsxs("div",{className:"bot-metric-card",children:[r.jsx("div",{className:`bot-metric-icon ${((j=n==null?void 0:n.errors)==null?void 0:j.value)>0?"error":""}`,children:""}),r.jsx("div",{className:`bot-metric-badge ${((A=n==null?void 0:n.errors)==null?void 0:A.value)===0?"stable":"neutral"}`,children:(w=n==null?void 0:n.errors)==null?void 0:w.status}),r.jsx("div",{className:"bot-metric-label",children:"ERRORES"}),r.jsx("div",{className:"bot-metric-value",children:n?n.errors.value:"--"}),r.jsxs("div",{className:`bot-metric-sub ${((P=n==null?void 0:n.errors)==null?void 0:P.critical)>0?"error-sub":""}`,children:["CRTICOS: ",n?n.errors.critical:0]})]})]})]})]})]})}const ju={DRAFT:{bg:"#e3e8ef",text:"#475569",label:"BORRADOR"},PENDING:{bg:"#fef3c7",text:"#d97706",label:"PENDIENTE"},APPROVED:{bg:"#d1fae5",text:"#059669",label:"APROBADA"},REJECTED:{bg:"#fee2e2",text:"#dc2626",label:"RECHAZADA"},PAUSED:{bg:"#fef3c7",text:"#d97706",label:"PAUSADA"},DISABLED:{bg:"#e5e7eb",text:"#6b7280",label:"DESHABILITADA"}},ry=[{value:"UTILITY",label:"Utility"},{value:"MARKETING",label:"Marketing"},{value:"AUTHENTICATION",label:"Authentication"}],iy=[{value:"es",label:"Espaol (ES)"},{value:"en",label:"English (EN)"}];function ay({templates:e=[],templateForm:t,setTemplateForm:n,handleTemplateSubmit:s,handleTemplateSubmitToMeta:i,handleTemplateDelete:a,handleSyncTemplates:l,onLoadTemplates:o}){const[c,d]=v.useState("list"),[x,p]=v.useState(null),[y,L]=v.useState(""),[m,T]=v.useState(!1),[N,u]=v.useState(""),[f,g]=v.useState(!1),[j,A]=v.useState(null),[w,P]=v.useState({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),[C,B]=v.useState([]);v.useEffect(()=>{o&&o()},[]),v.useEffect(()=>{if(!j)return;const S=$=>{$.target.closest(".template-card-menu")||A(null)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[j]);const V=async()=>{T(!0);try{await l()}finally{T(!1)}},q=()=>{p(null),P({name:"",category:"UTILITY",language:"es",body_text:"",header_type:"",header_content:"",footer_text:"",buttons:[]}),B([]),d("editor")},ie=S=>{p(S),P({name:S.name||"",category:S.category||"UTILITY",language:S.language||"es",body_text:S.body_text||S.body_preview||"",header_type:S.header_type||"",header_content:S.header_content||"",footer_text:S.footer_text||"",buttons:S.buttons_json||[]}),B(S.variable_mappings||[]),d("editor")},fe=async S=>{!(S!=null&&S.id)||!a||!window.confirm(`Eliminar la plantilla "${S.name}"? Esta accin la ocultar localmente y la eliminar de Meta si aplica.`)||(await a(S.id),A(null))},ge=async S=>{S.preventDefault();const $={...w,id:x==null?void 0:x.id,variable_mappings:C};if(n&&n($),s){const H=await s(null,$);H&&p(H)}},be=async()=>{if(i){g(!0);try{let S=x==null?void 0:x.id;if(!S){const $={...w,variable_mappings:C},H=await s(null,$);S=H==null?void 0:H.id,H&&p(H)}S&&(await i(S),d("list"),p(null))}finally{g(!1)}}},le=()=>{d("list"),p(null)},I=(S=>{const $=S.match(/\{\{(\d+)\}\}/g)||[];return[...new Set($)].map(H=>parseInt(H.replace(/[{}]/g,"")))})(w.body_text),F=e.filter(S=>{var ee;const $=!y||((ee=S.name)==null?void 0:ee.toLowerCase().includes(y.toLowerCase()))||(S.body_text||S.body_preview||"").toLowerCase().includes(y.toLowerCase()),H=!N||S.status===N;return $&&H});return c==="list"?r.jsxs("div",{className:"templates-section",children:[r.jsxs("div",{className:"templates-header",children:[r.jsxs("div",{className:"templates-title-row",children:[r.jsx("h1",{children:"Plantillas de Meta"}),r.jsxs("span",{className:"meta-connected-badge",children:[r.jsx("span",{className:"status-dot"}),"CONECTADO A META API"]})]}),r.jsxs("div",{className:"templates-actions",children:[r.jsx("div",{className:"search-input-wrap",children:r.jsx("input",{type:"text",placeholder:"Buscar plantillas...",value:y,onChange:S=>L(S.target.value)})}),r.jsxs("select",{value:N,onChange:S=>u(S.target.value),className:"status-filter-select",children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"APPROVED",children:"Aprobadas"}),r.jsx("option",{value:"PENDING",children:"Pendientes"}),r.jsx("option",{value:"REJECTED",children:"Rechazadas"}),r.jsx("option",{value:"DRAFT",children:"Borradores"})]}),r.jsx("button",{className:"btn-sync",onClick:V,disabled:m,children:m?" Sincronizando...":" Sincronizar"}),r.jsxs("button",{className:"btn-create-template",onClick:q,children:[r.jsx("span",{children:"+"})," Crear Nueva Plantilla"]})]})]}),r.jsxs("div",{className:"templates-grid",children:[F.map(S=>{var H;const $=ju[S.status]||ju.DRAFT;return r.jsxs("div",{className:"template-card",onClick:()=>ie(S),children:[r.jsxs("div",{className:"template-card-head",children:[r.jsx("div",{className:"template-category-icon",children:S.category==="MARKETING"?"":S.category==="UTILITY"?"":""}),r.jsx("span",{className:"template-status-badge",style:{backgroundColor:$.bg,color:$.text},children:$.label})]}),r.jsx("h3",{className:"template-card-name",children:S.name}),r.jsxs("div",{className:"template-card-meta",children:[r.jsx("span",{className:"tag-category",children:S.category}),r.jsx("span",{className:"tag-language",children:S.language==="es"?"ESPAOL (ES)":(H=S.language)==null?void 0:H.toUpperCase()})]}),(S.body_text||S.body_preview)&&r.jsxs("p",{className:"template-card-preview",children:[(S.body_text||S.body_preview).slice(0,80),"..."]}),r.jsxs("div",{className:"template-card-actions",children:[r.jsx("button",{className:"btn-preview",onClick:ee=>{ee.stopPropagation(),ie(S)},children:" Previsualizar"}),r.jsxs("div",{className:"template-card-menu",onClick:ee=>ee.stopPropagation(),children:[r.jsx("button",{className:"btn-more",type:"button",onClick:()=>A(ee=>ee===S.id?null:S.id),children:""}),j===S.id&&r.jsxs("div",{className:"template-menu-dropdown",children:[r.jsx("button",{type:"button",className:"menu-item",onClick:()=>ie(S),children:"Editar"}),r.jsx("button",{type:"button",className:"menu-item danger",onClick:()=>fe(S),children:"Eliminar"})]})]})]})]},S.id)}),r.jsxs("div",{className:"template-card template-card-create",onClick:q,children:[r.jsx("div",{className:"create-icon",children:"+"}),r.jsx("h3",{children:"Crear nueva plantilla"}),r.jsx("p",{children:"Empieza a disear tu flujo de WhatsApp"})]})]}),F.length===0&&!y&&r.jsx("div",{className:"templates-empty",children:r.jsx("p",{children:"No hay plantillas. Crea una nueva o sincroniza desde Meta."})})]}):r.jsxs("div",{className:"template-editor",children:[r.jsxs("div",{className:"editor-header",children:[r.jsxs("div",{className:"editor-breadcrumb",children:[r.jsx("button",{className:"btn-back",onClick:le,children:" Volver"}),r.jsx("span",{className:"breadcrumb-sep",children:"/"}),r.jsx("span",{children:x?"Editar Plantilla":"Nueva Plantilla"})]}),r.jsxs("div",{className:"editor-actions",children:[r.jsx("button",{className:"btn-save-draft",onClick:ge,children:" Guardar Borrador"}),((x==null?void 0:x.status)==="DRAFT"||(x==null?void 0:x.status)==="REJECTED"||!x)&&r.jsx("button",{className:"btn-primary",onClick:be,disabled:f||!w.name||!w.body_text,children:f?"Enviando...":"Enviar a Meta"}),r.jsx("button",{className:"btn-discard",onClick:le,children:" Descartar"})]})]}),r.jsxs("div",{className:"editor-layout",children:[r.jsxs("div",{className:"editor-form-panel",children:[r.jsxs("div",{className:"form-section",children:[r.jsx("h3",{children:" General Settings"}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Template Name"}),r.jsx("input",{type:"text",placeholder:"patient_appointment_reminder",value:w.name,onChange:S=>P({...w,name:S.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")})})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Category"}),r.jsx("select",{value:w.category,onChange:S=>P({...w,category:S.target.value}),children:ry.map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))})]}),r.jsxs("label",{className:"form-field",children:[r.jsx("span",{children:"Language"}),r.jsx("select",{value:w.language,onChange:S=>P({...w,language:S.target.value}),children:iy.map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))})]})]})]}),r.jsxs("div",{className:"form-section",children:[r.jsxs("div",{className:"form-section-header",children:[r.jsx("h3",{children:" Message Body"}),r.jsx("button",{className:"btn-insert-var",type:"button",onClick:()=>{const S=I.length+1;P({...w,body_text:w.body_text+`{{${S}}}`})},children:"+ Insert Variable"})]}),r.jsx("textarea",{rows:"6",placeholder:"Hola {{1}}, te recordamos tu cita en PODOPIE para el da {{2}} a las {{3}}. Por favor, confirma tu asistencia.",value:w.body_text,onChange:S=>P({...w,body_text:S.target.value})}),r.jsxs("div",{className:"char-count",children:[w.body_text.length," / 1024"]})]})]}),r.jsxs("div",{className:"editor-preview-panel",children:[r.jsxs("div",{className:"phone-frame",children:[r.jsxs("div",{className:"phone-header",children:[r.jsx("span",{className:"phone-back",children:""}),r.jsxs("div",{className:"phone-contact",children:[r.jsx("div",{className:"phone-avatar",children:""}),r.jsx("div",{className:"phone-name",children:"PODOPIE Clinic"})]}),r.jsx("div",{className:"phone-icons",children:" "})]}),r.jsxs("div",{className:"phone-body",children:[r.jsx("div",{className:"phone-date-label",children:"TODAY"}),r.jsxs("div",{className:"phone-message",children:[r.jsx("div",{className:"message-bubble",children:w.body_text||"Tu mensaje aparecer aqu..."}),r.jsx("div",{className:"message-time",children:"10:42 AM"})]}),w.buttons&&w.buttons.length>0&&r.jsx("div",{className:"phone-buttons",children:w.buttons.map((S,$)=>r.jsx("button",{className:"phone-action-btn",children:S.text||`Button ${$+1}`},$))})]})]}),r.jsx("div",{className:"preview-label",children:" High-fidelity dynamic preview"})]}),r.jsxs("div",{className:"editor-mapping-panel",children:[r.jsxs("div",{className:"mapping-tabs",children:[r.jsx("button",{className:"tab active",children:"VARIABLES"}),r.jsx("button",{className:"tab",children:"BUTTONS"})]}),r.jsxs("div",{className:"mapping-section",children:[r.jsx("h4",{children:"ODOO FIELD MAPPING"}),I.length===0?r.jsxs("p",{className:"mapping-empty",children:["Agrega variables ","{{1}}",", ","{{2}}","... en tu mensaje"]}):I.map(S=>{const $=C.find(H=>H.var_index===S)||{};return r.jsxs("div",{className:"mapping-item",children:[r.jsxs("div",{className:"mapping-var-badge",children:[`{{${S}}}`," Variable"]}),r.jsxs("select",{value:$.source_path||"",onChange:H=>{const ee=C.filter(b=>b.var_index!==S);ee.push({var_index:S,source_type:"odoo",source_path:H.target.value}),B(ee)},children:[r.jsx("option",{value:"",children:"Select Odoo Field..."}),r.jsx("option",{value:"partner_id.name",children:"patient_id.name"}),r.jsx("option",{value:"start_date",children:"start_date (Formatted)"}),r.jsx("option",{value:"start_time",children:"start_time"}),r.jsx("option",{value:"partner_id.phone",children:"patient_phone"})]}),r.jsx("span",{className:`mapping-status ${$.source_path?"linked":"needs"}`,children:$.source_path?" Linked":" Needs mapping"})]},S)})]}),r.jsxs("div",{className:"mapping-section",children:[r.jsxs("div",{className:"mapping-section-header",children:[r.jsx("h4",{children:"ACTION BUTTONS"}),r.jsx("button",{className:"btn-add-button",onClick:()=>{P({...w,buttons:[...w.buttons||[],{type:"QUICK_REPLY",text:""}]})},children:"+ Add Button"})]}),(w.buttons||[]).map((S,$)=>r.jsxs("div",{className:"button-item",children:[r.jsx("span",{className:"button-icon",children:""}),r.jsx("input",{type:"text",placeholder:"Button text",value:S.text||"",onChange:H=>{const ee=[...w.buttons];ee[$]={...ee[$],text:H.target.value},P({...w,buttons:ee})}}),r.jsx("button",{className:"btn-remove",onClick:()=>{const H=w.buttons.filter((ee,b)=>b!==$);P({...w,buttons:H})},children:""})]},$))]}),r.jsxs("div",{className:"mapping-tip",children:[r.jsx("span",{className:"tip-icon",children:""}),r.jsx("span",{children:"Tip: Asegrate de que tus variables estn correctamente mapeadas a campos de Odoo antes de enviar."})]})]})]})]})}const Nu={campaigns:"",users:"",bot:"",chat:"",templates:"",audience:"",system:""},ly={"user.created":"USUARIO CREADO","user.updated":"USUARIO EDITADO","user.disabled":"USUARIO ELIMINADO",template_draft_created:"PLANTILLA CREADA",template_draft_updated:"PLANTILLA EDITADA",template_submitted:"PLANTILLA ENVIADA",template_deleted:"PLANTILLA ELIMINADA",template_restored:"PLANTILLA RESTAURADA",audience_created:"SEGMENTO CREADO",audience_updated:"SEGMENTO EDITADO",audience_deleted:"SEGMENTO ELIMINADO","campaign.created":"CAMPAA CREADA","campaign.queued":"CAMPAA EN COLA","campaign.sending":"CAMPAA LANZADA","settings.updated":"CONFIG ACTUALIZADA","role_permissions.updated":"PERMISOS CAMBIADOS","role_permissions.deleted":"ROL ELIMINADO","conversation.status_changed":"CHAT ACTUALIZADO","conversation.tag_added":"TAG AGREGADO","conversation.tag_removed":"TAG ELIMINADO"};function af(e){var s;const t=((s=e==null?void 0:e.data_json)==null?void 0:s.entity)||"";if(t==="template")return"templates";if(t==="audience")return"audience";if(t==="campaign")return"campaigns";if(t==="conversation")return"chat";const n=(e==null?void 0:e.action)||"";return n.includes("user")?"users":n.includes("campaign")?"campaigns":n.includes("template")?"templates":n.includes("audience")?"audience":n.includes("bot")?"bot":n.includes("conversation")?"chat":"system"}function Ia(e){if(!e)return{date:"--",time:"--"};const t=new Date(e);return Number.isNaN(t.getTime())?{date:"--",time:"--"}:{date:t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),time:t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}function oy(e,t="csv"){const s=[["timestamp","usuario","email","accion","modulo","data"].join(",")];e.forEach(d=>{var m,T;const x=((m=d.user)==null?void 0:m.name)||"Sistema",p=((T=d.user)==null?void 0:T.email)||"",y=af(d),L=[new Date(d.created_at).toISOString(),x,p,d.action,y,JSON.stringify(d.data_json||{})];s.push(L.map(N=>`"${String(N).replace(/"/g,'""')}"`).join(","))});const i=s.join(`
`),a=t==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"text/csv;charset=utf-8;",l=t==="excel"?"audit_logs.xlsx":"audit_logs.csv",o=new Blob([i],{type:a}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download=l,document.body.appendChild(c),c.click(),document.body.removeChild(c)}function cy(){var w,P;const[e,t]=v.useState(""),[n,s]=v.useState(""),[i,a]=v.useState(""),[l,o]=v.useState(1),[c]=v.useState(6),[d,x]=v.useState(0),[p,y]=v.useState([]),[L,m]=v.useState(!1),[T,N]=v.useState(null),u=Math.max(1,Math.ceil(d/c)),f=async({pageOverride:C}={})=>{m(!0);try{const B=new URLSearchParams;B.set("page",String(C||l)),B.set("page_size",String(c)),e.trim()&&B.set("q",e.trim()),n&&B.set("from",n),i&&B.set("to",i);const V=await ue(`/api/admin/audit?${B.toString()}`);y(V.logs||[]),x(V.total||0)}finally{m(!1)}};v.useEffect(()=>{f()},[l]);const g=()=>{o(1),f({pageOverride:1})},j=async(C="csv")=>{const B=new URLSearchParams;B.set("page","1"),B.set("page_size","1000"),e.trim()&&B.set("q",e.trim()),n&&B.set("from",n),i&&B.set("to",i);const V=await ue(`/api/admin/audit?${B.toString()}`);oy(V.logs||[],C)},A=v.useMemo(()=>{const C=[],B=Math.max(1,l-1),V=Math.min(u,B+2);for(let q=B;q<=V;q+=1)C.push(q);return C},[l,u]);return r.jsxs("div",{className:"audit-module",children:[r.jsxs("div",{className:"audit-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"audit-title",children:"Registros / Auditoria"}),r.jsx("div",{className:"audit-subtitle",children:"Monitorea acciones de usuarios y eventos del sistema"})]}),r.jsxs("div",{className:"audit-export-group",children:[r.jsx("button",{className:"audit-export",type:"button",onClick:()=>j("excel"),children:" Exportar Excel"}),r.jsx("button",{className:"audit-export outline",type:"button",onClick:()=>j("csv"),children:" Exportar CSV"})]})]}),r.jsxs("div",{className:"audit-filters",children:[r.jsxs("div",{className:"audit-search",children:[r.jsx("span",{className:"audit-search-icon"}),r.jsx("input",{type:"text",placeholder:"Filtrar por usuario o accion..",value:e,onChange:C=>t(C.target.value)})]}),r.jsxs("div",{className:"audit-date",children:[r.jsx("span",{children:"Desde"}),r.jsx("input",{type:"date",value:n,onChange:C=>s(C.target.value)})]}),r.jsxs("div",{className:"audit-date",children:[r.jsx("span",{children:"Hasta"}),r.jsx("input",{type:"date",value:i,onChange:C=>a(C.target.value)})]}),r.jsx("button",{className:"audit-filter-btn",type:"button",onClick:g,children:"Filtrar"})]}),r.jsxs("div",{className:"audit-card",children:[r.jsxs("div",{className:"audit-table-head",children:[r.jsx("span",{children:"Timestamp"}),r.jsx("span",{children:"Usuario"}),r.jsx("span",{children:"Accion"}),r.jsx("span",{children:"Modulo"})]}),L&&r.jsx("div",{className:"audit-empty",children:"Cargando registros..."}),!L&&!p.length&&r.jsx("div",{className:"audit-empty",children:"Sin registros para mostrar"}),!L&&p.map(C=>{var ge,be;const B=Ia(C.created_at),V=af(C),q=ly[C.action]||C.action,ie=((ge=C.user)==null?void 0:ge.name)||"System Bot",fe=((be=C.user)==null?void 0:be.email)||"automated@service";return r.jsxs("button",{type:"button",className:"audit-row",onClick:()=>N(C),children:[r.jsxs("div",{className:"audit-cell time",children:[r.jsx("div",{children:B.date}),r.jsx("div",{className:"audit-time",children:B.time})]}),r.jsxs("div",{className:"audit-cell user",children:[r.jsx("div",{className:"audit-avatar",children:(ie==null?void 0:ie[0])||"S"}),r.jsxs("div",{children:[r.jsx("div",{className:"audit-user-name",children:ie}),r.jsx("div",{className:"audit-user-email",children:fe})]})]}),r.jsx("div",{className:"audit-cell action",children:r.jsx("span",{className:"audit-action-pill",children:q})}),r.jsxs("div",{className:"audit-cell module",children:[r.jsx("span",{className:"audit-module-icon",children:Nu[V]||Nu.system}),V.charAt(0).toUpperCase()+V.slice(1)]})]},C.id)})]}),r.jsxs("div",{className:"audit-footer",children:[r.jsxs("div",{children:["Mostrando ",p.length," de ",d," registros"]}),r.jsxs("div",{className:"audit-pagination",children:[r.jsx("button",{type:"button",disabled:l<=1,onClick:()=>o(C=>Math.max(1,C-1)),children:""}),A.map(C=>r.jsx("button",{type:"button",className:C===l?"active":"",onClick:()=>o(C),children:C},C)),r.jsx("button",{type:"button",disabled:l>=u,onClick:()=>o(C=>Math.min(u,C+1)),children:""})]})]}),T&&r.jsx("div",{className:"audit-modal",children:r.jsxs("div",{className:"audit-modal-card",children:[r.jsxs("div",{className:"audit-modal-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"audit-modal-title",children:"Detalle del registro"}),r.jsx("div",{className:"audit-modal-subtitle",children:T.action})]}),r.jsx("button",{type:"button",onClick:()=>N(null),children:""})]}),r.jsxs("div",{className:"audit-modal-body",children:[r.jsxs("div",{className:"audit-detail",children:[r.jsx("span",{children:"Usuario"}),r.jsx("strong",{children:((w=T.user)==null?void 0:w.name)||"System Bot"}),r.jsx("small",{children:((P=T.user)==null?void 0:P.email)||"automated@service"})]}),r.jsxs("div",{className:"audit-detail",children:[r.jsx("span",{children:"Timestamp"}),r.jsx("strong",{children:Ia(T.created_at).date}),r.jsx("small",{children:Ia(T.created_at).time})]}),r.jsxs("div",{className:"audit-detail full",children:[r.jsx("span",{children:"Data"}),r.jsx("pre",{children:JSON.stringify(T.data_json||{},null,2)})]})]})]})})]})}function uy(){return r.jsxs("div",{className:"panel",children:[r.jsx("div",{className:"panel-title",children:"Integracion Odoo"}),r.jsx("div",{className:"empty-state",children:"Seccion en construccion"})]})}function dy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6",strokeWidth:"2"}),r.jsx("circle",{cx:"9",cy:"6",r:"2",strokeWidth:"2"}),r.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12",strokeWidth:"2"}),r.jsx("circle",{cx:"15",cy:"12",r:"2",strokeWidth:"2"}),r.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18",strokeWidth:"2"}),r.jsx("circle",{cx:"11",cy:"18",r:"2",strokeWidth:"2"})]})}function hy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"9",cy:"8",r:"3",strokeWidth:"2"}),r.jsx("path",{d:"M4 20c0-3 2.7-5.5 6-5.5s6 2.5 6 5.5",strokeWidth:"2"}),r.jsx("circle",{cx:"17",cy:"9",r:"2",strokeWidth:"2"}),r.jsx("path",{d:"M14 20c0-1.8 1.4-3.4 3.2-4",strokeWidth:"2"})]})}function fy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"2"}),r.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"2"}),r.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"2"}),r.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"2"})]})}function py(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"6",y:"4",width:"12",height:"16",rx:"2",strokeWidth:"2"}),r.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"9",strokeWidth:"2"}),r.jsx("line",{x1:"9",y1:"13",x2:"15",y2:"13",strokeWidth:"2"})]})}function my(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"6",y:"5",width:"12",height:"15",rx:"2",strokeWidth:"2"}),r.jsx("path",{d:"M9 5h6",strokeWidth:"2"}),r.jsx("path",{d:"M9 10h6",strokeWidth:"2"}),r.jsx("path",{d:"M9 14h6",strokeWidth:"2"})]})}function gy(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"M8 4h4a2 2 0 1 1 0 4h-1v2h2a2 2 0 1 1 0 4h-2v2H8a2 2 0 1 1-4 0V8a2 2 0 1 1 4 0z",strokeWidth:"2"})})}function vy({settingsSection:e,setSettingsSection:t,settingsTab:n,setSettingsTab:s,rolePermissions:i,setRolePermissions:a,currentRole:l,isAdmin:o,adminUsers:c,userForm:d,setUserForm:x,roleOptions:p,handleUserSubmit:y,settings:L,setSettings:m,handleSaveSettings:T,branches:N,services:u,branchForm:f,setBranchForm:g,handleBranchSubmit:j,handleBranchDisable:A,serviceForm:w,setServiceForm:P,handleServiceSubmit:C,handleServiceDisable:B,handleServiceBranchToggle:V,templates:q,templateForm:ie,setTemplateForm:fe,handleTemplateSubmit:ge,handleTemplateSubmitToMeta:be,handleTemplateDelete:le,handleSyncTemplates:je,auditLogs:I,formatDate:F,planName:S,tenantChannels:$,channelForm:H,setChannelForm:ee,handleChannelSelect:b,handleChannelSubmit:G,handleUserDelete:X,defaultRolePermissions:U,handleRoleDelete:re,useShellLayout:he=!1,pageError:pe}){const ve=i==null?void 0:i[l],Ie=[{title:"Principal",items:[{id:"general",label:"General",icon:dy},{id:"users",label:"Gestion de Usuarios",icon:hy},{id:"bot",label:"Configuracion de Bot",icon:fy}]},{title:"Canales e Integraciones",items:[{id:"templates",label:"Plantillas de Meta",icon:py},{id:"audit",label:"Registros / Auditoria",icon:my},{id:"odoo",label:"Integracion Odoo",icon:gy}]}];function We(O){var ce,Oe;return!!((Oe=(ce=ve==null?void 0:ve.settings)==null?void 0:ce[O])!=null&&Oe.read)}function Ue(O){We(O)&&t(O)}const He=r.jsxs(r.Fragment,{children:[r.jsxs("aside",{className:"settings-sidebar",children:[r.jsxs("div",{className:"settings-header",children:[r.jsx("div",{className:"settings-title",children:"CONFIGURACION"}),r.jsx("div",{className:"settings-version",children:"PODOPIE OS V2.0"})]}),Ie.map(O=>r.jsxs("div",{className:"settings-group",children:[r.jsx("div",{className:"settings-group-title",children:O.title}),r.jsx("div",{className:"settings-group-list",children:O.items.map(ce=>{const Oe=!We(ce.id),Dt=ce.icon;return r.jsxs("button",{className:`settings-item ${e===ce.id?"active":""}`,type:"button",onClick:()=>Ue(ce.id),disabled:Oe,children:[r.jsx("span",{className:"settings-icon","aria-hidden":"true",children:r.jsx(Dt,{className:"settings-icon-svg"})}),ce.label]},ce.id)})})]},O.title)),r.jsxs("div",{className:"settings-plan",children:[r.jsx("div",{className:"settings-plan-label",children:"Plan actual"}),r.jsx("div",{className:"settings-plan-name",children:S||"Sin plan"})]})]}),r.jsxs("div",{className:"settings-content",children:[e==="users"&&r.jsx(ty,{settingsTab:n,setSettingsTab:s,rolePermissions:i,setRolePermissions:a,isAdmin:o,adminUsers:c,userForm:d,setUserForm:x,roleOptions:p,handleUserSubmit:y,handleUserDelete:X,defaultRolePermissions:U,handleRoleDelete:re}),e==="general"&&r.jsx(ny,{branches:N,branchForm:f,setBranchForm:g,handleBranchSubmit:j,handleBranchDisable:A,services:u,serviceForm:w,setServiceForm:P,handleServiceSubmit:C,handleServiceDisable:B,handleServiceBranchToggle:V,tenantChannels:$,channelForm:H,setChannelForm:ee,handleChannelSelect:b,handleChannelSubmit:G}),e==="bot"&&r.jsx(sy,{settings:L,setSettings:m,handleSaveSettings:T}),e==="templates"&&r.jsx(ay,{templates:q,templateForm:ie,setTemplateForm:fe,handleTemplateSubmit:ge,handleTemplateSubmitToMeta:be,handleTemplateDelete:le,handleSyncTemplates:je}),e==="audit"&&r.jsx(cy,{auditLogs:I,formatDate:F}),e==="odoo"&&r.jsx(uy,{}),pe&&r.jsx("div",{className:"error-banner",children:pe})]})]});return he?He:r.jsx("section",{className:"settings-layout",children:He})}function yy(){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[r.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",strokeWidth:"1.8"}),r.jsx("circle",{cx:"9",cy:"12",r:"1",strokeWidth:"1.8"}),r.jsx("circle",{cx:"15",cy:"12",r:"1",strokeWidth:"1.8"}),r.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"7",strokeWidth:"1.8"})]})}function xy({tenantId:e,tenantBots:t,availableFlows:n,loading:s,onAddBot:i,onRemoveBot:a}){const[l,o]=v.useState(""),c=new Set(t.map(p=>p.flow_id)),d=n.filter(p=>!c.has(p.id));function x(){l&&(i(l),o(""))}return r.jsxs("section",{className:"sa-bot-card","data-tenant":e||"",children:[r.jsxs("header",{className:"sa-bot-header",children:[r.jsx("div",{className:"sa-bot-icon-large","aria-hidden":"true",children:r.jsx(yy,{})}),r.jsxs("div",{className:"sa-bot-title-group",children:[r.jsx("h3",{children:"Asignacion de Bots"}),r.jsx("p",{children:"Selecciona que flujos estaran disponibles para este cliente. Los flujos asignados apareceran inmediatamente en el panel del usuario."})]})]}),r.jsx("div",{className:"sa-bot-body",children:s?r.jsx("div",{className:"sa-bot-loading",children:"Cargando asignaciones..."}):t.length===0?r.jsxs("div",{className:"sa-bot-empty",children:[r.jsx("div",{className:"sa-bot-empty-icon",children:"+"}),r.jsx("div",{className:"sa-bot-empty-title",children:"Sin bots asignados"}),r.jsx("div",{className:"sa-bot-empty-sub",children:"Agrega un flujo desde el selector para activarlo en este tenant."})]}):r.jsx("div",{className:"sa-bot-grid",children:t.map(p=>r.jsxs("div",{className:"sa-assigned-bot",children:[r.jsx("div",{className:"sa-bot-item-icon",children:p.flow_icon||">"}),r.jsxs("div",{className:"sa-bot-item-info",children:[r.jsx("span",{className:"sa-bot-item-name",children:p.flow_name||p.flow_id}),r.jsx("span",{className:"sa-bot-item-desc",children:p.flow_description||"Sin descripcion"})]}),r.jsx("button",{type:"button",className:"sa-btn-remove",title:"Quitar bot del cliente",onClick:()=>a(p.id),children:"Quitar"})]},p.id))})}),r.jsxs("div",{className:"sa-bot-controls",children:[r.jsxs("div",{className:"sa-select-container",children:[r.jsx("label",{className:"sa-select-label",children:"Asignar bot"}),r.jsxs("select",{className:"sa-select-styled",value:l,onChange:p=>o(p.target.value),disabled:d.length===0,children:[r.jsx("option",{value:"",children:d.length===0?"No hay mas bots disponibles":"Selecciona un bot para asignar"}),d.map(p=>r.jsx("option",{value:p.id,children:p.name},p.id))]})]}),r.jsx("button",{type:"button",className:"sa-btn-assign",onClick:x,disabled:!l,children:"Asignar Bot"})]})]})}const xt={name:"",slug:"",plan:"",db_url:"",phone_number_id:"",line_name:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",brand_name:"",logo_url:"",brand_primary:"#22d3ee",brand_accent:"#38bdf8",brand_bg:"#0b0f16",timezone:"",odoo_base_url:"",odoo_db_name:"",odoo_username:"",odoo_password:""},jy=[{value:"starter",label:"Starter"},{value:"growth",label:"Growth"},{value:"scale",label:"Scale"},{value:"enterprise",label:"Enterprise"}];function Ny(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"4",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),r.jsx("rect",{x:"14",y:"4",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),r.jsx("rect",{x:"4",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"}),r.jsx("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1.5",strokeWidth:"1.6"})]})}function $l(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function wy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"12",cy:"12",r:"3.5",strokeWidth:"1.6"}),r.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1.2l2-1.5-2-3.5-2.4.7a7.2 7.2 0 0 0-2-1.2L12 2 9.5 4.3a7.2 7.2 0 0 0-2 1.2l-2.4-.7-2 3.5 2 1.5A7 7 0 0 0 5 12c0 .4 0 .8.1 1.2l-2 1.5 2 3.5 2.4-.7a7.2 7.2 0 0 0 2 1.2L12 22l2.5-2.3a7.2 7.2 0 0 0 2-1.2l2.4.7 2-3.5-2-1.5c.1-.4.1-.8.1-1.2Z",strokeWidth:"1.2",strokeLinejoin:"round"})]})}function _y(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.6"}),r.jsx("path",{d:"M16.5 16.5 20 20",strokeWidth:"1.6",strokeLinecap:"round"})]})}function ky(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M6 12h12",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"m13 6 6 6-6 6",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Sy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M18 6 6 18",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"m6 6 12 12",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Ey(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56",strokeWidth:"1.8",strokeLinecap:"round"})})}function wu(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"1.8",strokeLinecap:"round"})]})}function _u(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"m2 2 20 20",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Cy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",strokeWidth:"1.8"}),r.jsx("path",{d:"M12 18h.01",strokeWidth:"1.8",strokeLinecap:"round"})]})}function by(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"m15 5 4 4",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Ty(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M3 6h18",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",strokeWidth:"1.8",strokeLinecap:"round"})]})}const ku={display_name:"",phone_number_id:"",waba_id:"",verify_token:"",wa_token:"",app_secret:"",is_active:!0,is_default:!1};function Ly({isOpen:e,onClose:t,initialData:n,onSave:s,tenantId:i}){const[a,l]=v.useState(ku),[o,c]=v.useState(!1),[d,x]=v.useState(!1),[p,y]=v.useState(!1),[L,m]=v.useState(null);if(v.useEffect(()=>{e&&(l(n||{...ku}),m(null))},[e,n]),!e)return null;const T=async N=>{if(N.preventDefault(),y(!0),m(null),!a.phone_number_id||!a.verify_token||!n&&!a.wa_token){m("Los campos ID de Telfono, Verify Token y Access Token son obligatorios."),y(!1);return}try{await s({...a,tenant_id:i}),t()}catch(u){console.error("Error saving channel:",u),m(u.message||"Error al guardar la lnea.")}finally{y(!1)}};return r.jsx("div",{className:"sa-modal-overlay",onClick:t,children:r.jsxs("div",{className:"sa-modal-content",onClick:N=>N.stopPropagation(),children:[r.jsxs("div",{className:"sa-modal-header",children:[r.jsx("div",{className:"sa-modal-title",children:n?"Editar Lnea WhatsApp":"Nueva Lnea WhatsApp"}),r.jsx("button",{className:"sa-modal-close",onClick:t,children:r.jsx(Sy,{width:24,height:24})})]}),r.jsxs("div",{className:"sa-modal-body",children:[L&&r.jsx("div",{className:"sa-alert",style:{marginBottom:"1rem"},children:L}),r.jsxs("div",{className:"sa-form-grid",children:[r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Nombre para mostrar (Opcional)"}),r.jsx("input",{value:a.display_name||"",onChange:N=>l({...a,display_name:N.target.value}),placeholder:"Ej: Ventas Principal"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Phone Number ID *"}),r.jsx("input",{value:a.phone_number_id||"",onChange:N=>l({...a,phone_number_id:N.target.value}),placeholder:"Identificador del nmero de telfono"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"WABA ID (WhatsApp Business Account ID)"}),r.jsx("input",{value:a.waba_id||"",onChange:N=>l({...a,waba_id:N.target.value}),placeholder:"Identificador de la cuenta de WhatsApp Business"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Verify Token (Webhook) *"}),r.jsx("input",{value:a.verify_token||"",onChange:N=>l({...a,verify_token:N.target.value}),placeholder:"Token de verificacin webhook"})]}),r.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{children:"Permanent Access Token *"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:o?"text":"password",value:a.wa_token||"",onChange:N=>l({...a,wa_token:N.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"Token de acceso permanente",style:{width:"100%",paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>c(!o),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:o?r.jsx(_u,{width:18,height:18}):r.jsx(wu,{width:18,height:18})})]})]}),r.jsxs("div",{className:"sa-field",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{children:"App Secret (Opcional)"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:d?"text":"password",value:a.app_secret||"",onChange:N=>l({...a,app_secret:N.target.value}),placeholder:n?"(Dejar vaco para no cambiar)":"App Secret de Meta",style:{width:"100%",paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>x(!d),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:d?r.jsx(_u,{width:18,height:18}):r.jsx(wu,{width:18,height:18})})]})]})]}),r.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"2rem"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[r.jsx("input",{type:"checkbox",checked:!!a.is_active,onChange:N=>l({...a,is_active:N.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Activa"]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",color:"#e5e7eb",fontSize:"0.8rem"},children:[r.jsx("input",{type:"checkbox",checked:!!a.is_default,onChange:N=>l({...a,is_default:N.target.checked}),style:{width:"16px",height:"16px"}}),"Lnea Principal (Por Defecto)"]})]})]}),r.jsxs("div",{className:"sa-modal-footer",children:[r.jsx("button",{className:"sa-btn ghost",onClick:t,disabled:p,children:"Cancelar"}),r.jsx("button",{className:"sa-btn primary",onClick:T,disabled:p,children:p?r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Ey,{width:16,height:16,className:"animate-spin"})," Guardando..."]}):"Guardar Lnea"})]})]})})}function Ay({channels:e=[],tenantId:t,onRefresh:n}){const[s,i]=v.useState(!1),[a,l]=v.useState(null),o=()=>{l(null),i(!0)},c=p=>{l(p),i(!0)},d=async p=>{const y=a?`/api/superadmin/channels/${a.id}`:"/api/superadmin/channels",m=await fetch(y,{method:a?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(p)});if(!m.ok){const T=await m.json();throw new Error(T.error||"Error al guardar")}await n()},x=async p=>{if(confirm("Ests seguro de que deseas eliminar esta lnea? Esta accin no se puede deshacer."))try{if(!(await fetch(`/api/superadmin/channels/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar");await n()}catch(y){console.error("Error deleting channel:",y),alert("No se pudo eliminar la lnea.")}};return r.jsxs("section",{className:"sa-lines-card",children:[r.jsxs("header",{className:"sa-lines-header",children:[r.jsxs("div",{className:"sa-lines-title",children:[r.jsx("div",{className:"sa-lines-icon",children:r.jsx(Cy,{width:24,height:24})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Lneas de WhatsApp Cloud"}),r.jsx("p",{children:"Gestiona las conexiones activas de WhatsApp para este tenant."})]})]}),r.jsxs("button",{className:"sa-btn primary",onClick:o,children:[r.jsx($l,{width:16,height:16,style:{marginRight:"0.5rem"}}),"Agregar Nueva Lnea"]})]}),r.jsx("div",{className:"sa-lines-body",children:r.jsxs("div",{className:"sa-lines-grid",children:[e.map(p=>r.jsxs("div",{className:`sa-line-card ${p.is_active?"":"opacity-75"}`,children:[r.jsxs("div",{className:"sa-line-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"sa-line-name",children:p.display_name||"Sin nombre"}),r.jsxs("div",{className:"sa-line-meta",children:["ID: ",p.phone_number_id]})]}),r.jsx("div",{className:`sa-line-status ${p.is_active?"active":""}`,title:p.is_active?"Activo":"Inactivo"})]}),r.jsxs("div",{className:"sa-line-badges",children:[p.is_default&&r.jsx("span",{className:"sa-line-badge default",children:"DEFAULT"}),!p.is_active&&r.jsx("span",{className:"sa-status warn",children:"INACTIVO"})]}),r.jsxs("div",{className:"sa-line-details",children:[r.jsxs("div",{className:"sa-line-detail",children:[r.jsx("span",{className:"sa-detail-label",children:"WABA ID"}),r.jsx("span",{className:"sa-detail-value",children:p.waba_id||"-"})]}),r.jsxs("div",{className:"sa-line-detail",children:[r.jsx("span",{className:"sa-detail-label",children:"Verify Token"}),r.jsx("span",{className:"sa-detail-value",children:p.verify_token?`${p.verify_token.substring(0,16)}...`:"-"})]})]}),r.jsxs("div",{className:"sa-line-actions",children:[r.jsx("button",{className:"sa-btn ghost",onClick:()=>c(p),title:"Editar",children:r.jsx(by,{width:16,height:16})}),r.jsx("button",{className:"sa-btn ghost",onClick:()=>x(p.id),title:"Eliminar",style:{color:"#f87171"},children:r.jsx(Ty,{width:16,height:16})})]})]},p.id)),r.jsxs("button",{type:"button",className:"sa-line-add-card",onClick:o,children:[r.jsx("div",{className:"sa-add-icon-circle",children:r.jsx($l,{width:24,height:24})}),r.jsx("span",{children:"Nueva Conexin"})]})]})}),r.jsx(Ly,{isOpen:s,onClose:()=>i(!1),initialData:a,onSave:d,tenantId:t})]})}function Su({route:e="/superadmin",onNavigate:t,onImpersonateTenant:n,onLogout:s=()=>{}}){const[i,a]=v.useState([]),[l,o]=v.useState([]),[c,d]=v.useState(""),[x,p]=v.useState(""),[y,L]=v.useState("Verificacion de red: sistema ok"),[m,T]=v.useState(xt),[N,u]=v.useState(!1),[f,g]=v.useState(""),[j,A]=v.useState(""),[w,P]=v.useState(!0),[C,B]=v.useState(xt),[V,q]=v.useState(!0),[ie,fe]=v.useState(!1),ge=v.useRef(""),[be,le]=v.useState([]),[je,I]=v.useState([]),[F,S]=v.useState(!1),{pushToast:$}=Vo(),H=v.useMemo(()=>{if(!e)return"";const E=e.match(/^\/superadmin\/tenants\/([^/]+)\/?$/)||e.match(/^\/superadmin\/tenant\/([^/]+)\/?$/)||e.match(/^\/superadmin\/edit\/([^/]+)\/?$/);return E?E[1]:""},[e]),ee=e.startsWith("/superadmin/new"),b=!!H,G=ee||b,X=v.useCallback(E=>{if(t){t(E,{replace:!1});return}typeof window>"u"||window.history.pushState({},"",E)},[t]);async function U(){try{const E=await ue("/api/superadmin/tenants");a(E.tenants||[]);const Q=await ue("/api/superadmin/channels");o(Q.channels||[]),p("")}catch(E){p(E.message||"No se pudo cargar datos.")}}v.useEffect(()=>{U(),D()},[]),v.useMemo(()=>{const E=new Map;return l.forEach(Q=>{const Z=E.get(Q.tenant_id)||0;E.set(Q.tenant_id,Z+1)}),E},[l]);const re=v.useMemo(()=>{const E=c.trim().toLowerCase();return E?i.filter(Q=>{const Z=String(Q.name||"").toLowerCase(),ne=String(Q.slug||"").toLowerCase(),_e=String(Q.id||"").toLowerCase();return Z.includes(E)||ne.includes(E)||_e.includes(E)}):i.slice()},[i,c]),he=i.length,pe=i.filter(E=>E.is_active).length;i.filter(E=>E.has_database).length;const ve=i.filter(E=>E.has_odoo).length,Ie=he?Math.round(ve/he*100):0;function We(E){if(!E)return"--";const Q=new Date(E);return Number.isNaN(Q.getTime())?"--":Q.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"2-digit"})}function Ue(E){return 10+Math.abs(Array.from(E).reduce((ne,_e)=>ne+_e.charCodeAt(0),0))%70}function He(){T(xt),B(xt),A(""),P(!0),q(!0),I([]),L("Verificacion de red: sistema ok"),ge.current=""}function O(){He(),p(""),X("/superadmin/new")}function ce(){ge.current="",X("/superadmin")}async function Oe(E){if(n)try{p(""),g(E),await n(E)}catch(Q){p(Q.message||"No se pudo entrar al tenant.")}finally{g("")}}function Dt(E){const Q={};return Object.keys(xt).forEach(Z=>{const ne=E[Z];Q[Z]=typeof ne=="string"?ne.trim():ne||""}),{...xt,...Q}}async function _(E){if(E){ge.current=E,A(E),T(xt),B(xt),P(!0),q(!0),I([]),fe(!0),p("");try{const Q=await ue(`/api/superadmin/tenants/${E}/details`);if(ge.current!==E)return;const Z=Q.tenant||{},ne=Q.branding||null,_e=Q.odoo||null,rn=Q.database||null,Y=Q.channel||null,K=(ne==null?void 0:ne.colors)||{},an=Dt({...xt,name:Z.name||"",slug:Z.slug||"",plan:Z.plan||"",db_url:(rn==null?void 0:rn.db_url)||"",brand_name:(ne==null?void 0:ne.brand_name)||"",logo_url:(ne==null?void 0:ne.logo_url)||"",brand_primary:(K==null?void 0:K.primary)||xt.brand_primary,brand_accent:(K==null?void 0:K.accent)||xt.brand_accent,brand_bg:(K==null?void 0:K.bg)||xt.brand_bg,odoo_base_url:(_e==null?void 0:_e.base_url)||"",odoo_db_name:(_e==null?void 0:_e.db_name)||"",odoo_username:(_e==null?void 0:_e.username)||"",odoo_password:(_e==null?void 0:_e.password)||""});T(an),B(an),A(Z.id||E),P(!!Z.is_active),q(!!Z.is_active),L("Modo edicion: cambios pendientes"),await oe(E)}catch(Q){p(Q.message||"No se pudo cargar tenant.")}finally{fe(!1)}}}async function D(){try{const E=await ue("/api/superadmin/flows");le(E.flows||[])}catch(E){console.error("Error loading flows",E)}}async function oe(E){if(E){S(!0);try{const Q=await ue(`/api/superadmin/tenant-bots?tenant_id=${E}`);I(Q.tenant_bots||[])}catch(Q){console.error("Error loading tenant bots",Q)}finally{S(!1)}}}async function ye(E,Q){try{await nt(`/api/superadmin/tenant-bots/${E}`,{is_active:Q}),I(Z=>Z.map(ne=>ne.id===E?{...ne,is_active:Q}:ne))}catch(Z){p(Z.message||"Error al cambiar estado del bot.")}}async function Qe(E){if(j)try{const Q=await Te("/api/superadmin/tenant-bots",{tenant_id:j,flow_id:E});Q.tenant_bot&&(I(Z=>[Q.tenant_bot,...Z]),$({message:"Bot agregado correctamente"}))}catch(Q){p(Q.message||"Error al agregar bot."),$({type:"error",message:Q.message||"Error al agregar bot"})}}async function Ct(E){const Q=je.find(Z=>Z.id===E);try{await Jn(`/api/superadmin/tenant-bots/${E}`),I(Z=>Z.filter(ne=>ne.id!==E)),$({message:"Bot eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{if(!Q)return;const Z=await Te("/api/superadmin/tenant-bots",{tenant_id:Q.tenant_id,flow_id:Q.flow_id});Z!=null&&Z.tenant_bot&&Q.is_active===!1&&await nt(`/api/superadmin/tenant-bots/${Z.tenant_bot.id}`,{is_active:!1}),await oe(j),$({message:"Bot restaurado"})}catch(Z){$({type:"error",message:(Z==null?void 0:Z.message)||"No se pudo restaurar el bot"})}}})}catch(Z){p(Z.message||"Error al eliminar bot."),$({type:"error",message:Z.message||"Error al eliminar bot"})}}async function sn(E){p(""),X(`/superadmin/tenants/${E.id}`)}function An(){const E=m.name.trim(),Q=m.slug.trim(),Z=m.db_url.trim();return!E||!Q?{ok:!1,message:"Nombre y subdominio son requeridos."}:!j&&!Z?{ok:!1,message:"Tenant DB URL es requerido."}:(m.brand_name.trim()||m.logo_url.trim()||m.brand_primary||m.brand_accent||m.brand_bg)&&!m.brand_name.trim()?{ok:!1,message:"Brand name es requerido."}:(m.odoo_base_url||m.odoo_db_name||m.odoo_username||m.odoo_password)&&(!m.odoo_base_url||!m.odoo_db_name||!m.odoo_username||!j&&!m.odoo_password)?{ok:!1,message:"Odoo incompleto: base_url, db_name, username, password."}:{ok:!0}}function qn(){const E=An();if(!E.ok){L(E.message);return}L("Verificacion de red: sistema ok")}async function Pn(E){var Z;if(E.preventDefault(),b&&!Gn)return;const Q=An();if(!Q.ok){p(Q.message);return}try{u(!0),p("");let ne=j;if(ne?await nt(`/api/superadmin/tenants/${ne}`,{name:m.name.trim(),slug:m.slug.trim(),plan:m.plan.trim(),is_active:w}):ne=(Z=(await Te("/api/superadmin/tenants",{name:m.name.trim(),slug:m.slug.trim(),plan:m.plan.trim()})).tenant)==null?void 0:Z.id,!ne)throw new Error("tenant_not_ready");if(m.db_url.trim()&&await Te(`/api/superadmin/tenants/${ne}/database`,{db_url:m.db_url.trim()}),m.brand_name.trim()||m.logo_url.trim()||m.brand_primary||m.brand_accent||m.brand_bg){const Y={};m.brand_primary&&(Y.primary=m.brand_primary),m.brand_accent&&(Y.accent=m.brand_accent),m.brand_bg&&(Y.bg=m.brand_bg),await nt("/api/superadmin/branding",{tenant_id:ne,brand_name:m.brand_name.trim(),logo_url:m.logo_url.trim()||null,colors:Object.keys(Y).length?Y:null})}if(m.odoo_base_url||m.odoo_db_name||m.odoo_username||m.odoo_password){const Y={tenant_id:ne,base_url:m.odoo_base_url.trim(),db_name:m.odoo_db_name.trim(),username:m.odoo_username.trim()};m.odoo_password.trim()&&(Y.password=m.odoo_password.trim()),await nt("/api/superadmin/odoo",Y)}if(await U(),j){const Y=Dt(m);T(Y),B(Y),q(w),L("Cambios guardados"),$({message:"Tenant actualizado correctamente"})}else He(),$({message:"Tenant creado correctamente"})}catch(ne){p(ne.message||"No se pudo guardar tenant."),$({type:"error",message:ne.message||"No se pudo guardar tenant"})}finally{u(!1)}}async function ra(){if(!j)return;const E=!w;try{u(!0),p(""),await nt(`/api/superadmin/tenants/${j}`,{is_active:E}),P(E),q(E),L(E?"Tenant reactivado":"Tenant bloqueado"),await U()}catch(Q){p(Q.message||"No se pudo cambiar estado del tenant.")}finally{u(!1)}}const Gn=v.useMemo(()=>!j&&!b||w!==V?!0:Object.keys(C).some(E=>{const Q=String(m[E]??""),Z=String(C[E]??"");return Q!==Z}),[V,C,w,j,b,m]);return v.useEffect(()=>{if(b&&H&&H!==j){_(H);return}ee&&(j||ie)&&He()},[ie,j,ee,b,H]),r.jsxs("div",{className:"sa-shell",children:[r.jsxs("aside",{className:"sa-rail",children:[r.jsx("div",{className:"sa-rail-logo",children:"PRZV"}),r.jsxs("button",{type:"button",className:`sa-rail-btn ${G?"":"active"}`,onClick:ce,children:[r.jsx(Ny,{className:"sa-rail-icon"}),r.jsx("span",{children:"Dashboard"})]}),r.jsxs("button",{type:"button",className:`sa-rail-btn ${ee?"active":""}`,onClick:O,children:[r.jsx($l,{className:"sa-rail-icon"}),r.jsx("span",{children:"Nuevo"})]}),r.jsxs("button",{type:"button",className:"sa-rail-btn",children:[r.jsx(wy,{className:"sa-rail-icon"}),r.jsx("span",{children:"Ajustes"})]}),r.jsxs("div",{className:"sa-rail-footer",children:[r.jsx("div",{className:"sa-avatar",children:"SA"}),r.jsxs("div",{children:[r.jsx("div",{className:"sa-role",children:"Superadmin"}),r.jsx("div",{className:"sa-meta",children:"Control plane"})]})]})]}),r.jsxs("main",{className:"sa-main",children:[!G&&r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sa-topbar",children:[r.jsxs("div",{children:[r.jsx("div",{className:"sa-kicker",children:"Panel de control Perzivalh"}),r.jsxs("div",{className:"sa-title",children:["Sistema operativo ",r.jsx("span",{className:"sa-dot"})]}),r.jsx("div",{className:"sa-subtitle",children:"Estado general del entorno"})]}),r.jsxs("div",{className:"sa-top-actions",children:[r.jsx("span",{className:"sa-version",children:"v0.4 stable"}),r.jsx("button",{className:"sa-btn ghost",type:"button",onClick:U,children:"Recargar"}),r.jsx("button",{className:"sa-btn ghost",type:"button",onClick:s,children:"Cerrar sesion"}),r.jsx("button",{className:"sa-btn primary",type:"button",onClick:O,children:"Nuevo tenant"})]})]}),r.jsxs("section",{className:"sa-kpi-grid",children:[r.jsxs("div",{className:"sa-kpi-card",children:[r.jsx("div",{className:"sa-kpi-label",children:"Total de empresas (tenants)"}),r.jsx("div",{className:"sa-kpi-value",children:he}),r.jsxs("div",{className:"sa-kpi-meta",children:["+",pe," activas"]})]}),r.jsxs("div",{className:"sa-kpi-card",children:[r.jsx("div",{className:"sa-kpi-label",children:"Usuarios activos totales"}),r.jsx("div",{className:"sa-kpi-value",children:"--"}),r.jsx("div",{className:"sa-kpi-meta",children:"En tiempo real"})]}),r.jsxs("div",{className:"sa-kpi-card",children:[r.jsx("div",{className:"sa-kpi-label",children:"Mensajes hoy"}),r.jsx("div",{className:"sa-kpi-value",children:"--"}),r.jsx("div",{className:"sa-kpi-meta",children:"Canal API"})]}),r.jsxs("div",{className:"sa-kpi-card",children:[r.jsx("div",{className:"sa-kpi-label",children:"Conexiones Odoo activas"}),r.jsxs("div",{className:"sa-kpi-value",children:[Ie,"%"]}),r.jsxs("div",{className:"sa-kpi-meta",children:[ve," sincronizadas"]})]})]}),r.jsxs("section",{className:"sa-table-card",children:[r.jsxs("div",{className:"sa-table-header",children:[r.jsxs("div",{className:"sa-search",children:[r.jsx(_y,{className:"sa-search-icon"}),r.jsx("input",{value:c,onChange:E=>d(E.target.value),placeholder:"Filtrar empresas..."})]}),r.jsxs("div",{className:"sa-table-actions",children:[r.jsx("button",{className:"sa-btn ghost",type:"button",children:"Ordenar por salud"}),r.jsx("button",{className:"sa-btn ghost",type:"button",children:"Exportar CSV"})]})]}),r.jsxs("div",{className:"sa-table",children:[r.jsxs("div",{className:"sa-table-head",children:[r.jsx("div",{children:"ID referencia"}),r.jsx("div",{children:"Nombre de la empresa"}),r.jsx("div",{children:"Estado"}),r.jsx("div",{children:"Uso de recursos"}),r.jsx("div",{children:"Tiempo de actividad"}),r.jsx("div",{children:"Acciones"})]}),re.length?re.map(E=>{var _e;const Q=Ue(E.id||"tenant"),Z=E.has_database?"db":"no-db",ne=E.has_database;return r.jsxs("div",{className:"sa-table-row",children:[r.jsx("div",{className:"sa-ref",children:((_e=E.slug)==null?void 0:_e.toUpperCase())||"TENANT"}),r.jsxs("div",{children:[r.jsx("div",{className:"sa-tenant-name",children:E.name}),r.jsx("div",{className:"sa-tenant-meta",children:E.id.slice(0,8)})]}),r.jsx("div",{className:`sa-status ${E.is_active?"ok":"warn"}`,children:E.is_active?"activo":"inactivo"}),r.jsxs("div",{children:[r.jsx("div",{className:"sa-progress",children:r.jsx("span",{className:`sa-progress-fill ${Z}`,style:{width:`${Q}%`}})}),r.jsxs("div",{className:"sa-tenant-meta",children:[Q,"% carga"]})]}),r.jsx("div",{className:"sa-tenant-meta",children:We(E.created_at)}),r.jsx("div",{children:r.jsxs("div",{className:"sa-action-group",children:[r.jsx("button",{className:"sa-action",type:"button",onClick:()=>Oe(E.id),disabled:!ne||f===E.id,children:ne?f===E.id?"Entrando...":"Entrar":"Sin DB"}),r.jsx("button",{className:"sa-link",type:"button",onClick:()=>sn(E),children:r.jsx(ky,{className:"sa-link-icon"})})]})})]},E.id)}):r.jsx("div",{className:"sa-empty",children:"Sin tenants para mostrar."})]}),r.jsxs("div",{className:"sa-footer-note",children:["Mostrando ",re.length||0," empresas en produccion"]})]})]}),G&&r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sa-create-header",children:[r.jsx("button",{className:"sa-back",type:"button",onClick:ce,children:"Volver al dashboard"}),r.jsx("div",{className:"sa-create-title",children:b?"Editar tenant":"Registrar nuevo tenant"}),r.jsxs("div",{className:"sa-create-actions",children:[r.jsx("div",{className:"sa-create-meta",children:"Modo: superadmin"}),r.jsx("button",{className:"sa-btn ghost",type:"button",onClick:s,children:"Cerrar sesion"})]})]}),x?r.jsx("div",{className:"sa-alert",children:x}):null,r.jsxs("form",{className:"sa-form",onSubmit:Pn,children:[r.jsxs("div",{className:"sa-form-grid sa-form-grid-2",children:[r.jsxs("div",{className:"sa-form-section",children:[r.jsx("div",{className:"sa-section-title",children:"Identidad del tenant"}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Nombre de la empresa"}),r.jsx("input",{value:m.name,onChange:E=>T({...m,name:E.target.value}),placeholder:"Ej. Empresa Alfa"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Subdominio reservado"}),r.jsx("input",{value:m.slug,onChange:E=>T({...m,slug:E.target.value}),placeholder:"alfa-salud"})]}),r.jsxs("div",{className:"sa-field sa-field-row",children:[r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Plan"}),r.jsxs("select",{value:m.plan,onChange:E=>T({...m,plan:E.target.value}),children:[r.jsx("option",{value:"",children:"Seleccionar"}),jy.map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))]})]}),b&&r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Estado del tenant"}),r.jsxs("select",{value:w?"active":"inactive",onChange:E=>P(E.target.value==="active"),children:[r.jsx("option",{value:"active",children:"Activo"}),r.jsx("option",{value:"inactive",children:"Bloqueado"})]})]})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Brand name"}),r.jsx("input",{value:m.brand_name,onChange:E=>T({...m,brand_name:E.target.value}),placeholder:"Perzivalh"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Logo URL"}),r.jsx("input",{value:m.logo_url,onChange:E=>T({...m,logo_url:E.target.value}),placeholder:"https://"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Paleta de colores"}),r.jsxs("div",{className:"sa-color-grid",children:[r.jsxs("div",{className:"sa-color-control",children:[r.jsx("span",{children:"Primario"}),r.jsxs("div",{className:"sa-color-row",children:[r.jsx("input",{type:"color",value:m.brand_primary,onChange:E=>T({...m,brand_primary:E.target.value})}),r.jsx("input",{className:"sa-color-input",value:m.brand_primary,onChange:E=>T({...m,brand_primary:E.target.value})})]})]}),r.jsxs("div",{className:"sa-color-control",children:[r.jsx("span",{children:"Accent"}),r.jsxs("div",{className:"sa-color-row",children:[r.jsx("input",{type:"color",value:m.brand_accent,onChange:E=>T({...m,brand_accent:E.target.value})}),r.jsx("input",{className:"sa-color-input",value:m.brand_accent,onChange:E=>T({...m,brand_accent:E.target.value})})]})]}),r.jsxs("div",{className:"sa-color-control",children:[r.jsx("span",{children:"Fondo"}),r.jsxs("div",{className:"sa-color-row",children:[r.jsx("input",{type:"color",value:m.brand_bg,onChange:E=>T({...m,brand_bg:E.target.value})}),r.jsx("input",{className:"sa-color-input",value:m.brand_bg,onChange:E=>T({...m,brand_bg:E.target.value})})]})]})]})]}),!b&&r.jsx("div",{className:"sa-note",children:"Nota: al registrar un tenant se inicia el aprovisionamiento en el entorno de produccion."})]}),r.jsxs("div",{className:"sa-form-section",children:[r.jsx("div",{className:"sa-section-title",children:"Variables de entorno (envs)"}),r.jsxs("div",{className:"sa-subsection",children:[r.jsx("div",{className:"sa-subsection-title",children:"Base de datos"}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Tenant DB URL"}),r.jsx("input",{value:m.db_url,onChange:E=>T({...m,db_url:E.target.value}),placeholder:"postgresql://..."})]})]}),r.jsxs("div",{className:"sa-subsection",children:[r.jsx("div",{className:"sa-subsection-title",children:"Odoo (opcional)"}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Odoo Base URL"}),r.jsx("input",{value:m.odoo_base_url,onChange:E=>T({...m,odoo_base_url:E.target.value}),placeholder:"https://odoo-instancia"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Odoo DB Name"}),r.jsx("input",{value:m.odoo_db_name,onChange:E=>T({...m,odoo_db_name:E.target.value}),placeholder:"db_tenant_prod"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Odoo User"}),r.jsx("input",{value:m.odoo_username,onChange:E=>T({...m,odoo_username:E.target.value}),placeholder:"usuario@empresa.com"})]}),r.jsxs("div",{className:"sa-field",children:[r.jsx("label",{children:"Odoo Password (opcional)"}),r.jsx("input",{type:"password",value:m.odoo_password,onChange:E=>T({...m,odoo_password:E.target.value}),placeholder:"********"})]})]})]})]}),r.jsxs("div",{className:"sa-form-actions",children:[r.jsx("div",{className:"sa-status-note",children:b?ie?"Cargando datos...":Gn?"Cambios pendientes":"Sin cambios":y}),r.jsx("div",{className:"sa-form-buttons",children:b?r.jsxs(r.Fragment,{children:[Gn&&r.jsx("button",{className:"sa-btn primary",type:"submit",disabled:N,children:N?"Guardando...":"Guardar cambios"}),r.jsx("button",{className:"sa-btn danger",type:"button",onClick:ra,disabled:N||!j,children:w?"Bloquear tenant":"Reactivar tenant"})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"sa-btn ghost",type:"button",onClick:qn,children:"Validar conexion"}),r.jsx("button",{className:"sa-btn primary",type:"submit",disabled:N,children:N?"Guardando...":"Desplegar instancia"})]})})]})]}),j?r.jsx(Ay,{channels:l.filter(E=>E.tenant_id===j),tenantId:j,onRefresh:U}):r.jsx("div",{style:{marginTop:"2rem",padding:"1rem",border:"1px dashed rgba(255,255,255,0.2)",borderRadius:"12px",color:"rgba(255,255,255,0.5)",fontSize:"0.8rem",textAlign:"center"},children:"Crea el tenant primero para configurar las lneas de WhatsApp."}),j&&r.jsx(xy,{tenantId:j,tenantBots:je,availableFlows:be,loading:F,onToggleBot:ye,onAddBot:Qe,onRemoveBot:Ct})]})]})]})}const Eu=["open","pending","closed"],Cu=["admin","recepcion","caja","marketing","doctor"],Gt={admin:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!0},campaigns:{read:!0,write:!0},settings:{read:!0,write:!0}},settings:{general:{read:!0,write:!0},users:{read:!0,write:!0},bot:{read:!0,write:!0},templates:{read:!0,write:!0},audit:{read:!0,write:!0},odoo:{read:!0,write:!0}}},recepcion:{modules:{chat:{read:!0,write:!0},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},caja:{modules:{chat:{read:!0,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},marketing:{modules:{chat:{read:!1,write:!1},dashboard:{read:!0,write:!1},campaigns:{read:!0,write:!0},settings:{read:!0,write:!1}},settings:{general:{read:!0,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!0,write:!0},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}},doctor:{modules:{chat:{read:!0,write:!1},dashboard:{read:!1,write:!1},campaigns:{read:!1,write:!1},settings:{read:!1,write:!1}},settings:{general:{read:!1,write:!1},users:{read:!1,write:!1},bot:{read:!1,write:!1},templates:{read:!1,write:!1},audit:{read:!1,write:!1},odoo:{read:!1,write:!1}}}};function Ba(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleString()}function Py(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleDateString()}function Ry(e){if(!e)return"-";const t=new Date(e);if(Number.isNaN(t.getTime()))return"-";const n=new Date,s=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=Math.round((s-i)/864e5);return a===0?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):a===1?"Ayer":["Dom","Lun","Mar","Mie","Jue","Vie","Sab"][t.getDay()]}function Oy(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=new Date,s=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=Math.round((s-i)/864e5);if(a===0)return"Hoy";if(a===1)return"Ayer";const l=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],o=`${t.getDate()} ${l[t.getMonth()]}`;return t.getFullYear()!==n.getFullYear()?`${o} ${t.getFullYear()}`:o}function J(e){return e?typeof e=="string"?e:e.message||"Error inesperado":"Error inesperado"}function My(e,t){return e?t.includes(e.role):!1}function za(e){if(!e||typeof e!="object")return{...Gt};const t={...Gt};return Object.entries(e).forEach(([n,s])=>{var i,a;!s||typeof s!="object"||(t[n]={modules:{...(i=Gt[n])==null?void 0:i.modules,...s.modules},settings:{...(a=Gt[n])==null?void 0:a.settings,...s.settings}})}),t}function et(e,t,n,s="read"){var a;const i=(a=e==null?void 0:e[t])==null?void 0:a[n];return i?!!i[s]:!1}function Ua(e){return[...e].sort((t,n)=>{const s=new Date(t.last_message_at||t.created_at||0).getTime();return new Date(n.last_message_at||n.created_at||0).getTime()-s})}function Dy(e){const t=new URLSearchParams;Object.entries(e||{}).forEach(([s,i])=>{i==null||i===""||t.append(s,i)});const n=t.toString();return n?`?${n}`:""}function bu(e){if(!e)return"?";const t=e.trim();return t?t[0].toUpperCase():"?"}function Tu(e){const t=String(e||"").replace("#","").trim();if(t.length!==6)return null;const n=Number.parseInt(t,16);return Number.isNaN(n)?null:{r:n>>16&255,g:n>>8&255,b:n&255}}function $a(e,t=0,n=255){return Math.min(n,Math.max(t,e))}function Jr(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t})`}function Iy(e,t=.18){return{r:$a(Math.round(e.r*(1-t))),g:$a(Math.round(e.g*(1-t))),b:$a(Math.round(e.b*(1-t)))}}function Lu(e){var o,c,d;if(typeof document>"u")return;const t=document.documentElement.style;if(!(e!=null&&e.colors)){t.removeProperty("--accent"),t.removeProperty("--accent-strong"),t.removeProperty("--accent-soft"),t.removeProperty("--accent-soft-2"),t.removeProperty("--scroll-thumb"),t.removeProperty("--scroll-thumb-hover");return}const n=((o=e.colors)==null?void 0:o.primary)||((c=e.colors)==null?void 0:c.accent),s=((d=e.colors)==null?void 0:d.accent)||n,i=Tu(n),a=Tu(s);if(!i||!a)return;const l=Iy(a,.22);t.setProperty("--accent",`#${n.replace("#","")}`),t.setProperty("--accent-strong",`#${s.replace("#","")}`),t.setProperty("--accent-soft",Jr(a,.18)),t.setProperty("--accent-soft-2",Jr(a,.12)),t.setProperty("--scroll-thumb",Jr(l,.45)),t.setProperty("--scroll-thumb-hover",Jr(l,.65))}function By(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M4.5 5.5h15v10H8l-3.5 3.5V5.5Z",strokeWidth:"1.8",strokeLinejoin:"round"}),r.jsx("path",{d:"M8 9h8",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M8 12.5h5",strokeWidth:"1.8",strokeLinecap:"round"})]})}function zy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),r.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),r.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"}),r.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1.6",strokeWidth:"1.8"})]})}function Uy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M6 9a6 6 0 1 1 12 0c0 4.2 2 5.5 2 5.5H4S6 13.2 6 9Z",strokeWidth:"1.8",strokeLinejoin:"round"}),r.jsx("path",{d:"M9.5 19a2.5 2.5 0 0 0 5 0",strokeWidth:"1.8"})]})}function $y(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"2",strokeLinecap:"round"})]})}function Vy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"12",cy:"12",r:"4",strokeWidth:"1.8"}),r.jsx("path",{d:"M12 3v2.5",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M12 18.5V21",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M3 12h2.5",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M18.5 12H21",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M5.2 5.2l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M17 17l1.8 1.8",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M5.2 18.8 7 17",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M17 7l1.8-1.8",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Fy(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"M20 14.2A8.5 8.5 0 1 1 9.8 4 6.5 6.5 0 0 0 20 14.2Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function Wy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"11",cy:"11",r:"6.5",strokeWidth:"1.8"}),r.jsx("path",{d:"M16.5 16.5 21 21",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Hy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("path",{d:"M12 5v14",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("path",{d:"M5 12h14",strokeWidth:"1.8",strokeLinecap:"round"})]})}function Qy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("rect",{x:"3.5",y:"6",width:"11",height:"12",rx:"2",strokeWidth:"1.8"}),r.jsx("path",{d:"m14.5 10 6-3v10l-6-3",strokeWidth:"1.8"})]})}function qy(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"M6.5 4.5 9 3l2.5 4-2.5 1.5c1.2 2.3 3.2 4.3 5.5 5.5L16 11l4 2.5-1.5 2.5c-.7 1.2-2.2 1.7-3.6 1.3a15.9 15.9 0 0 1-7.7-7.7c-.4-1.4.1-2.9 1.3-3.6Z",strokeWidth:"1.6",strokeLinejoin:"round"})})}function Gy(e){return r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:[r.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"1.8"}),r.jsx("path",{d:"M12 10v6",strokeWidth:"1.8",strokeLinecap:"round"}),r.jsx("circle",{cx:"12",cy:"7.5",r:"1",fill:"currentColor"})]})}function Yy(e){return r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...e,children:r.jsx("path",{d:"m4 12 15-7-6 14-2.5-5.2L4 12Z",strokeWidth:"1.8",strokeLinejoin:"round"})})}function Ky(){const[e,t]=v.useState(localStorage.getItem("token")||""),[n,s]=v.useState(()=>typeof window<"u"&&localStorage.getItem("superadmin_token")||""),[i,a]=v.useState(null),[l,o]=v.useState(null),[c,d]=v.useState(null),[x,p]=v.useState([]),[y,L]=v.useState({id:"",display_name:""}),[m,T]=v.useState(()=>{if(typeof window>"u")return{};try{return JSON.parse(localStorage.getItem("last_read_map")||"{}")}catch{return{}}}),[N,u]=v.useState({email:"",password:""}),[f,g]=v.useState(""),[j,A]=v.useState("chats"),[w,P]=v.useState(()=>typeof window<"u"?window.location.pathname:"/"),[C,B]=v.useState(()=>localStorage.getItem("theme")||"light"),[V,q]=v.useState(!1),[ie,fe]=v.useState(!1),[ge,be]=v.useState(!1),[le,je]=v.useState(!0),[I,F]=v.useState(!1),S=v.useRef(null),$=v.useRef(null),H=v.useRef(0),[ee,b]=v.useState("users"),[G,X]=v.useState("list"),[U,re]=v.useState(()=>za(null)),[he,pe]=v.useState(!1),[ve,Ie]=v.useState(!1),[We,Ue]=v.useState(!1),He=v.useMemo(()=>{const h=Object.keys(U||{}).filter(k=>!Cu.includes(k));return[...Cu,...h]},[U]),[O,ce]=v.useState({status:"",assigned_user_id:"",tag:"",search:"",phone_number_id:""}),Oe=w.startsWith("/superadmin"),[Dt,_]=v.useState([]),[D,oe]=v.useState(null),[ye,Qe]=v.useState([]),[Ct,sn]=v.useState(""),[An,qn]=v.useState("text"),[Pn,ra]=v.useState([]),[Gn,E]=v.useState([]),[Q,Z]=v.useState(""),[ne,_e]=v.useState(!1),[rn,Y]=v.useState(""),{pushToast:K}=Vo(),an=v.useRef(new Map),bs=v.useRef(new Map),Ts=v.useRef(new Map),Ls=v.useRef(new Map),[br,lf]=v.useState(null),[As,Ps]=v.useState([]),[of,cf]=v.useState([]),[uf,df]=v.useState([]),[hf,ff]=v.useState(""),[Jy,Zy]=v.useState(null),[ex,tx]=v.useState([]),[nx,sx]=v.useState(null),[ln,Fo]=v.useState({name:"",template_id:"",scheduled_for:""}),[on,Wo]=v.useState({status:"",tag:"",assigned_user_id:"",verified_only:!1}),[Ho,Rs]=v.useState([]),[ht,Qo]=v.useState({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),[Tr,ia]=v.useState(null),[pf,mf]=v.useState([]),[gf,vf]=v.useState([]),[Ze,qo]=v.useState({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),[qe,Go]=v.useState({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),[Yo,yf]=v.useState({id:"",name:"",language:"es",category:"",body_preview:"",is_active:!0}),[xf,jf]=v.useState([]),Ht=v.useCallback((h,k={})=>{if(typeof window>"u")return;const R=h||"/";if(window.location.pathname===R){P(R);return}k.replace?window.history.replaceState({},"",R):window.history.pushState({},"",R),P(R)},[]),Nf=v.useMemo(()=>As.find(h=>h.id===ln.template_id),[As,ln.template_id]),wf=v.useMemo(()=>{const h=[...ye].reverse().find(k=>k.type==="note");return(h==null?void 0:h.text)||""},[ye]);v.useEffect(()=>{if(typeof window>"u")return;const h=()=>{P(window.location.pathname||"/")};return window.addEventListener("popstate",h),()=>window.removeEventListener("popstate",h)},[]),v.useEffect(()=>{Xn(e||null)},[e]),v.useEffect(()=>{document.body.dataset.theme=C,localStorage.setItem("theme",C)},[C]),v.useEffect(()=>{F(!1),je(!0),requestAnimationFrame(()=>{Ar()}),D&&aa(D)},[D==null?void 0:D.id]),v.useEffect(()=>{j==="chats"&&(F(!1),je(!0),requestAnimationFrame(()=>{Ar()}))},[j,D==null?void 0:D.id]),v.useEffect(()=>{D&&(le?Ar():F(!0))},[ye,D==null?void 0:D.id,le]),v.useEffect(()=>{j!=="chats"&&je(!1)},[j]),v.useEffect(()=>{if(!e)return;let h=!0;return ue("/api/me").then(k=>{h&&a(k.user)}).catch(()=>{h&&(t(""),a(null))}),()=>{h=!1}},[e]),v.useEffect(()=>{if(!i||i.role==="superadmin"){o(null),p([]),Lu(null);return}let h=!0;return ue("/api/branding").then(k=>{h&&o(k.branding||null)}).catch(()=>{h&&o(null)}),ue("/api/tenant").then(k=>{h&&d(k.tenant||null)}).catch(()=>{h&&d(null)}),ue("/api/channels").then(k=>{h&&p(k.channels||[])}).catch(()=>{h&&p([])}),()=>{h=!1}},[i]),v.useEffect(()=>{Lu(l)},[l]),v.useEffect(()=>{if(i){if(i.role==="superadmin"){Oe||Ht("/superadmin",{replace:!0});return}Oe&&Ht("/",{replace:!0})}},[i,Oe,Ht]),v.useEffect(()=>{i&&i.role!=="superadmin"&&(_f(),Ko())},[i]),v.useEffect(()=>{i&&i.role!=="superadmin"&&kf()},[i]),v.useEffect(()=>{!i||j!=="chats"||i.role!=="superadmin"&&Sf()},[i,j,O]),v.useEffect(()=>{i&&i.role!=="superadmin"&&(j==="dashboard"&&Jo(),j==="campaigns"&&(Yn(),Pr()))},[i,j]),v.useEffect(()=>{if(!i||j!=="admin")return;const h=(U==null?void 0:U[i.role])||Gt[i.role],k=et(h,"settings","users"),R=et(h,"settings","bot"),z=et(h,"settings","general"),te=et(h,"settings","templates"),It=et(h,"settings","audit");ee==="users"&&k&&Os(),ee==="bot"&&R&&Hf(),ee==="general"&&z&&cn(),ee==="templates"&&te&&Yn(),ee==="audit"&&It&&ip()},[i,j,ee,U]),v.useEffect(()=>{if(!i||j!=="admin")return;const h=(U==null?void 0:U[i.role])||Gt[i.role],R=["general","users","bot","templates","audit","odoo"].filter(z=>et(h,"settings",z));if(!R.length){A(result.user.role==="superadmin"?"superadmin":"chats");return}R.includes(ee)||b(R[0])},[i,j,ee,U]),v.useEffect(()=>{if(!e||(i==null?void 0:i.role)==="superadmin")return;const h=Wv(e);return h.on("conversation:update",({conversation:k})=>{_(R=>{const z=R.map(te=>te.id===k.id?{...te,...k}:te);return z.find(te=>te.id===k.id)||z.push(k),Ua(z)}),oe(R=>(R==null?void 0:R.id)===k.id?{...R,...k}:R)}),h.on("message:new",({conversation:k,message:R})=>{const z={...k,last_message_text:(R==null?void 0:R.text)||null,last_message_type:(R==null?void 0:R.type)||null,last_message_direction:(R==null?void 0:R.direction)||null,last_message_at:(R==null?void 0:R.created_at)||k.last_message_at};_(te=>{const It=te.map(Ge=>Ge.id===k.id?{...Ge,...z}:Ge);return It.find(Ge=>Ge.id===k.id)||It.push(z),Ua(It)}),oe(te=>(te==null?void 0:te.id)===k.id?{...te,...z}:te),Qe(te=>!D||D.id!==k.id?te:(aa(z),[...te,R]))}),()=>{h.disconnect()}},[e,D]),v.useEffect(()=>{if(!i)return;if(i.role==="superadmin"){j!=="superadmin"&&A("superadmin");return}const h=(U==null?void 0:U[i.role])||Gt[i.role],k=et(h,"modules","chat"),R=et(h,"modules","dashboard"),z=et(h,"modules","campaigns"),te=et(h,"modules","settings");j==="chats"&&!k&&A(R?"dashboard":z?"campaigns":"admin"),j==="dashboard"&&!R&&A(k?"chats":z?"campaigns":"admin"),j==="campaigns"&&!z&&A(k?"chats":R?"dashboard":"admin"),j==="admin"&&!te&&A(k?"chats":R?"dashboard":"campaigns")},[i,j,U]),v.useEffect(()=>{if(!i||i.role!=="admin"||!he||!ve||We)return;const h=setTimeout(()=>{const k=H.current;Ue(!0),nt("/api/admin/role-permissions",{permissions:U}).then(()=>{H.current===k&&Ie(!1)}).catch(R=>{Y(J(R))}).finally(()=>{Ue(!1)})},350);return()=>clearTimeout(h)},[i,U,ve,he,We]);async function _f(){try{const h=await ue("/api/users");E(h.users||[])}catch(h){Y(J(h))}}async function kf(){try{const h=await ue("/api/role-permissions"),k=za(h.permissions||null);H.current=0,re(k),Ie(!1),pe(!0)}catch(h){Y(J(h)),pe(!0)}}async function Ko(){try{const h=await ue("/api/tags");ra(h.tags||[])}catch(h){Y(J(h))}}async function Sf(){try{const h=Dy(O),k=await ue(`/api/conversations${h}`);_(Ua(k.conversations||[]))}catch(h){Y(J(h))}}async function Ef(h){_e(!0);try{const k=await ue(`/api/conversations/${h}`);oe(k.conversation),Qe(k.messages||[]),aa(k.conversation)}catch(k){Y(J(k))}finally{_e(!1)}}async function Cf(h){h.preventDefault(),g("");try{const k=await Te("/api/auth/login",{email:N.email,password:N.password});t(k.token),Xn(k.token),a(k.user),s(""),localStorage.removeItem("superadmin_token");const R=k.user.role==="superadmin";A(R?"superadmin":"chats"),R?Ht("/superadmin",{replace:!0}):Oe&&Ht("/",{replace:!0})}catch{g("Credenciales invalidas")}}function Lr(){t(""),Xn(null),a(null),_([]),oe(null),Qe([]),A("chats"),be(!1),re(za(null)),pe(!1),Ie(!1),Ue(!1),H.current=0,s(""),localStorage.removeItem("superadmin_token"),Ht("/",{replace:!0})}async function Xo(h){const k=await Te(`/api/superadmin/tenants/${h}/impersonate`);!n&&e&&(localStorage.setItem("superadmin_token",e),s(e)),t(k.token),Xn(k.token),a(k.user),A("chats"),Ht("/",{replace:!0})}function bf(){const h=n||(typeof window<"u"?localStorage.getItem("superadmin_token"):"");if(!h){Lr();return}localStorage.removeItem("superadmin_token"),s(""),t(h),Xn(h),a(null),A("chats"),Ht("/superadmin",{replace:!0})}function Tf(h){re(k=>typeof h=="function"?h(k):h),H.current+=1,Ie(!0)}function Lf(){B(h=>h==="light"?"dark":"light")}function Ar(){const h=$.current;h&&(h.scrollTop=h.scrollHeight,je(!0),F(!1))}function aa(h){!(h!=null&&h.id)||!(h!=null&&h.last_message_at)||T(k=>{const R={...k,[h.id]:h.last_message_at};return localStorage.setItem("last_read_map",JSON.stringify(R)),R})}function Af(){const h=$.current;if(!h)return;const R=h.scrollHeight-h.scrollTop-h.clientHeight<24;je(R),R&&F(!1)}function Pf(){oe(null),Qe([])}function Rf(h){var k;sn(h),(k=S.current)==null||k.focus()}async function Of(h){if(h.preventDefault(),!D||!Ct.trim())return;const k=Ct.trim();sn("");try{await Te(`/api/conversations/${D.id}/messages`,{text:k,type:An})}catch(R){Y(J(R))}}async function Mf(){if(D)try{const h=await Te(`/api/conversations/${D.id}/assign`);oe(h.conversation)}catch(h){Y(J(h))}}async function Df(h){if(D)try{const k=await Te(`/api/conversations/${D.id}/status`,{status:h});oe(k.conversation)}catch(k){Y(J(k))}}async function If(h){var R;if(!D)return;const k=((R=D.tags)==null?void 0:R.some(z=>z.name===h))||!1;if(k){const z=`${D.id}:${h}`;if(Ls.current.has(z))return;const te=D,It={...D,tags:(D.tags||[]).filter(at=>at.name!==h)};oe(It);const Ge=setTimeout(async()=>{try{const at=await Te(`/api/conversations/${te.id}/tags`,{add:[],remove:[h]});(D==null?void 0:D.id)===te.id&&oe(at.conversation)}catch(at){(D==null?void 0:D.id)===te.id&&oe(te),K({type:"error",message:J(at)||"No se pudo eliminar el tag"})}finally{Ls.current.delete(z)}},8e3);Ls.current.set(z,{timer:Ge,snapshot:te}),K({message:"Tag eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const at=Ls.current.get(z);at!=null&&at.timer&&clearTimeout(at.timer),at!=null&&at.snapshot?oe(at.snapshot):oe(te),Ls.current.delete(z),K({message:"Eliminacin cancelada"})}});return}try{const z=await Te(`/api/conversations/${D.id}/tags`,{add:k?[]:[h],remove:k?[h]:[]});oe(z.conversation)}catch(z){Y(J(z))}}async function Bf(h){if(h.preventDefault(),!Q.trim()||!D)return;const k=Q.trim();Z("");try{const R=await Te(`/api/conversations/${D.id}/tags`,{add:[k]});oe(R.conversation),await Ko()}catch(R){Y(J(R))}}async function Jo(){try{const h=await ue("/api/dashboard/metrics");lf(h)}catch(h){Y(J(h))}}async function Yn(){try{const h=await ue("/api/templates").catch(()=>ue("/api/admin/templates"));Ps(h.templates||[])}catch(h){Y(J(h))}}async function Pr(){try{const h=await ue("/api/admin/campaigns");cf(h.campaigns||[])}catch(h){Y(J(h))}}async function zf(h){ff(h);try{const k=await ue(`/api/admin/campaigns/${h}/messages`);df(k.messages||[])}catch(k){Y(J(k))}}async function Uf(h){if(h.preventDefault(),!ln.name.trim()||!ln.template_id){Y("Completa el nombre y plantilla");return}const k={};on.status&&(k.status=on.status),on.tag&&(k.tag=on.tag.trim()),on.assigned_user_id&&(k.assigned_user_id=on.assigned_user_id),on.verified_only&&(k.verified_only=!0);try{await Te("/api/admin/campaigns",{name:ln.name.trim(),template_id:ln.template_id,audience_filter:k,scheduled_for:ln.scheduled_for||null}),Fo({name:"",template_id:"",scheduled_for:""}),Wo({status:"",tag:"",assigned_user_id:"",verified_only:!1}),await Pr(),K({message:"Campaa creada correctamente"})}catch(R){Y(J(R)),K({type:"error",message:J(R)||"Error al crear campaa"})}}async function $f(h){try{await Te(`/api/admin/campaigns/${h}/send`,{}),await Pr()}catch(k){Y(J(k))}}async function Vf(){try{await ue("/api/templates/sync"),await Yn()}catch(h){Y(J(h))}}async function Os(){try{const h=await ue("/api/admin/users");Rs(h.users||[])}catch(h){Y(J(h))}}async function Ff(h){if(h.preventDefault(),!ht.name.trim()||!ht.role){Y("Completa los campos requeridos");return}try{ht.id?(await nt(`/api/admin/users/${ht.id}`,{name:ht.name.trim(),role:ht.role,is_active:ht.is_active,password:ht.password||void 0}),K({message:"Usuario actualizado correctamente"})):(await Te("/api/admin/users",{name:ht.name.trim(),email:ht.email.trim().toLowerCase(),role:ht.role,password:ht.password}),K({message:"Usuario creado correctamente"})),Qo({id:"",name:"",email:"",role:"recepcion",password:"",is_active:!0}),await Os()}catch(k){Y(J(k)),K({type:"error",message:J(k)||"Error al guardar usuario"})}}async function Wf(h){if(!h||an.current.has(h))return;let k=null;try{k=Ho.slice(),Rs(z=>z.filter(te=>te.id!==h));const R=setTimeout(async()=>{try{await Jn(`/api/admin/users/${h}`),await Os(),K({message:"Usuario eliminado definitivamente"})}catch(z){k?Rs(k):await Os(),K({type:"error",message:J(z)||"No se pudo eliminar el usuario"})}finally{an.current.delete(h)}},8e3);an.current.set(h,{timer:R,snapshot:k}),K({message:"Usuario eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const z=an.current.get(h);z!=null&&z.timer&&clearTimeout(z.timer),z!=null&&z.snapshot?Rs(z.snapshot):k?Rs(k):await Os(),an.current.delete(h),K({message:"Eliminacin cancelada"})}})}catch(R){Y(J(R)),K({type:"error",message:J(R)||"Error al eliminar usuario"})}}async function Hf(){try{const h=await ue("/api/admin/settings");ia(h.settings)}catch(h){Y(J(h))}}async function Qf(){if(Tr)try{const h=await nt("/api/admin/settings",{bot_enabled:Tr.bot_enabled,auto_reply_enabled:Tr.auto_reply_enabled});ia(h.settings)}catch(h){Y(J(h))}}async function cn(){try{const[h,k]=await Promise.all([ue("/api/admin/branches"),ue("/api/admin/services")]);mf(h.branches||[]),vf(k.services||[])}catch(h){Y(J(h))}}async function qf(){try{const h=await ue("/api/channels");p(h.channels||[])}catch{p([])}}function Gf(h){L({id:h.id,display_name:h.display_name||""})}async function Yf(h){if(h.preventDefault(),!!y.id)try{await nt(`/api/channels/${y.id}`,{display_name:y.display_name.trim()}),L({id:"",display_name:""}),await qf(),K({message:"Canal actualizado correctamente"})}catch(k){Y(J(k)),K({type:"error",message:J(k)||"Error al guardar canal"})}}async function Kf(h){const k=U==null?void 0:U[h];if(!(!h||bs.current.has(h)))try{re(z=>{const te={...z};return delete te[h],te});const R=setTimeout(async()=>{try{await Jn(`/api/admin/role-permissions/${h}`),K({message:"Rol eliminado definitivamente"})}catch(z){k&&re(te=>({...te,[h]:k})),K({type:"error",message:J(z)||"No se pudo eliminar el rol"})}finally{bs.current.delete(h)}},8e3);bs.current.set(h,{timer:R,currentPermissions:k}),K({message:"Rol eliminado. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const z=bs.current.get(h);z!=null&&z.timer&&clearTimeout(z.timer),z!=null&&z.currentPermissions&&re(te=>({...te,[h]:z.currentPermissions})),bs.current.delete(h),K({message:"Eliminacin cancelada"})}})}catch(R){Y(J(R)),K({type:"error",message:J(R)||"Error al eliminar rol"})}}async function Xf(h){if(h.preventDefault(),!Ze.code.trim()||!Ze.name.trim()){Y("Completa codigo y nombre");return}const k={code:Ze.code.trim(),name:Ze.name.trim(),address:Ze.address.trim(),lat:Ze.lat!==""?Number(Ze.lat):0,lng:Ze.lng!==""?Number(Ze.lng):0,hours_text:Ze.hours_text.trim(),phone:Ze.phone.trim()||null,is_active:Ze.is_active};try{Ze.id?(await nt(`/api/admin/branches/${Ze.id}`,k),K({message:"Sucursal actualizada correctamente"})):(await Te("/api/admin/branches",k),K({message:"Sucursal creada correctamente"})),qo({id:"",code:"",name:"",address:"",lat:"",lng:"",hours_text:"",phone:"",is_active:!0}),await cn()}catch(R){Y(J(R)),K({type:"error",message:J(R)||"Error al guardar sucursal"})}}async function Jf(h){try{await Jn(`/api/admin/branches/${h}`),await cn(),K({message:"Sucursal eliminada correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await nt(`/api/admin/branches/${h}`,{is_active:!0}),await cn(),K({message:"Sucursal restaurada"})}catch(k){K({type:"error",message:J(k)||"No se pudo restaurar la sucursal"})}}})}catch(k){Y(J(k)),K({type:"error",message:J(k)||"Error al eliminar sucursal"})}}async function Zf(h){if(h.preventDefault(),!qe.code.trim()||!qe.name.trim()){Y("Completa codigo y nombre");return}const k={code:qe.code.trim(),name:qe.name.trim(),subtitle:qe.subtitle.trim()||null,description:qe.description.trim(),price_bob:qe.price_bob?Number(qe.price_bob):0,duration_min:qe.duration_min?Number(qe.duration_min):null,image_url:qe.image_url.trim()||null,is_featured:qe.is_featured,is_active:qe.is_active};try{qe.id?(await nt(`/api/admin/services/${qe.id}`,k),K({message:"Servicio actualizado correctamente"})):(await Te("/api/admin/services",k),K({message:"Servicio creado correctamente"})),Go({id:"",code:"",name:"",subtitle:"",description:"",price_bob:"",duration_min:"",image_url:"",is_featured:!1,is_active:!0}),await cn()}catch(R){Y(J(R)),K({type:"error",message:J(R)||"Error al guardar servicio"})}}async function ep(h){try{await Jn(`/api/admin/services/${h}`),await cn(),K({message:"Servicio eliminado correctamente",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{try{await nt(`/api/admin/services/${h}`,{is_active:!0}),await cn(),K({message:"Servicio restaurado"})}catch(k){K({type:"error",message:J(k)||"No se pudo restaurar el servicio"})}}})}catch(k){Y(J(k)),K({type:"error",message:J(k)||"Error al eliminar servicio"})}}async function tp(h,k,R){if(h)try{await Te(`/api/admin/services/${h.id}/branches`,{branch_id:k,is_available:R}),await cn()}catch(z){Y(J(z))}}async function np(h,k){h!=null&&h.preventDefault&&h.preventDefault();const R=k||Yo||{},z=typeof R.name=="string"?R.name.trim():"";if(!z)return Y("Completa el nombre"),null;const te={name:z,category:R.category||"UTILITY",language:R.language||"es",body_text:R.body_text||R.body_preview||"",header_type:R.header_type||null,header_content:R.header_content||null,footer_text:R.footer_text||null,buttons:R.buttons||R.buttons_json||[]},It=R.variable_mappings||R.variableMappings||[];try{let Ge=null;return R.id?(Ge=await du(`/api/templates/${R.id}`,te),await du(`/api/templates/${R.id}/mappings`,{mappings:It}),K({message:"Borrador actualizado correctamente"})):(Ge=await Te("/api/templates/draft",{...te,variable_mappings:It}),K({message:"Borrador creado correctamente"})),await Yn(),(Ge==null?void 0:Ge.template)||null}catch(Ge){return Y(J(Ge)),K({type:"error",message:J(Ge)||"Error al guardar plantilla"}),null}}async function sp(h){if(h)try{await Te(`/api/templates/${h}/submit`,{}),await Yn(),K({message:"Plantilla enviada a revisin de Meta"})}catch(k){Y(J(k)),K({type:"error",message:J(k)||"Error al enviar a Meta"})}}async function rp(h){if(h&&!Ts.current.has(h))try{const k=As.slice();Ps(z=>z.filter(te=>te.id!==h));const R=setTimeout(async()=>{try{await Jn(`/api/templates/${h}`),await Yn(),K({message:"Plantilla eliminada definitivamente"})}catch(z){Ps(k),K({type:"error",message:J(z)||"No se pudo eliminar la plantilla"})}finally{Ts.current.delete(h)}},8e3);Ts.current.set(h,{timer:R,snapshot:k}),K({message:"Plantilla eliminada. Deshacer disponible",actionLabel:"DESHACER",duration:8e3,onAction:async()=>{const z=Ts.current.get(h);z!=null&&z.timer&&clearTimeout(z.timer),z!=null&&z.snapshot?Ps(z.snapshot):Ps(k),Ts.current.delete(h),K({message:"Eliminacin cancelada"})}})}catch(k){Y(J(k)),K({type:"error",message:J(k)||"Error al eliminar plantilla"})}}async function ip(){try{const h=await ue("/api/admin/audit?limit=200");jf(h.logs||[])}catch(h){Y(J(h))}}const Zo={open:0,pending:0,closed:0};((br==null?void 0:br.status_counts)||[]).forEach(h=>{Zo[h.status]=h._count.status});const ap=Oe?"Acceso al control plane":"Acceso a bandeja multiusuario";if(!e||!i)return r.jsx("div",{className:"login-shell",children:r.jsxs("div",{className:"login-card",children:[r.jsx("div",{className:"login-title",children:"Perzivalh"}),r.jsx("div",{className:"login-subtitle",children:ap}),r.jsxs("form",{className:"login-form",onSubmit:Cf,children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Email"}),r.jsx("input",{type:"email",value:N.email,onChange:h=>u(k=>({...k,email:h.target.value})),required:!0})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:"Password"}),r.jsx("input",{type:"password",value:N.password,onChange:h=>u(k=>({...k,password:h.target.value})),required:!0})]}),f?r.jsx("div",{className:"error",children:f}):null,r.jsx("button",{className:"primary",type:"submit",children:"Entrar"})]})]})});if((i==null?void 0:i.role)==="superadmin"&&Oe)return r.jsx("main",{className:"superadmin-page",children:r.jsx(Su,{route:w,onNavigate:Ht,onImpersonateTenant:Xo,onLogout:Lr})});const Ms=(U==null?void 0:U[i.role])||Gt[i.role],lp=et(Ms,"modules","chat"),op=et(Ms,"modules","dashboard"),cp=et(Ms,"modules","campaigns"),up=et(Ms,"modules","settings"),dp=My(i,["admin"]),hp=et(Ms,"modules","chat","write"),fp=["Confirmar Cita","Solicitar Resultados","Urgencia"],ec={open:"Abierto",pending:"Pendiente",closed:"Cerrado"},pp=D?D.display_name||D.phone_e164||D.wa_id:"Selecciona un chat",mp=(D==null?void 0:D.phone_e164)||(D==null?void 0:D.wa_id)||"",gp=D?ec[D.status]||"Sin estado":"",vp=[{id:"chats",label:"Chats",icon:By,enabled:lp},{id:"dashboard",label:"Dashboard",icon:zy,enabled:op},{id:"campaigns",label:"Campanas",icon:Uy,enabled:cp},{id:"admin",label:"Configuraciones",icon:$y,enabled:up}],la=[];let tc="";ye.forEach(h=>{const k=h.created_at,R=k?new Date(k):null,z=R&&!Number.isNaN(R.getTime())?`${R.getFullYear()}-${R.getMonth()}-${R.getDate()}`:"";z&&z!==tc&&(la.push(r.jsx("div",{className:"day-pill",children:Oy(k)},`day-${z}`)),tc=z),la.push(r.jsxs("div",{className:`message ${h.direction} ${h.type==="note"?"note":""}`,children:[r.jsx("div",{className:"message-text",children:h.text||`[${h.type}]`}),r.jsx("div",{className:"message-meta",children:Ba(h.created_at)})]},h.id))});const yp=!!n&&i.role!=="superadmin";return r.jsxs("div",{className:`app-shell ${j==="admin"?"admin-shell":""}`,children:[r.jsx(qv,{navItems:vp,view:j,onSetView:A,theme:C,onToggleTheme:Lf,user:i,logoUrl:(l==null?void 0:l.logo_url)||"",brandName:(l==null?void 0:l.brand_name)||"",isProfileOpen:ge,onToggleProfile:()=>be(h=>!h),onLogout:Lr,onReturnToSuperadmin:bf,showReturnToSuperadmin:yp,getInitial:bu,SunIcon:Vy,MoonIcon:Fy}),j==="admin"?r.jsx(vy,{settingsSection:ee,setSettingsSection:b,settingsTab:G,setSettingsTab:X,rolePermissions:U,setRolePermissions:Tf,defaultRolePermissions:Gt,currentRole:i.role,isAdmin:dp,adminUsers:Ho,userForm:ht,setUserForm:Qo,roleOptions:He,handleUserSubmit:Ff,handleUserDelete:Wf,settings:Tr,setSettings:ia,handleSaveSettings:Qf,planName:(c==null?void 0:c.plan)||"",branches:pf,services:gf,branchForm:Ze,setBranchForm:qo,handleBranchSubmit:Xf,handleBranchDisable:Jf,serviceForm:qe,setServiceForm:Go,handleServiceSubmit:Zf,handleServiceDisable:ep,handleServiceBranchToggle:tp,tenantChannels:x,channelForm:y,setChannelForm:L,handleChannelSelect:Gf,handleChannelSubmit:Yf,handleRoleDelete:Kf,templates:As,templateForm:Yo,setTemplateForm:yf,handleTemplateSubmit:np,handleTemplateSubmitToMeta:sp,handleTemplateDelete:rp,handleSyncTemplates:Vf,auditLogs:xf,formatDate:Ba,useShellLayout:!0,pageError:rn}):j==="superadmin"?r.jsx("main",{className:"content content-page",children:r.jsx(Su,{onImpersonateTenant:Xo,onLogout:Lr})}):r.jsxs("main",{className:`content ${j==="chats"?"content-chats":"content-page"}`,children:[j==="chats"&&r.jsx(Gv,{activeConversation:D,conversations:Dt,channels:x,brandName:(l==null?void 0:l.brand_name)||"",lastReadMap:m,filters:O,showFilters:V,users:Gn,tags:Pn,statusOptions:Eu,statusLabels:ec,formatListTime:Ry,formatCompactDate:Py,messageBlocks:la,messageDraft:Ct,messageMode:An,quickActions:fp,tagInput:Q,latestNote:wf,loadingConversation:ne,isInfoOpen:ie,hasUnread:I,activeName:pp,activePhone:mp,activeStatusLabel:gp,canManageStatus:hp,messageInputRef:S,chatBodyRef:$,setShowFilters:q,setFilters:ce,loadConversation:Ef,handleBackToList:Pf,setIsInfoOpen:fe,handleChatScroll:Af,handleAssignSelf:Mf,handleStatusChange:Df,handleToggleTag:If,handleAddTag:Bf,handleQuickAction:Rf,handleSendMessage:Of,setMessageMode:qn,setMessageDraft:sn,scrollChatToBottom:Ar,getInitial:bu,PlusIcon:Hy,SearchIcon:Wy,VideoIcon:Qy,PhoneIcon:qy,InfoIcon:Gy,SendIcon:Yy}),j==="dashboard"&&r.jsx(Xv,{statusCounts:Zo,metrics:br,onRefresh:Jo}),j==="campaigns"&&r.jsx(Zv,{campaignForm:ln,setCampaignForm:Fo,campaignFilter:on,setCampaignFilter:Wo,templates:As,campaigns:of,selectedCampaignId:hf,campaignMessages:uf,users:Gn,tags:Pn,selectedTemplate:Nf,statusOptions:Eu,onCreateCampaign:Uf,onLoadCampaigns:Pr,onLoadCampaignMessages:zf,onSendCampaign:$f,formatDate:Ba}),rn&&r.jsx("div",{className:"error-banner",children:rn})]})]})}const Xy=Fh(document.getElementById("root"));Xy.render(r.jsx(Hv,{children:r.jsx(Ky,{})}));
